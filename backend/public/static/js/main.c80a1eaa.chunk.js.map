{"version":3,"sources":["history.js","services/HttpService.js","services/mealService.js","actions/MealActions.js","services/SocketService.js","actions/FilterActions.js","components/SearchBar.js","components/MealCategoryPreviewSM.js","services/UtilitiesService.js","components/MealCategoryList.js","components/MealEventPreview.js","components/MealEventList.js","components/MeetOurHosts.js","pages/Home.js","components/MealPreview.js","components/MealList.js","components/BadgePreview.js","components/BadgeList.js","components/Spinner.js","pages/MealApp.js","services/OccurranceUtils.js","actions/OccurrenceActions.js","components/ImageGallery.js","components/MealPageNav.js","components/MealPayment.js","components/ShowHideText.js","components/MealMenu.js","components/AttendeesPreview.js","components/AttendeesList.js","actions/SocketAction.js","components/ReviewForm.js","components/ReviewPreview.js","components/ReviewList.js","components/MealMap.js","pages/MealDetails.js","components/UserMealPreview.js","components/UserMealList.js","pages/UserDetails.js","services/ExternalService.js","components/ImageUpload.js","components/PromotionCheckbox.js","components/MealForm.js","pages/MealFormWrapper.js","components/Notification.js","services/UserService.js","actions/UserActions.js","components/NotificationMsg.js","components/Header.js","components/Footer.js","components/Signup.js","components/Login.js","App.js","serviceWorker.js","reducers/FilterReducer.js","reducers/MealReducer.js","reducers/reducerUtilities.js","reducers/UserReducer.js","reducers/SystemReducer.js","reducers/SocketReducer.js","reducers/OccurranceReducer.js","reducers/index.js","store.js","index.js"],"names":["history","createBrowserHistory","axios","Axios","create","withCredentials","endpoint","data","params","ajax","a","async","method","url","res","console","log","dir","response","status","push","query","filter","groupBy","distinctBy","userId","at","type","tags","location","city","country","meals","group","_id","$push","distinct","HttpService","getById","id","meal","add","addedMeal","update","updatedMeal","getMealForRegistration","newMeal","now","Date","newOccurrences","occurrences","forEach","occurrence","total","capacity","date","load","dispatch","MealService","loadHomeMeals","loadUserMeal","userMeals","loadCities","cities","citiesToReducer","map","loadMealsByLocation","loadMealsByCuisine","loadCuisines","cuisineTypes","cuisineTypesToReducer","cuisine","action","socket","setup","io","terminate","on","eventName","cb","off","emit","setFilter","_setFilter","SearchBar","state","val","handleChange","event","key","setState","target","value","onSearchAction","props","className","placeholder","this","onChange","onKeyUp","Component","mapDispatchToProps","withRouter","connect","MealCategoryPreviewSM","category","to","displayCategory","toLowerCase","name","src","imgUrl","alt","shuffleArray","items","i","length","j","Math","floor","random","distinctArray","property","result","Map","item","has","set","_getImageByCategoryType","categoryType","categoryInstance","mapCuisinesImages","default","american","asian","spanish","italian","greek","moroccan","indian","jewish","israeli","latin","caribbean","british","mediterranian","filipino","balkan","egyptian","mapCitiesImages","dallas","barcelona","duino","athens","marrakech","delhi","bangkok","london","sofia","cairo","getItemsInRange","startDate","endDate","findAllByKey","obj","keyToFind","Object","entries","reduce","acc","concat","getRandomCategories","displayCounter","categories","current","split","undefined","slice","getRandomMeals","MealCategoryList","UtilitiesService","idx","MealEventPreview","imgUrls","cuisineType","title","price","MealEventList","MeetOurHosts","Home","onAllCuisines","onAllLocations","window","scrollTo","onClick","loggedInUser","user","homeMeals","msg","MealPreview","onCardClick","maxIdx","max","Infinity","date1","diffInDays","getTime","nextMeal","getNextDateFromNow","isPromoted","getDifferenceInDays","attendees","renderType","getMainMsg","reviews","variationIcon","nextDate","getAvgRate","promotionMsg","getPromotionMsg","toDateString","join","showThumbs","showStatus","infiniteLoop","MealList","BadgePreview","isSelected","onBadgeClick","badge","BadgeList","badges","selectedBadge","Spinner","color","height","width","MealApp","isLoading","resetFilterDefinitions","currReview","parseInt","rate","loadMeals","pathname","includes","results","match","badgeName","setBadges","badgeType","cuisines","onLocationClick","innerText","onCuisineClick","prevProps","JSON","stringify","isResultsUrl","getDisplayedMeal","selectedMeal","availableOccurrences","detailsMeal","errorMsg","storeMeal","host","hostedBy","fullName","messages","noAvailableOccurrence","eventSoldOut","hasAttendees","noAttendees","userRegistered","pleaseLogin","registrationCart","selectedOccurance","availableDates","eventSetup","mealType","startTime","endTime","parseFloat","currency","description","eventMenu","menu","address","lat","lng","images","hostReviews","review","byUser","txt","setOccurrences","sort","sortByDate","selectedDate","find","seatsLeft","setSelectedOccurance","setAvailableDates","eventAttendees","reservations","reservation","getEventAttendees","hostRating","totalRated","avgRate","toFixed","setHostRating","totalReservations","attendee","numOfAttendees","occurrenceAttendees","occurrenceTotalPrice","isLoggedInUser","getMeal","displayedMeal","changeSelectedOccurrance","updateMeal","newStoreMeal","ImageGallery","MealPageNav","href","MealPayment","totalPrice","availableSeats","availableText","registerCounter","buttonText","paymentClass","displayMsg","ev","preventDefault","Moment","format","userOccurrence","updateOccurrance","onChangeDate","onEventRegistration","htmlFor","style","fontFamily","min","ShowHideText","text","showLink","linkText","toggleText","textLength","showRows","MealMenu","xmlns","fill","stroke","strokeMiterlimit","d","firstCourse","course","mainCourse","desserts","dessert","beverages","beverage","AttendeesPreview","AttendeesList","currOccurrance","occurrance","getAttendeeList","addMsg","newMsg","ReviewForm","email","starClass","starSelected","msgs","onSaveReviewForm","onToggleStar","newRate","onHandleChange","onSubmit","Array","from","_","required","ReviewPreview","data-rating","ReviewList","mapContainerStyle","MealMap","google","initialCenter","zoom","GoogleApiWrapper","apiKey","MealDetails","displayReviewForm","signToSocketEvent","hostedId","SocketService","unSignToSocketEvent","registration","userReservation","titleHost","onToggleReviewForm","newReview","UserMealPreview","onClickRow","stopPropagation","onEditClick","onDelete","mealId","occurensId","isHosted","Fragment","toLocaleDateString","UserMealList","UserDetails","onCreateMeal","mealsToShow","attended","occurenceId","findIndex","splice","uploadImages","files","urls","_uploadImg","getLatLngFromAddress","replace","get","then","geometry","formatted_address","file","UPLOAD_URL","formData","FormData","append","fetch","body","json","catch","err","error","ImageUpload","displayed","drag","msgState","fileArray","fileObj","dropRef","React","createRef","handleDrag","handleDragIn","dragCounter","dataTransfer","handleDragOut","handleDrop","setPreviewImages","handleImageUpload","clearData","checkExistingImages","URL","createObjectURL","div","addEventListener","removeEventListener","ref","multiple","accept","onImgRemoval","CheckboxLabels","FormGroup","row","FormControlLabel","control","Checkbox","checked","label","MealForm","firstCourseTmp","mainCourseTmp","dessertTmp","drinkTmp","isActive","isBtnEnabled","size","cloudService","prevImgUrls","newImgUrls","enableBtn","field","onHandleDateAdd","parse","prevState","onHandleAddMenuItem","tmpFieldName","setTags","newTags","dateToRender","isFormComplete","onSaveMeal","newAddress","handleDateRemoval","occurrenceIdx","handleMenuItemRemoval","list","nodeName","classList","newList","onAddMenuItem","parentNode","newCourse","occurences","disabled","MealFormWrapper","mealToAdd","Notification","open","vertical","horizontal","backgroundColor","marginTop","padding","marginRight","borderTopLeftRadius","borderBottomLeftRadius","handleClick","newState","handleClose","updateOpenState","Snackbar","anchorOrigin","onClose","SnackbarContent","message","_handleLogin","sessionStorage","setItem","getUserLoggedIn","getItem","login","credentails","signup","logout","clear","checkConnection","UserService","_setUser","_addUser","NotificationMsg","titelHost","Header","showNotification","registeredUser","setTimeout","resetNotification","onLogout","loginAsGuest","password","Footer","Singup","modalIsOpen","username","phone","changeInput","onSignup","onCheckForm","openModal","Login","isHide","onLogInUser","changeForm","hideSignup","hideLogIn","loginOrSignupText","Signup","App","component","path","exact","Boolean","hostname","initialState","filteredMeal","createReducer","handlers","hasOwnProperty","updateObject","oldObject","newValues","assign","addItemToState","updateItemInState","itemId","updateItemCallback","removeItemFromState","localLoggedUser","UserReducer","reducerUtility","SET","ADD","rootReducer","combineReducers","system","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","Store","createStore","applyMiddleware","thunk","ReactDOM","render","store","document","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.c80a1eaa.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","import history from '../history';\r\nimport Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production' ? '/api/' : '//localhost:3030/api/';\r\n// const BASE_URL = process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030/';\r\n\r\nvar axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nexport default {\r\n  get(endpoint, data, params) {\r\n    return ajax(endpoint, 'GET', data, params);\r\n  },\r\n  post(endpoint, data, params) {\r\n    return ajax(endpoint, 'POST', data, params);\r\n  },\r\n  put(endpoint, data, params) {\r\n    return ajax(endpoint, 'PUT', data, params);\r\n  },\r\n  delete(endpoint, data, params) {\r\n    return ajax(endpoint, 'DELETE', data, params);\r\n  },\r\n};\r\n\r\nasync function ajax(endpoint, method = 'get', data = null, params = null, dispatch) {\r\n  try {\r\n    const res = await axios({\r\n      url: `${BASE_URL}${endpoint}`,\r\n      method,\r\n      data,\r\n      params,\r\n    });\r\n    return res.data;\r\n  } catch (err) {\r\n    console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}, with params: ${params}`);\r\n    console.dir(err);\r\n    if (err.response && err.response.status === 401) {\r\n      history.push('/');\r\n      // diaspatch ('authorization error')\r\n    }\r\n    // diaspatch ('error')\r\n    throw err;\r\n  }\r\n}\r\n","import HttpService from './HttpService';\r\n\r\nexport default {\r\n  query,\r\n  getById,\r\n  add,\r\n  update,\r\n  getMealForRegistration\r\n};\r\n\r\nconst endpoint = 'meal';\r\n\r\nasync function query(filter, groupBy, distinctBy) {\r\n  let params;\r\n  if (filter) {\r\n    params = {\r\n      userId: filter.userId,\r\n      at: filter.at,\r\n      type: filter.type,\r\n      tags: filter.tags,\r\n    };\r\n    if (filter.location) {\r\n      params.city = filter.location.city;\r\n      params.country = filter.location.country;\r\n    }\r\n  } else if (groupBy) {\r\n    if (groupBy.meals) {\r\n      params = {\r\n        group: groupBy._id,\r\n        meals: groupBy.meals.$push,\r\n      };\r\n    } else {\r\n      params = {\r\n        group: groupBy._id,\r\n      };\r\n    }\r\n  } else if (distinctBy) {\r\n    params = {\r\n      distinct: distinctBy._id,\r\n    };\r\n  }\r\n  const meals = await HttpService.get(endpoint, filter, params);\r\n  return meals;\r\n}\r\n\r\nasync function getById(id) {\r\n  const meal = await HttpService.get(`${endpoint}/${id}`);\r\n  return meal;\r\n}\r\n\r\nasync function add(meal) {\r\n  const addedMeal = await HttpService.post(`${endpoint}`, meal);\r\n  return addedMeal;\r\n}\r\n\r\nasync function update(meal) {\r\n  const updatedMeal = await HttpService.put(`${endpoint}/${meal._id}`, meal);\r\n  return updatedMeal;\r\n}\r\n\r\nfunction getMealForRegistration(meal) {\r\n  //this method gets a regular meal object\r\n  //returns a new meal containing only the following occurrences:\r\n  //dates that didn't already pass\r\n  //occurrences which have more room left\r\n\r\n  const newMeal = { ...meal }\r\n  const now = Date.now()\r\n  const newOccurrences = []\r\n  newMeal.occurrences.forEach(occurrence => {\r\n    if (occurrence.total < newMeal.capacity && occurrence.date > now) {\r\n      newOccurrences.push(occurrence)\r\n    }\r\n  })\r\n  newMeal.occurrences = newOccurrences\r\n  return newMeal;\r\n}","import MealService from '../services/mealService';\r\n\r\nexport default {\r\n  load,\r\n  getById,\r\n  add,\r\n  remove,\r\n  loadCities,\r\n  loadCuisines,\r\n  loadUserMeal,\r\n  loadMealsByLocation,\r\n  loadMealsByCuisine,\r\n  loadHomeMeals\r\n};\r\n\r\nexport function load(filter) {\r\n  return async dispatch => {\r\n    const meals = await MealService.query(filter);\r\n    dispatch({ type: 'LOAD_MEALS', meals });\r\n  };\r\n}\r\n\r\nexport function loadHomeMeals() {\r\n  return async dispatch => {\r\n    const meals = await MealService.query(null);\r\n    dispatch({ type: 'LOAD_HOME_MEALS', meals });\r\n  };\r\n}\r\n\r\nexport function loadMealsToList(meals) {\r\n  //this method gets the full list of meals as received from the backend (and stored in the global state)\r\n  //and filters the meals to contain only the meals with releveant occurrences (dates which didn't pass already, occurrences which are not fully occuppied)\r\n  return async dispatch => {\r\n    const filteredMeals = await MealService.filter(meals);\r\n    dispatch({ type: 'LOAD_FILTERED_MEALS', filteredMeals });\r\n  };\r\n}\r\n\r\nexport function loadUserMeal(filter) {\r\n  return async dispatch => {\r\n    const userMeals = await MealService.query(filter);\r\n    dispatch({ type: 'LOAD_USER_MEAL', userMeals });\r\n  };\r\n}\r\n\r\nexport function loadCities() {\r\n  const groupBy = {\r\n    _id: '$location.city',\r\n  };\r\n  return async dispatch => {\r\n    const cities = await MealService.query(null, groupBy);\r\n    const citiesToReducer = cities.map(city => city._id);\r\n    dispatch({ type: 'LOAD_CITIES', citiesToReducer });\r\n  };\r\n}\r\n\r\nexport function loadMealsByLocation() {\r\n  const groupBy = {\r\n    _id: '$location.city',\r\n    meals: {\r\n      $push: '$$ROOT',\r\n    },\r\n  };\r\n  return async dispatch => {\r\n    const meals = await MealService.query(null, groupBy);\r\n    dispatch({ type: 'LOAD_MEALS', meals });\r\n  };\r\n}\r\n\r\nexport function loadMealsByCuisine() {\r\n  const groupBy = {\r\n    _id: '$cuisineType',\r\n    meals: {\r\n      $push: '$$ROOT',\r\n    },\r\n  };\r\n  return async dispatch => {\r\n    const meals = await MealService.query(null, groupBy);\r\n    dispatch({ type: 'LOAD_MEALS', meals });\r\n  };\r\n}\r\n\r\nexport function loadCuisines() {\r\n  const groupBy = {\r\n    _id: '$cuisineType',\r\n  };\r\n  return async dispatch => {\r\n    const cuisineTypes = await MealService.query(null, groupBy);\r\n    const cuisineTypesToReducer = cuisineTypes.map(cuisine => cuisine._id);\r\n    dispatch({ type: 'LOAD_CUISINES', cuisineTypesToReducer });\r\n  };\r\n}\r\n\r\nexport function loadTags() {\r\n  const distinct = {\r\n    _id: 'tags',\r\n  };\r\n  return async dispatch => {\r\n    const tags = await MealService.query(null, null, distinct);\r\n    // const cuisineTypesToReducer = cuisineTypes.map(cuisine => cuisine._id)\r\n    dispatch({ type: 'LOAD_TAGS', tags });\r\n  };\r\n}\r\n\r\nexport function getById(id) {\r\n  return async dispatch => {\r\n    const meal = await MealService.getById(id);\r\n    dispatch({ type: 'GET_MEAL_BY_ID', meal });\r\n  };\r\n}\r\n\r\nexport function add(meal) {\r\n  const action = meal._id ? 'UPDATE_MEAL' : 'ADD_MEAL';\r\n  if (action === 'UPDATE_MEAL') {\r\n    return async dispatch => {\r\n      const newMeal = await MealService.update(meal);\r\n      dispatch({ type: action, meal: newMeal });\r\n    };\r\n  } else {\r\n    return async dispatch => {\r\n      const newMeal = await MealService.add(meal);\r\n      dispatch({ type: action, meal: newMeal });\r\n    };\r\n  }\r\n}\r\n\r\nexport function remove(id) {\r\n  return async dispatch => {\r\n    await MealService.remove(id);\r\n    dispatch({ type: 'REMOVE_MEAL', id });\r\n  };\r\n}\r\n\r\nexport function getMealForRegistration(meal) {\r\n  //this method does not turn to the backend therefore it is not async!\r\n  return dispatch => {\r\n    const newMeal = MealService.getMealForRegistration(meal);\r\n    dispatch({ type: 'LOAD_MEAL_FOR_REGISTRATION', filteredMeal: newMeal });\r\n  };\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\n\r\nlet socket;\r\n\r\nexport default {\r\n  setup,\r\n  terminate,\r\n  on,\r\n  off,\r\n  emit\r\n};\r\n\r\nfunction setup() {\r\n\r\n  socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n  socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n  socket.on(eventName, cb);\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n  socket.off(eventName, cb);\r\n}\r\n\r\nfunction emit(eventName, data) { \r\n   \r\n  socket.emit(eventName, data);\r\n}\r\n","\r\nexport default {\r\n    setFilter\r\n};\r\n\r\nexport function setFilter(filter) {\r\n    return async dispatch => await dispatch(_setFilter(filter))\r\n}\r\n\r\nfunction _setFilter(filter) {\r\n    return {\r\n        type: 'SET_FILTER',\r\n        filter\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport { setFilter } from '../actions/FilterActions';\r\n\r\nexport class SearchBar extends Component {\r\n  state = {\r\n    val: '',\r\n  };\r\n\r\n  handleChange = async event => {\r\n    if (event.key !== 'Enter') {\r\n      this.setState({ val: event.target.value });\r\n    }\r\n  };\r\n\r\n  onSearchAction = async event => {\r\n    if (event.key === 'Enter' || event.type === 'click') {\r\n      const res = this.state.val;\r\n      await this.setState({ val: '' });\r\n      this.props.history.push(`/meal/results/${res}`);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='main-search-container container margin-top-20'>\r\n        <input className='search-input' type='text' placeholder={this.props.placeholder} value={this.state.val} onChange={this.handleChange} onKeyUp={this.onSearchAction}></input>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  filter: state.filter.filter,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  setFilter,\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SearchBar));","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass MealCategoryPreviewSM extends Component {\r\n  render() {\r\n    if (!this.props.category) return <div></div>;\r\n    return (\r\n      <Link to={`/meal/${this.props.displayCategory.toLowerCase()}/${this.props.category.name}`}>\r\n        <div className='category-card-sm flex column'>\r\n          <img src={this.props.category.imgUrl} alt='category' className='card-img'></img>\r\n          <h5 className='card-name'>{this.props.category.name}</h5>\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealCategoryPreviewSM;\r\n","function getItemsInRange(items, startDate, endDate = null) {\r\n  if (endDate === null)\r\n    return items.filter(item => {\r\n      return item.date > startDate;\r\n    });\r\n  else\r\n    return items.filter(item => {\r\n      return item.date > startDate && item.date <= endDate;\r\n    });\r\n}\r\n\r\nfunction findAllByKey(obj, keyToFind) {\r\n  return Object.entries(obj).reduce((acc, [key, value]) => (key === keyToFind ? acc.concat(value) : typeof value === 'object' ? acc.concat(findAllByKey(value, keyToFind)) : acc), []);\r\n}\r\n\r\nfunction shuffleArray(items) {\r\n  for (let i = items.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [items[i], items[j]] = [items[j], items[i]];\r\n  }\r\n  return items;\r\n}\r\n\r\nfunction distinctArray(items, property) {\r\n  const result = [];\r\n  const map = new Map();\r\n  for (const item of items) {\r\n    if (!map.has(item[property])) {\r\n      map.set(item[property], true);\r\n      result.push({ ...item });\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction getRandomMeals(meals, displayCounter = 4) {\r\n  let result = [...meals];\r\n  if (result.length > 0) {\r\n    result = shuffleArray(result);\r\n    let length = result.length >= displayCounter ? displayCounter : result.length;\r\n    return result.slice(0, length);\r\n  }\r\n  return [];\r\n}\r\n\r\nfunction _getImageByCategoryType(categoryType, categoryInstance) {\r\n  let imgUrl = '';\r\n\r\n  const mapCuisinesImages = {\r\n    default: 'https://res.cloudinary.com/contentexs/image/upload/v1580324681/default-c.jpg',\r\n    american: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/tex-mex.jpg',\r\n    asian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/asian.jpg',\r\n    spanish: 'https://res.cloudinary.com/contentexs/image/upload/v1580324681/barcelona.jpg',\r\n    italian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/italian.jpg',\r\n    greek: 'https://res.cloudinary.com/contentexs/image/upload/v1580326079/greek.jpg',\r\n    moroccan: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/moroccan.jpg',\r\n    indian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/indian.jpg',\r\n    jewish: 'https://res.cloudinary.com/contentexs/image/upload/v1580895267/jewish.jpg',\r\n    israeli: 'https://res.cloudinary.com/contentexs/image/upload/v1580895267/jewish.jpg',\r\n    latin: 'https://res.cloudinary.com/contentexs/image/upload/v1580895267/latin.jpg',\r\n    caribbean: 'https://res.cloudinary.com/contentexs/image/upload/v1580897677/caribbean.jpg',\r\n    british: 'https://res.cloudinary.com/contentexs/image/upload/v1580897912/british.jpg',\r\n    mediterranian: 'https://res.cloudinary.com/contentexs/image/upload/v1580898100/mediterranian.jpg',\r\n    filipino: 'https://res.cloudinary.com/contentexs/image/upload/v1580899463/filipino.jpg',\r\n    balkan: 'https://res.cloudinary.com/contentexs/image/upload/v1580899630/balkan.jpg',\r\n    egyptian: 'https://res.cloudinary.com/contentexs/image/upload/v1580900518/egyptian.jpg',\r\n  };\r\n\r\n  const mapCitiesImages = {\r\n    default: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/default.jpg',\r\n    dallas: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/dallas.jpg',\r\n    barcelona: 'https://res.cloudinary.com/contentexs/image/upload/v1580894334/bkg-barcelona.jpg',\r\n    duino: 'https://res.cloudinary.com/contentexs/image/upload/v1580322154/duino.jpg',\r\n    athens: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/athens.jpg',\r\n    marrakech: 'https://res.cloudinary.com/contentexs/image/upload/v1580322154/marrakech.jpg',\r\n    delhi: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/delhi.jpg',\r\n    bangkok: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/bangkok.jpg',\r\n    'new-york': 'https://res.cloudinary.com/contentexs/image/upload/v1580894333/newyork.jpg',\r\n    'tel-aviv': 'https://res.cloudinary.com/contentexs/image/upload/v1580894334/telaviv.jpg',\r\n    london: 'https://res.cloudinary.com/contentexs/image/upload/v1580897254/london.jpg',\r\n    sofia: 'https://res.cloudinary.com/contentexs/image/upload/v1580897254/sofia.jpg',\r\n    cairo: 'https://res.cloudinary.com/contentexs/image/upload/v1580900443/cairo.jpg',\r\n  };\r\n\r\n  if (categoryType.type === 'Cuisine') {\r\n    imgUrl = mapCuisinesImages[categoryInstance.toLowerCase()] ? mapCuisinesImages[categoryInstance.toLowerCase()] : mapCuisinesImages['default'];\r\n  }\r\n\r\n  if (categoryType.type === 'Location') {\r\n    imgUrl = mapCitiesImages[categoryInstance.toLowerCase()] ? mapCitiesImages[categoryInstance.toLowerCase()] : mapCitiesImages['default'];\r\n  }\r\n  return imgUrl;\r\n}\r\n\r\nfunction getRandomCategories(meals, category, displayCounter = 4) {\r\n  let result = [...meals];\r\n  let categories = [];\r\n  const categoryType = category === 'Cuisine' ? { type: category, property: 'cuisineType' } : { type: category, property: 'location.city' };\r\n\r\n  result.forEach(current => {\r\n    const categoryInstance = categoryType.property.split('.').reduce((result, value) => {\r\n      return result ? result[value] : undefined;\r\n    }, current);\r\n    categories = [...categories, { name: categoryInstance, imgUrl: _getImageByCategoryType(categoryType, categoryInstance) }];\r\n  });\r\n\r\n  categories = distinctArray(categories, 'name');\r\n  categories = shuffleArray(categories);\r\n\r\n  let length = categories.length >= displayCounter ? displayCounter : categories.length;\r\n  return categories.slice(0, length);\r\n}\r\n\r\nexport default {\r\n  getItemsInRange,\r\n  findAllByKey,\r\n  getRandomCategories,\r\n  getRandomMeals,\r\n};\r\n","import React, { Component } from 'react';\r\nimport MealCategoryPreviewSM from './MealCategoryPreviewSM';\r\nimport UtilitiesService from '../services/UtilitiesService';\r\n\r\nclass MealCategoryList extends Component {\r\n  state = { categories: [], displayCategory: '' };\r\n  componentDidMount() {\r\n    const categories = UtilitiesService.getRandomCategories(this.props.meals, this.props.displayCategory);\r\n    this.setState({ categories: categories ? categories : [], displayCategory: this.props.displayCategory });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='main-categories-container category-cards'>\r\n        {this.state.categories &&\r\n          this.state.categories.map((category, idx) => {\r\n            return <MealCategoryPreviewSM key={idx} category={category} displayCategory={this.props.displayCategory}></MealCategoryPreviewSM>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealCategoryList;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass MealEventPreview extends Component {\r\n  render() {\r\n    if (!this.props.meal) return <div></div>;\r\n    const { meal } = this.props;\r\n\r\n    return (\r\n      <Link to={`/meal/${meal._id}`}>\r\n        <div className='category-card'>\r\n          <div className='img-wrapper'>\r\n            <img src={meal.imgUrls[0]} alt='category' className='card-img'></img>\r\n          </div>\r\n          <h5 className='card-name'>{meal.cuisineType}</h5>\r\n          <div className='card-total-one'>\r\n            <div>\r\n              <span>{meal.title}</span>\r\n            </div>\r\n          </div>\r\n          <div className='card-hosted'>\r\n            <div>\r\n              <span>{meal.location.country} </span>,<span>{meal.location.city} </span>\r\n            </div>\r\n          </div>\r\n          <div className='card-avg-price'>\r\n            <div>\r\n              <span className='title'>Price:</span>\r\n              <span>&nbsp;{meal.price}</span>\r\n            </div>\r\n          </div>\r\n          <div className='card-btn'>\r\n            <span className='btn'>View Event</span>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealEventPreview;\r\n","import React, { Component } from 'react';\r\nimport MealEventPreview from './MealEventPreview';\r\nimport UtilitiesService from '../services/UtilitiesService';\r\n\r\nclass MealEventList extends Component {\r\n  state = { meals: [] };\r\n  componentDidMount() {\r\n    const meals = UtilitiesService.getRandomMeals(this.props.meals, 4);\r\n    this.setState({ meals: meals ? meals : [] });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='main-categories-container category-cards'>\r\n        {this.state.meals &&\r\n          this.state.meals.map((meal, idx) => {\r\n            return <MealEventPreview key={idx} meal={meal}></MealEventPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealEventList;\r\n","import React, { Component } from 'react';\r\n\r\nexport default class MeetOurHosts extends Component {\r\n  render() {\r\n    return (\r\n      <div className='main-meet-hosts-container'>\r\n        <div className='hosts'>\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580359192/002.jpg' alt='Our event hosts' />\r\n            <h2>Mary Smith</h2>\r\n            <h3 className='host-txt'> I'm just someone who likes cooking and for whom sharing food is a form of expression.</h3>\r\n            <blockquote className='host-reviews'>\r\n              Amazing! I had such a fantastic time at Mary's home. She is a great host -- it felt like dinner with family. Wonderful, flavorful food and lots of it. Thank You!\r\n              <cite>Alberto Duncan</cite>\r\n            </blockquote>\r\n          </div>\r\n\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580360371/001.jpg' alt='Our event hosts' />\r\n            <h2>Kathy Wilson</h2>\r\n            <h3 className='host-txt'> I love cooking with my friends, sharing recipes and meeting new people.</h3>\r\n            <blockquote className='host-reviews'>\r\n              Kathy and Luc were incredibly hospitable and full of stories from their incredibly full lives. The boat was beautiful and so was the area we saw while we were on it. One of the best meals I had in my life\r\n              <cite>Lisa Freeman</cite>\r\n            </blockquote>\r\n          </div>\r\n\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580359192/003.jpg' alt='Our event hosts' />\r\n            <h2>Luc Seath</h2>\r\n            <h3 className='host-txt'> Astrophysicist by formation, IT Database Designer by profession and cook by passion.</h3>\r\n            <blockquote className='host-reviews'>\r\n              It was a very cozy and nice atmosphere. The food was prepared with great attention to detail and there was a huge variety of delicacies. Really very very tasty. It was great a pleasure!\r\n              <cite>Rob Smith</cite>\r\n            </blockquote>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { loadHomeMeals } from '../actions/MealActions';\r\nimport SocketService from '../services/SocketService';\r\n\r\nimport SearchBar from '../components/SearchBar';\r\nimport MealCategoryList from '../components/MealCategoryList';\r\nimport MealEventList from '../components/MealEventList';\r\nimport MeetOurHosts from '../components/MeetOurHosts';\r\n\r\nclass Home extends Component {\r\n\r\n  componentDidMount() {\r\n    window.scrollTo(0,0)\r\n    this.props.loadHomeMeals();\r\n  }\r\n\r\n  onAllCuisines = () => {\r\n    this.props.history.push('/meal/cuisine')\r\n  }\r\n\r\n  onAllLocations = () => {\r\n    this.props.history.push('/meal/location')\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div className='hero-container'>\r\n          <div className='hero-box flex column align-center'>\r\n            <div className='text flex column align-center'>\r\n              <span>let's eat.</span>\r\n              <span>Discover Home Cooking Around The World</span>\r\n            </div>\r\n            <div className='how-to'>\r\n              <ul className='clean-list flex align-center justify-center margin-bottom-20'>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580171632/globe.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>1.</span> Location\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580171632/event.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>2.</span>Select\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580172376/calender.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>3.</span>Register\r\n                  </span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className='search-container'>\r\n              <SearchBar placeholder='Where to ?  '></SearchBar>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='section-container'>\r\n          {this.props.meals && this.props.meals.length > 0 && (\r\n            <>\r\n              <div className='section-title-container'>\r\n                <h2>Browse Our Top Locations</h2>\r\n                <button className=\"container btn-more-options\" onClick={this.onAllLocations}>More Locations</button>\r\n              </div>\r\n              <MealCategoryList meals={this.props.meals} displayCategory='Location'></MealCategoryList>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className='section-container'>\r\n          {this.props.meals && this.props.meals.length > 0 && (\r\n            <>\r\n              <div className='section-title-container'>\r\n                <h2>View Our Exciting Cuisines</h2>\r\n                <button className=\"container btn-more-options\" onClick={this.onAllCuisines}>More Cuisines</button>\r\n              </div>\r\n              <MealCategoryList meals={this.props.meals} displayCategory='Cuisine'></MealCategoryList>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className='section-container'>\r\n          {this.props.meals && this.props.meals.length > 0 && (\r\n            <>\r\n              <div className='section-title-container'>\r\n                <h2>Here Are Our New Events</h2>\r\n              </div>\r\n              <MealEventList meals={this.props.meals}></MealEventList>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className='section-container'>\r\n          <div className='section-title-container'>\r\n            <h2>Meet Our Hosts</h2>\r\n          </div>\r\n          <MeetOurHosts></MeetOurHosts>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  filter: state.filter.filter,\r\n  meals: state.meal.homeMeals,\r\n  msg: state.socket.msg,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  loadHomeMeals,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport { Carousel } from 'react-responsive-carousel';\r\n\r\nclass MealPreview extends Component {\r\n\r\n    getNextDateFromNow() {\r\n        let max = -Infinity\r\n        let maxIdx;\r\n        this.props.meal.occurrences.forEach((occurrence, idx) => {\r\n            if (occurrence.date > max && occurrence.date > Date.now()) {\r\n                max = occurrence\r\n                maxIdx = idx\r\n            }\r\n        })\r\n        return { max, maxIdx }\r\n    }\r\n\r\n    getDifferenceInDays(date) {\r\n        const date1 = new Date(date)\r\n        const now = new Date(Date.now())\r\n        const diffInDays = (date1.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)\r\n        return Math.floor(diffInDays);\r\n    }\r\n\r\n    getPromotionMsg() {\r\n        const nextMeal = this.getNextDateFromNow()\r\n\r\n        if (this.props.meal.isPromoted) return 'super host';\r\n        else if (nextMeal.maxIdx) {\r\n            if (this.getDifferenceInDays(nextMeal.max.date) <= 2) return 'hurry up!';\r\n            else if (this.props.meal.capacity - this.props.meal.occurrences[nextMeal.maxIdx].attendees.length < 4) {\r\n                return `${this.props.meal.capacity - this.props.meal.occurrences[nextMeal.maxIdx].attendees.length} places left!`\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getMainMsg() {\r\n        let res;\r\n        if (this.props.renderType === 'location') {\r\n            res = {\r\n                val: this.props.meal.location.city,\r\n                type: 'location'\r\n            }\r\n            return res\r\n        } else {\r\n            res = {\r\n                val: this.props.meal.cuisineType,\r\n                type: 'cuisine'\r\n            }\r\n            return res\r\n        }\r\n    }\r\n\r\n    onCardClick = (id) => {\r\n        this.props.onCardClick(id)\r\n    }\r\n\r\n    render() {\r\n        const msg = this.getMainMsg();\r\n        const reviews = [...this.props.meal.reviews]\r\n        const variationIcon = (msg.type === 'location') ? 'https://res.cloudinary.com/contentexs/image/upload/v1580170530/dish-round.svg' : 'https://res.cloudinary.com/contentexs/image/upload/v1580171634/location.svg'\r\n        const avgRate = (this.props.meal && reviews) ? this.props.getAvgRate(reviews) : ''\r\n        let nextDate = new Date(this.getNextDateFromNow().max.date)\r\n        const promotionMsg = this.getPromotionMsg()\r\n        nextDate = nextDate.toDateString().split(' ').slice(1, 3).join(' ')\r\n        return this.props.meal && <div className=\"\">\r\n            <div className='category-card-prev'>\r\n                <div className='image-with-superhost'>\r\n                    {promotionMsg && <div className=\"super-host-preview \">{promotionMsg}</div>}\r\n                    <div className=\"img-carousel-container\">\r\n                        <Carousel showThumbs={false} showStatus={false} infiniteLoop={true}>\r\n                            {this.props.meal.imgUrls.map((imgUrl, idx) => {\r\n                                return <img key={idx} src={imgUrl} alt=\"\" className=\"card-img\"></img>\r\n                            })}\r\n                        </Carousel>\r\n                    </div>\r\n                </div>\r\n                <h5 className='card-name-prev'>{msg.val}</h5>\r\n                <div className='card-total-one-prev'>\r\n                    <img src={variationIcon} alt='icon'></img>\r\n                    <div>\r\n                        <span>{msg.type === 'location' ? this.props.meal.cuisineType : this.props.meal.location.city + ', ' + this.props.meal.location.country}</span>\r\n                    </div>\r\n                </div>\r\n                <div className='card-hosted-prev'>\r\n                    <img src='https://res.cloudinary.com/contentexs/image/upload/v1580170530/dinner-round.svg' alt='dinner icon'></img>\r\n                    <div>\r\n                        <span> {this.props.meal.title} </span>\r\n                    </div>\r\n                </div>\r\n                <div className='card-next-date-prev'>\r\n                    <img src='https://res.cloudinary.com/contentexs/image/upload/v1580170530/calender-round.svg' alt='calender icon'></img>\r\n                    <div>\r\n                        <span className='title-prev'>Next Event Is On, </span> <span>{nextDate}</span>\r\n                    </div>\r\n                </div>\r\n                <div className='card-avg-price-prev'>\r\n                    <img src='https://res.cloudinary.com/contentexs/image/upload/v1580328925/money.svg' alt='money icon'></img>\r\n                    <div>\r\n                        <span className='title-prev'>Price is </span>\r\n                        <span>\r\n                            ${this.props.meal.price}\r\n                            <small> (per guest)</small>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div className='card-btn-prev'>\r\n                    <Link to={`/meal/${this.props.meal._id}`} className='btn'>\r\n                        <span className=''>View Event</span>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\nexport default MealPreview;","import React, { Component } from 'react';\r\nimport { withRouter } from \"react-router\";\r\n// import MealPreview from './MealPreview'\r\nimport MealPreview from './MealPreview'\r\n\r\nclass MealList extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"container category-cards-list\">\r\n        {this.props.meals.map(meal => (\r\n          <div  key={meal._id}>\r\n            <MealPreview onCardClick={this.props.onCardClick} meal={meal} getAvgRate={this.props.getAvgRate} renderType={this.props.renderType} />\r\n          </div>\r\n        ))}\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(MealList);\r\n\r\n\r\n\r\n\r\n","import React from \"react\";\r\n\r\nexport default function BadgePreview(props) {\r\n    return (\r\n        <div className={props.isSelected}  onClick={props.onBadgeClick}>\r\n            <h3 className=\"\">{props.badge}</h3>\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react';\r\n\r\nimport BadgePreview from './BadgePreview'\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass BadgeList extends Component {\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <span className=\"container  badge-list-container margin-top-20\">\r\n                {this.props.badges && this.props.badges.map((badge, idx) => {\r\n                    return <div className=\"badge-card-container \" key={idx}>\r\n                        <BadgePreview isSelected={badge === this.props.selectedBadge ? 'selected' : ''} onBadgeClick={this.props.onBadgeClick} badge={badge} />\r\n                    </div>\r\n                })}\r\n            </span>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(BadgeList);","import React from 'react';\r\nimport ReactLoading from 'react-loading';\r\n\r\nexport default function Spinner({ type, color }) {\r\n  return <ReactLoading type={type} color={color} height={100} width={100} />;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { load, loadCuisines, loadCities, loadMealsByLocation, loadMealsByCuisine } from '../actions/MealActions';\r\nimport { setFilter } from '../actions/FilterActions';\r\n\r\nimport MealList from '../components/MealList';\r\nimport BadgeList from '../components/BadgeList';\r\nimport Spinner from '../components/Spinner';\r\nimport SearchBar from '../components/SearchBar';\r\n\r\nexport class MealApp extends Component {\r\n  state = {\r\n    selectedBadge: '',\r\n    renderType: '',\r\n    isLoading: true\r\n  };\r\n\r\n  async componentDidMount() {\r\n    window.scrollTo(0,10)\r\n    await this.resetFilterDefinitions();\r\n    if (this.props.location.pathname.includes('results')) {\r\n      this.setState({ renderType: 'results' });\r\n      const { results } = this.props.match.params;\r\n      await this.props.setFilter({ ...this.filter, tags: results });\r\n      await this.loadMeals();\r\n    } else {\r\n      await this.loadMeals();\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (JSON.stringify(prevProps.location.pathname) !== JSON.stringify(this.props.location.pathname)) {\r\n      await this.loadMeals();\r\n    }\r\n  }\r\n\r\n  async componentWillUnmount() {\r\n    await this.resetFilterDefinitions();\r\n  }\r\n\r\n  resetFilterDefinitions = async () => {\r\n    await this.props.setFilter({\r\n      userId: '',\r\n      at: '',\r\n      type: '',\r\n      location: {\r\n        city: '',\r\n        country: '',\r\n      },\r\n      tags: '',\r\n    });\r\n  }\r\n\r\n  getAvgRate = reviews => {\r\n    return reviews.reduce((acc, currReview) => acc + parseInt(currReview.rate), 0) / reviews.length;\r\n  };\r\n\r\n  load = async () => {\r\n    await this.props.load(this.props.filter)\r\n  }\r\n\r\n  loadMeals = async () => {\r\n    if (this.props.location.pathname.includes('results')) {\r\n      const { results } = this.props.match.params;\r\n      await this.props.setFilter({ ...this.filter, tags: results });\r\n      this.setState({ isLoading: true })\r\n      await this.load();\r\n      this.setState({ isLoading: false })\r\n    } else {\r\n      let badgeName = '';\r\n      if (this.props.location.pathname.includes('location')) {\r\n        badgeName = 'location';\r\n      } else if (this.props.location.pathname.includes('cuisine')) {\r\n        badgeName = 'cuisine';\r\n      }\r\n      this.setBadges(badgeName);\r\n      this.setState({ renderType: badgeName });\r\n      if (badgeName === 'location') {\r\n        const { location } = this.props.match.params;\r\n        if (!location) {\r\n          //load meals grouped by location\r\n          await this.props.loadMealsByLocation();\r\n          this.setState({ isLoading: false })\r\n        } else {\r\n          //load meals from specific location\r\n          await this.props.setFilter({ ...this.props.filter, location: { ...this.props.location, city: location } })\r\n          this.setState({ isLoading: true })\r\n          await this.load();\r\n          this.setState({ isLoading: false })\r\n        }\r\n      } else {\r\n        const { cuisine } = this.props.match.params;\r\n        if (!cuisine) {\r\n          //load meals grouped by cuisine\r\n          this.props.loadMealsByCuisine();\r\n          this.setState({ isLoading: false })\r\n        } else {\r\n          await this.props.setFilter({ ...this.props.filter, type: cuisine })\r\n          //load meals from specific cuisine\r\n          this.setState({ isLoading: true })\r\n          await this.load();\r\n          this.setState({ isLoading: false })\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  setBadges = async badgeType => {\r\n    if (badgeType === 'location' && !(this.props.cities.length > 0)) {\r\n      await this.props.loadCities();\r\n    } else if (badgeType === 'cuisine' && !(this.props.cuisines.length > 0)) {\r\n      await this.props.loadCuisines();\r\n    }\r\n  };\r\n\r\n  onLocationClick = async event => {\r\n    const city = event.target.innerText;\r\n    await this.resetFilterDefinitions();\r\n    await this.props.setFilter({ ...this.props.filter, location: { ...this.props.filter.location, city } });\r\n    this.props.history.push(`/meal/location/${city}`);\r\n    await this.loadMeals();\r\n  };\r\n\r\n  onCuisineClick = async event => {\r\n    const cuisine = event.target.innerText;\r\n    await this.resetFilterDefinitions();\r\n    await this.props.setFilter({ ...this.props.filter, type: cuisine });\r\n    this.props.history.push(`/meal/cuisine/${cuisine}`);\r\n    await this.loadMeals();\r\n  };\r\n\r\n  onCardClick = id => {\r\n    this.props.history.push(`/meal/${id}`);\r\n  };\r\n  \r\n  render() {\r\n    const isResultsUrl = this.props.location.pathname.includes('results');\r\n    return (\r\n      <div className='container'>\r\n        <SearchBar></SearchBar>\r\n        \r\n        {this.state.isLoading && ((!this.props.cities && this.state.renderType === 'location' && !isResultsUrl) || (!this.props.cuisines && this.state.renderType === 'cuisine' && !isResultsUrl)) && <div className='spinner-container'>\r\n            <Spinner type='spin'></Spinner>\r\n          </div>}\r\n        {this.props.cuisines && this.state.renderType === 'cuisine' && !isResultsUrl && <BadgeList selectedBadge={this.state.selectedBadge} onBadgeClick={this.onCuisineClick} badges={this.props.cuisines}></BadgeList>}\r\n        {this.props.cities && this.state.renderType === 'location' && !isResultsUrl && <BadgeList selectedBadge={this.state.selectedBadge} onBadgeClick={this.onLocationClick} badges={this.props.cities}></BadgeList>}\r\n        {this.props.meals.length > 0 && this.state.renderType && !this.state.isLoading && <MealList onCardClick={this.onCardClick} onCuisineClick={this.onCuisineClick} onLocationClick={this.onLocationClick} renderType={this.state.renderType} meals={this.props.meals} getAvgRate={this.getAvgRate}></MealList>}\r\n        {!this.state.isLoading && this.props.meals.length === 0 && isResultsUrl && <div>Your search has no results</div>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  meals: state.meal.meals,\r\n  filter: state.filter.filter,\r\n  cities: state.meal.cities,\r\n  cuisines: state.meal.cuisines,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  load,\r\n  setFilter,\r\n  loadCuisines,\r\n  loadCities,\r\n  loadMealsByLocation,\r\n  loadMealsByCuisine,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealApp);\r\n","import UtilitiesService from './UtilitiesService';\r\n\r\n\r\nexport const getDisplayedMeal = (selectedMeal, loggedInUser) => {\r\n  let detailsMeal = {},\r\n    availableOccurrences = [];\r\n\r\n  if (!selectedMeal) return null;\r\n\r\n  let meal = { ...selectedMeal };\r\n  availableOccurrences = meal.occurrences && meal.occurrences.length > 0 ? UtilitiesService.getItemsInRange(meal.occurrences, new Date()) : [];\r\n  if (!availableOccurrences || meal.occurrences.length < 1) return { errorMsg: 'There are no available events' };\r\n\r\n  detailsMeal = {\r\n    storeMeal: meal,\r\n    id: meal._id,\r\n    host: {\r\n      _id: meal.hostedBy._id,\r\n      fullName: meal.hostedBy.fullName,\r\n      imgUrl: meal.hostedBy.imgUrl,\r\n    },\r\n    messages: {\r\n      noAvailableOccurrence: 'We are sorry, It seems we made a mistake and this event is not active. You will be redirected to our events page to continue browsing.',\r\n      eventSoldOut: 'We are sorry, It seems we made a mistake and this event is all sold out. You will be redirected to our events page to continue browsing.',\r\n      hasAttendees: 'Meet the other guests',\r\n      noAttendees: 'Be the first one to join.',\r\n      userRegistered: 'You are booked to this event',\r\n      pleaseLogin: 'Please login before proceeding.',\r\n    },\r\n    registrationCart: {},\r\n    selectedOccurance: {},\r\n    availableDates: {},\r\n    isPromoted: meal.isPromoted,\r\n    eventSetup: {\r\n      capacity: parseInt(meal.capacity),\r\n      cuisineType: meal.cuisineType,\r\n      mealType: meal.mealType,\r\n      startTime: meal.mealType === 'Dinner' ? '6:00PM' : meal.mealType === 'Lunch' ? '12:00PM' : '9:00AM',\r\n      endTime: meal.mealType === 'Dinner' ? '9:00PM' : meal.mealType === 'Lunch' ? '4:00PM' : '11:00AM',\r\n    },\r\n    price: parseFloat(meal.price),\r\n    currency: meal.currency,\r\n    title: meal.title,\r\n    description: meal.description,\r\n    eventMenu: meal.menu,\r\n    location: {\r\n      country: meal.location.country,\r\n      city: meal.location.city,\r\n      address: meal.location.address,\r\n      lat: meal.location.lat,\r\n      lng: meal.location.lng,\r\n    },\r\n    images: meal.imgUrls,\r\n    hostReviews: meal.reviews.map(review => {\r\n      return {\r\n        user: {\r\n          _id: review.byUser._id,\r\n          fullName: review.byUser.fullName,\r\n          imgUrl: review.byUser.imgUrl,\r\n        },\r\n        date: review.at,\r\n        txt: review.txt,\r\n        rate: parseInt(review.rate),\r\n      };\r\n    }),\r\n    occurrences: setOccurrences(availableOccurrences, meal.price, meal.capacity, loggedInUser ? loggedInUser._id : 0),\r\n  };\r\n  detailsMeal.occurrences.sort(UtilitiesService.sortByDate);\r\n  detailsMeal.selectedOccurance = setSelectedOccurance(detailsMeal.occurrences);\r\n  detailsMeal.availableDates = setAvailableDates(detailsMeal.occurrences, detailsMeal.selectedOccurance);\r\n  detailsMeal.eventAttendees = getEventAttendees(detailsMeal.selectedOccurance);\r\n  detailsMeal.hostRating = setHostRating(detailsMeal.hostReviews);\r\n  return detailsMeal;\r\n}\r\n\r\nfunction setOccurrences(occurrences, price, capacity, userId) {\r\n  if (!occurrences) return null\r\n  return occurrences.map(occurrence => {\r\n    let totalReservations = 0;\r\n    return {\r\n      id: occurrence.id,\r\n      date: occurrence.date,\r\n      reservations: occurrence.attendees.map(attendee => {\r\n        totalReservations += parseInt(attendee.numOfAttendees);\r\n        return {\r\n          user: {\r\n            _id: attendee._id,\r\n            fullName: attendee.fullName,\r\n            imgUrl: attendee.imgUrl,\r\n          },\r\n          occurrenceAttendees: parseInt(attendee.numOfAttendees),\r\n          occurrenceTotalPrice: parseInt(attendee.numOfAttendees) * parseInt(price),\r\n          isLoggedInUser: userId === attendee._id ? true : false,\r\n        };\r\n      }),\r\n      totalReservations: totalReservations,\r\n      seatsLeft: parseInt(capacity) - totalReservations,\r\n    };\r\n  });\r\n}\r\n\r\nfunction setSelectedOccurance(occurrences, selectedDate = null) {\r\n  let selectedOccurance = null;\r\n  if (selectedDate) return occurrences.find(occurrence => new Date(occurrence.date).getTime() === new Date(selectedDate).getTime());\r\n  else {\r\n    selectedOccurance = occurrences.find(occurrence => {\r\n      let isLoggedIn = UtilitiesService.findAllByKey(occurrence, 'isLoggedInUser');\r\n      return isLoggedIn === true;\r\n    });\r\n    if (!selectedOccurance) {\r\n      selectedOccurance = occurrences.find(occurrence => occurrence.seatsLeft > 0);\r\n    }\r\n\r\n    if (!selectedOccurance && occurrences.length > 0) selectedOccurance = occurrences[0];\r\n\r\n    return selectedOccurance;\r\n  }\r\n}\r\n\r\nfunction setAvailableDates(occurrences, selectedOccurance) {\r\n  var result = [];\r\n  return occurrences.reduce((acc, occurrence) => {\r\n    if (!result.includes(occurrence.date)) {\r\n      result.push(occurrence.date);\r\n      let isSelected = selectedOccurance && occurrence.id === selectedOccurance.id;\r\n      acc.push({ date: occurrence.date, isSelected: isSelected });\r\n    }\r\n    return acc;\r\n  }, []);\r\n}\r\n\r\nfunction setHostRating(reviews) {\r\n  let totalRated = reviews ? reviews.length : 0;\r\n  let avgRate = 0;\r\n  if (totalRated > 0) {\r\n    avgRate = reviews.reduce((result, current) => result + parseInt(current.rate), 0) / totalRated;\r\n  }\r\n  return { totalRated: totalRated, avgRate: avgRate > 0 ? avgRate.toFixed(1) : 0 };\r\n}\r\n\r\nfunction getEventAttendees(occurrence) {\r\n  var result = [];\r\n  if (!occurrence) return result;\r\n  return occurrence.reservations.reduce((acc, reservation) => {\r\n    if (!result.includes(reservation.user._id)) {\r\n      result.push(reservation.user._id);\r\n      acc.push(reservation.user);\r\n    }\r\n    return acc;\r\n  }, []);\r\n}","import MealService from '../services/mealService';\r\nimport { getDisplayedMeal } from '../services/OccurranceUtils';\r\n\r\nexport default {\r\n    changeSelectedOccurrance,\r\n    updateMeal,\r\n    getMeal\r\n};\r\n\r\nexport function getMeal(id, loggedInUser) {\r\n    //loads the meal by id from the service\r\n    //stting the larger object \r\n    //storing it in the global state using the proper reducer\r\n    return async dispatch => {\r\n        const meal = await MealService.getById(id);\r\n        const displayedMeal = getDisplayedMeal(meal, loggedInUser)\r\n        dispatch({ type: 'LOAD_DISPLAYED_MEAL', displayedMeal });\r\n    };\r\n}\r\n\r\nexport function changeSelectedOccurrance(selectedOccurance) {\r\n    // meal.selectedOccurance = selectedOccurrence\r\n    return {\r\n        type: 'SET_SELECTED_OCCURRANCE',\r\n        selectedOccurance\r\n    }\r\n}\r\n\r\nexport function updateMeal(meal,loggedInUser) {\r\n    return async dispatch => {\r\n        const newStoreMeal = await MealService.update(meal);\r\n        const displayedMeal = getDisplayedMeal(newStoreMeal, loggedInUser)\r\n        dispatch({ type: 'LOAD_DISPLAYED_MEAL', displayedMeal });\r\n    };\r\n}","import React, { Component } from 'react';\r\n\r\nclass ImageGallery extends Component {\r\n  render() {\r\n    const { images } = this.props;\r\n\r\n    return (\r\n      <div className='gallery-container '>\r\n        <div className='gallery'>\r\n          <figure className='gallery-item'>\r\n            <img alt='' name='main' className='gallery-img' src={images[0]}></img>\r\n          </figure>\r\n          <figure className='gallery-item'>\r\n            <img alt='' name='one' className='gallery-img' src={images[1]}></img>\r\n          </figure>\r\n          <figure className='gallery-item'>\r\n            <img alt='' name='two' className='gallery-img' src={images[2]}></img>\r\n          </figure>\r\n          <figure className='gallery-item'>\r\n            <img alt='' name='three' className='gallery-img' src={images[3]}></img>\r\n          </figure>\r\n          {/* <figure className='gallery-item '>\r\n            <img alt='' name='four' className='gallery-img' src={images[4]}></img>\r\n          </figure> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nclass MealPageNav extends Component {\r\n  render() {\r\n    let { hostRating, eventSetup } = this.props;\r\n    return (\r\n      <div className='card-simple nav-container'>\r\n        <div className='top-box flex '>\r\n          <a className='btn' href='#menu'>\r\n            Menu\r\n          </a>\r\n          <a className='btn' href='#reviews'>\r\n            Reviews\r\n          </a>\r\n          <a className='btn' href='#location'>\r\n            Location\r\n          </a>\r\n        </div>\r\n        <div className='bottom-box flex flex-shrink-30'>\r\n          {hostRating.avgRate > 0 && (\r\n            <div className={hostRating.avgRate && hostRating.avgRate > 0 ? 'rate' : 'hide'}>\r\n              <i className='icon-small fas fa-star'></i>\r\n              <span>{hostRating.avgRate}</span>\r\n              <span>({hostRating.totalRated})</span>\r\n            </div>\r\n          )}\r\n\r\n          <div className='meal-period'>\r\n            <span>{eventSetup.startTime}</span> - <span>{eventSetup.endTime}</span>\r\n          </div>\r\n          <div>{eventSetup.mealType}</div>\r\n          <div>{eventSetup.cuisineType}</div>\r\n          <div className='meal-guests'>\r\n            <span>{eventSetup.capacity}</span>\r\n            <span> Guests </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\nconst mapDispatchToProps = {};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealPageNav);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Moment from 'moment';\r\n\r\nclass MealPayment extends Component {\r\n  state = { meal: [], selectedOccurance: {}, numOfAttendees: 0, totalPrice: 0, date: '', availableSeats: 0, availableText: '', registerCounter: 0, buttonText: '', paymentClass: 'hide', displayMsg: 'hide', msg: '' };\r\n\r\n  componentDidMount() {\r\n    let { meal } = this.props;\r\n    let userOccurrence = null;\r\n    if (meal.selectedOccurance && meal.selectedOccurance.reservations && meal.selectedOccurance.reservations.length > 0) {\r\n      userOccurrence = meal.selectedOccurance.reservations.find(reservation => reservation.isLoggedInUser);\r\n\r\n      this.setState({\r\n        meal: meal,\r\n        msg: userOccurrence && userOccurrence.isLoggedInUser ? meal.messages.userRegistered : '',\r\n        displayMsg: userOccurrence && userOccurrence.isLoggedInUser ? '' : 'hide',\r\n        selectedOccurance: meal.selectedOccurance,\r\n        numOfAttendees: userOccurrence && userOccurrence.isLoggedInUser ? userOccurrence.occurrenceAttendees : 0,\r\n        totalPrice: userOccurrence && userOccurrence.isLoggedInUser ? userOccurrence.occurrenceTotalPrice : 0,\r\n        date: Moment(meal.selectedOccurance.date).format('MM-DD-YY'),\r\n        availableSeats: parseInt(meal.selectedOccurance.seatsLeft),\r\n        availableText: `${meal.selectedOccurance.seatsLeft} available seats`,\r\n        registerCounter: 0,\r\n        buttonText: userOccurrence && userOccurrence.isLoggedInUser ? 'Update Event' : 'Register Event',\r\n        paymentClass: userOccurrence && userOccurrence.isLoggedInUser ? 'payment' : 'hide',\r\n      });\r\n    } else if (meal.selectedOccurance) {\r\n      this.setState({\r\n        meal: meal,\r\n        msg: '',\r\n        displayMsg: 'hide',\r\n        selectedOccurance: meal.selectedOccurance,\r\n        numOfAttendees: 0,\r\n        totalPrice: 0,\r\n        date: Moment(meal.selectedOccurance.date).format('MM-DD-YY'),\r\n        availableSeats: parseInt(meal.selectedOccurance.seatsLeft),\r\n        availableText: `${meal.selectedOccurance.seatsLeft} available seats`,\r\n        registerCounter: 0,\r\n        buttonText: 'Register Event',\r\n        paymentClass: 'hide',\r\n      });\r\n    } else {\r\n      this.setState({\r\n        meal: meal,\r\n        msg: '',\r\n        displayMsg: 'hide',\r\n        selectedOccurance: {},\r\n        numOfAttendees: 0,\r\n        totalPrice: 0,\r\n        date: Moment(new Date()).format('MM-DD-YY'),\r\n        availableSeats: 0,\r\n        availableText: `There are no available seats`,\r\n        registerCounter: 0,\r\n        buttonText: 'Event',\r\n        paymentClass: 'hide',\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChange = ev => {\r\n    ev.preventDefault();\r\n    let name = ev.target.name;\r\n    let value = ev.target.value;\r\n    if (name === 'numOfAttendees' && this.state.numOfAttendees !== value) {\r\n      this.setState({\r\n        numOfAttendees: parseInt(value),\r\n        totalPrice: parseInt(value) * parseInt(this.state.meal.price),\r\n        availableSeats: parseInt(this.state.availableSeats) - parseInt(value),\r\n        availableText: `${parseInt(this.state.availableSeats) - parseInt(value)} available seats`,\r\n      });\r\n    } else {\r\n      if (this.state.date !== value) {\r\n        let selectedOccurance = this.props.meal.occurrences.find(current => {\r\n          return Moment(current.date).format('MM-DD-YY') === value;\r\n        });\r\n\r\n        if (this.props.loggedInUser && selectedOccurance.reservations && selectedOccurance.reservations.length > 0) {\r\n          let userOccurrence = selectedOccurance.reservations.find(reservation => reservation.user._id === this.props.loggedInUser._id);\r\n          if (userOccurrence) userOccurrence.isLoggedInUser = true;\r\n        }\r\n\r\n        this.setState({\r\n          date: value,\r\n          selectedOccurance: selectedOccurance,\r\n          availableSeats: parseInt(selectedOccurance.seatsLeft) - parseInt(this.state.numOfAttendees),\r\n          availableText: `${parseInt(selectedOccurance.seatsLeft) - parseInt(this.state.numOfAttendees)} available seats`,\r\n          msg: '',\r\n          displayMsg: 'hide',\r\n        }, this.updateOccurrance);\r\n      }\r\n    }\r\n    //set the selectedOccurrence in the meal object to contain the actualy selected occurrance from this function!\r\n  };\r\n\r\n  updateOccurrance = () => {\r\n    this.props.onChangeDate(this.state.selectedOccurance)\r\n  }\r\n\r\n  onEventRegistration = ev => {\r\n    ev.preventDefault();\r\n    if (this.state.registerCounter === 0) {\r\n      this.setState({ registerCounter: 1, buttonText: 'Book Event', paymentClass: 'payment' });\r\n    } else if (this.state.registerCounter >= 1 && this.state.numOfAttendees !== 0) {\r\n      if (!this.props.loggedInUser) {\r\n        console.log('Meal Reservation - user not logged in');\r\n        this.setState({ msg: this.state.meal.messages.pleaseLogin, displayMsg: '' });\r\n        return;\r\n      }\r\n      this.props.onEventRegistration({ id: this.state.selectedOccurance.id, date: +Moment(this.state.date, 'MM-DD-YY'), numOfAttendees: this.state.numOfAttendees });\r\n      this.setState({ registerCounter: 0, msg: '', displayMsg: 'hide', buttonText: 'Book Event', paymentClass: 'hide' });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { meal } = this.props;\r\n    return (\r\n      <div className='card-simple card-bkg-yellow  payment-container'>\r\n        <div className='price'>\r\n          <span>$</span>\r\n          {meal.price}\r\n          <small>per guest</small>\r\n        </div>\r\n        <div></div>\r\n        <div className='details-container'>\r\n          <div className='msg'>\r\n            <span className={this.state.displayMsg}>{this.state.msg}</span>\r\n          </div>\r\n          <div className='date'>\r\n            <label htmlFor='date'>Date</label>\r\n            <select name='date' onChange={this.handleChange} value={this.state.date} style={{ fontFamily: 'raleway' }} className='minimal'>\r\n              {meal.availableDates.length > 0 ? meal.availableDates.map((current, idx) => {\r\n                return (\r\n                  <option key={idx} value={Moment(current.date).format('MM-DD-YY')}>\r\n                    {Moment(current.date).format('MM-DD-YY')}\r\n                  </option>\r\n                );\r\n              }) : <option key={1} value={'No Dates Available!'}></option>}\r\n            </select>\r\n          </div>\r\n          <div className='guests'>\r\n            <label htmlFor='numOfAttendees'>Number of Guests</label>\r\n            <input type='number' placeholder='Number of Guests' min='1' name='numOfAttendees' onChange={this.handleChange} value={this.state.numOfAttendees === 0 ? '' : this.state.numOfAttendees}></input>\r\n            <small className='small-text'>{}</small>\r\n          </div>\r\n          <div className={this.state.paymentClass}>\r\n            <ul className='clean-list'>\r\n              <li>\r\n                <span>\r\n                  ${meal.price} x {this.state.numOfAttendees}\r\n                </span>\r\n                <span>guests</span>\r\n              </li>\r\n              <li>\r\n                <span>Total</span>\r\n                <span>${this.state.totalPrice}</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <button onClick={this.onEventRegistration} className='button btn-red'>\r\n              {this.state.buttonText}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(MealPayment);\r\n","import React, { Component } from 'react';\r\n\r\nclass ShowHideText extends Component {\r\n  state = { text: '', showLink: 'hide', linkText: '' };\r\n  componentDidMount() {\r\n    let textLength = this.props.text.length;\r\n    if (Math.floor(textLength / 60) > this.props.showRows) {\r\n      let text = this.props.text.slice(0, 180);\r\n      this.setState({ text: `${text} ...`, showLink: '', linkText: 'show more' });\r\n    } else {\r\n      this.setState({ text: this.props.text });\r\n    }\r\n  }\r\n\r\n  toggleText = ev => {\r\n    ev.preventDefault();\r\n    if (this.state.linkText === 'show more') {\r\n      this.setState({ text: this.props.text, showLink: '', linkText: 'show less' });\r\n    } else {\r\n      let text = this.props.text.slice(0, 180);\r\n      this.setState({ text: `${text} ...`, showLink: '', linkText: 'show more' });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='show-hide-text-container'>\r\n        <h3>A word about the experience</h3>\r\n        <p>\r\n          {this.state.text}\r\n          <a className={this.state.showLink} href='#' onClick={this.toggleText}>\r\n            {this.state.linkText}\r\n          </a>\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShowHideText;\r\n","import React, { Component } from 'react';\r\n\r\nclass MealMenu extends Component {\r\n  render() {\r\n    const { menu } = this.props;\r\n    return (\r\n      <div className=' menu-main-container'>\r\n        <div className='card-simple card-bkg-white menu-container'>\r\n          <div className='main-title'>\r\n            <div className='decor'>\r\n              <svg xmlns='http://www.w3.org/2000/svg' width='41.125' height='9.146'>\r\n                <path fill='none' stroke='#f8b500' strokeMiterlimit='10' d='M40.881 8.576L20.562.591.244 8.576'></path>\r\n                <path fill='none' stroke='#f8b500' strokeMiterlimit='10' d='M40.881.591L20.562 8.576.243.591'></path>\r\n              </svg>\r\n            </div>\r\n            <h3 id='menu'>Menu</h3>\r\n            <div className='decor'>\r\n              <svg xmlns='http://www.w3.org/2000/svg' width='41.125' height='9.146'>\r\n                <path fill='none' stroke='#f8b500' strokeMiterlimit='10' d='M40.881 8.576L20.562.591.244 8.576'></path>\r\n                <path fill='none' stroke='#f8b500' strokeMiterlimit='10' d='M40.881.591L20.562 8.576.243.591'></path>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div className='menu-section'>\r\n            <h3>First Course</h3>\r\n\r\n            {menu.firstCourse.map((course, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {course}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='menu-section'>\r\n            <h3>Main Course</h3>\r\n            {menu.mainCourse.map((course, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {course}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='menu-section'>\r\n            <h3>Dessert</h3>\r\n            {menu.desserts.map((dessert, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {dessert}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='menu-section'>\r\n            <h3>Beverages</h3>\r\n            {menu.beverages.map((beverage, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {beverage}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealMenu;\r\n","import React, { Component } from 'react';\r\n\r\nclass AttendeesPreview extends Component {\r\n  render() {\r\n    const { attendee } = this.props;\r\n    return (\r\n      <div className='frame'>\r\n        <div className='card-simple-attendees center'>\r\n          <div className='profile'>\r\n            <div className='image'>\r\n              <div className='circle-1'></div>\r\n              <div className='circle-2'></div>\r\n              <img src={attendee.imgUrl} width='70' height='70' alt={attendee.fullName} />\r\n            </div>\r\n            <div className='name'>{attendee.fullName}</div>\r\n            <div className='address'>US, New-York</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AttendeesPreview;\r\n","import React, { Component } from 'react';\r\nimport AttendeesPreview from './AttendeesPreview';\r\n\r\nclass AttendeesList extends Component {\r\n\r\n  getAttendeeList() {\r\n    const { currOccurrance } = this.props;\r\n    const attendees = []\r\n    currOccurrance.reservations.forEach(occurrance => {\r\n      attendees.push(occurrance.user)\r\n    })\r\n    return attendees\r\n  }\r\n\r\n  render() {\r\n    // const { attendees } = this.props;\r\n    const attendees = this.getAttendeeList();\r\n    return (\r\n      <div className='main-attendees-container'>\r\n        {attendees &&\r\n          attendees.map((attendee, idx) => {\r\n            return <AttendeesPreview key={idx} attendee={attendee}></AttendeesPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default AttendeesList;\r\n","\r\n\r\nexport default {\r\n    addMsg\r\n}\r\n\r\nexport function addMsg(newMsg) {\r\n  \r\n  return async dispatch => {\r\n    // const msg = await MealService.query(newMsg);\r\n    const msg = newMsg\r\n    console.log('SocketAction -> msg',msg);\r\n      dispatch({ type: 'ADD_MSG', msg });\r\n    };\r\n  }\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addMsg } from '../actions/SocketAction';\r\n\r\nclass ReviewForm extends Component {\r\n  state = {\r\n    email: '',\r\n    txt: '',\r\n    rate: 0,\r\n    starClass: 'icon-medium color-gray far fa-star',\r\n    starSelected: 'icon-medium color-yellow fas fa-star',\r\n    msgs: '',\r\n  };\r\n  onSaveReviewForm = ev => {\r\n    ev.preventDefault();\r\n    this.props.onSaveReviewForm({ email: this.state.email, txt: this.state.txt, rate: this.state.rate });\r\n    this.setState({ email: '', txt: '', rate: 0, starClass: 'icon-medium color-gray far fa-star' });\r\n  };\r\n\r\n  onToggleStar = ev => {\r\n    ev.preventDefault();\r\n    let id = ev.target.id;\r\n    let newRate = id === '1' && this.state.rate === '1' ? '0' : id;\r\n    this.setState({ rate: newRate });\r\n  };\r\n\r\n  onHandleChange = ev => {\r\n    ev.preventDefault();\r\n    let name = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='flex '>\r\n        <div className='main-review-form-container flex column'>\r\n          {/* <i className='icon-medium color-gray fas fa-times' title='Close' onClick={this.props.onCloseReviewForm}></i> */}\r\n          <form className='review-form flex column align-center' onSubmit={this.onSaveReviewForm}>\r\n            <h3>How satisfied are you?</h3>\r\n            <div className='rating flex margin-bottom-20'>\r\n              {Array.from(Array(5), (_, idx) => {\r\n                return <i key={idx} id={idx + 1} className={idx < this.state.rate ? this.state.starSelected : this.state.starClass} name={idx + 1} onClick={this.onToggleStar}></i>;\r\n              })}\r\n            </div>\r\n            <h3>We would love to hear what you think</h3>\r\n            <div className='email'>\r\n              <input type='email' placeholder='Email' name='email' onChange={this.onHandleChange} required></input>\r\n            </div>\r\n            <div className='review'>\r\n              <textarea className='' id='review' name='txt' onChange={this.onHandleChange} min='5' placeholder='Tell us what you think'></textarea>\r\n            </div>\r\n            <div className='save flex justify-end'>\r\n              <button className='button btn-yellow'>SAVE</button>\r\n            </div>\r\n          </form>\r\n          <h4 className='review-h5'>Thank you for taking the time & reviewing us.</h4>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  msg: state.socket.msg,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  addMsg,\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewForm);\r\n","import React, { Component } from 'react';\r\nimport Moment from 'moment';\r\nimport SocketService from '../services/SocketService';\r\n\r\nclass ReviewPreview extends Component {\r\n\r\n\r\n  render() {\r\n    const { review } = this.props;\r\n    return (\r\n      <div className='review-container '>\r\n        {review && (\r\n          <blockquote>\r\n            <header>\r\n              <span data-rating={review.rate || 0}>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n              </span>\r\n              <strong>Event Name </strong>\r\n              <span>{Moment(review.date).format('MM-DD-YY')}</span>\r\n              <span>\r\n                By <em>{review.user.fullName}</em>\r\n              </span>\r\n              <span>Verified Review</span>\r\n            </header>\r\n            <p>{review.txt}</p>\r\n          </blockquote>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ReviewPreview;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ReviewPreview from './ReviewPreview';\r\n\r\nexport class ReviewList extends Component {\r\n  render() {\r\n    const { reviews } = this.props;\r\n    return (\r\n      <div className='main-reviews-container'>\r\n        {reviews &&\r\n          reviews.map((review, idx) => {\r\n            return <ReviewPreview key={idx} review={review}></ReviewPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewList);\r\n","import React, { Component } from 'react';\r\nimport { Map, Marker, GoogleApiWrapper } from 'google-maps-react';\r\n\r\nconst GOOGLE_API_KEY = 'AIzaSyDt708aK1FKYJTOT61i_xrzY9R3UD3_6Lw&&';\r\n\r\nconst mapContainerStyle = {\r\n  width: '60vw',\r\n  height: '45vh',\r\n  // zIndex: -1,\r\n};\r\n\r\nclass MealMap extends Component {\r\n\r\n  render() {\r\n    const location = { ...this.props.location };\r\n    delete location.address;\r\n    delete location.city;\r\n    delete location.country;\r\n    return (\r\n      <Map style={mapContainerStyle} google={this.props.google} initialCenter={location} zoom={14}>\r\n        <Marker name={'Current location'} />\r\n      </Map>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: GOOGLE_API_KEY,\r\n})(MealMap);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { add } from '../actions/MealActions';\r\nimport { getMeal, changeSelectedOccurrance, updateMeal } from '../actions/OccurrenceActions'\r\n\r\nimport ImageGallery from '../components/ImageGallery';\r\n\r\nimport MealPageNav from '../components/MealPageNav';\r\nimport MealPayment from '../components/MealPayment';\r\nimport ShowHideText from '../components/ShowHideText';\r\nimport MealMenu from '../components/MealMenu';\r\n\r\nimport AttendeesList from '../components/AttendeesList';\r\nimport ReviewForm from '../components/ReviewForm';\r\nimport ReviewList from '../components/ReviewList';\r\nimport SocketService from '../services/SocketService';\r\nimport MealMap from '../components/MealMap';\r\n\r\nclass MealDetails extends Component {\r\n  state = { displayReviewForm: 'hide', occurrenceAttendees: {} };\r\n\r\n\r\n  async componentDidMount() {\r\n    window.scrollTo(0,10)\r\n    const id = this.props.match.params.id;\r\n    await this.props.getMeal(id, this.props.loggedInUser)\r\n    const hostedId = this.props.displayedMeal.storeMeal.hostedBy._id;\r\n\r\n    this.signToSocketEvent(hostedId);\r\n\r\n    SocketService.emit('newChannel', `onEventRegistration${hostedId}`);\r\n    SocketService.on('addMsg', this.addMsg);\r\n  }\r\n\r\n  signToSocketEvent = hostedId => {\r\n    SocketService.setup();\r\n    SocketService.emit('newChannel', `onEventRegistration${hostedId}`);\r\n    SocketService.on('addMsg', this.addMsg);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    if (!this.props.loggedInUser) {\r\n      this.unSignToSocketEvent()\r\n    }\r\n  }\r\n\r\n  // componentWillUnmount() {\r\n  //   SocketService.off('addMsg', this.addMsg);\r\n  //   SocketService.terminate();\r\n  // } //\r\n\r\n  unSignToSocketEvent = () => {\r\n\r\n    SocketService.off('addMsg', this.addMsg);\r\n    SocketService.terminate();\r\n  }\r\n\r\n  onEventRegistration = async registration => {\r\n    if (this.props.loggedInUser) {\r\n      const { loggedInUser } = this.props;\r\n      let meal = { ...this.props.displayedMeal.storeMeal };\r\n      console.log('after spread', meal);\r\n\r\n      let selectedOccurance = meal.occurrences.find(current => current.id === registration.id);\r\n      if (!selectedOccurance) {\r\n        console.log(\"onEventRegistration: couldn't find selected occurrence\", registration);\r\n        return;\r\n      }\r\n\r\n      let userReservation = selectedOccurance.attendees.find(attendee => attendee._id === loggedInUser._id);\r\n\r\n      if (userReservation) {\r\n        userReservation.numOfAttendees = parseInt(userReservation.numOfAttendees) + parseInt(registration.numOfAttendees);\r\n      } else {\r\n        selectedOccurance.attendees = [...selectedOccurance.attendees, { _id: loggedInUser._id, fullName: loggedInUser.fullName, imgUrl: loggedInUser.imgUrl, numOfAttendees: registration.numOfAttendees }];\r\n      }\r\n      selectedOccurance.total = parseInt(selectedOccurance.total) + parseInt(registration.numOfAttendees);\r\n      await this.props.updateMeal(meal, this.props.loggedInUser);\r\n\r\n      loggedInUser.titleHost = meal.title;\r\n      SocketService.emit('newMsg', { meal, loggedInUser });\r\n    }\r\n  };\r\n\r\n  addMsg = newMsg => { };\r\n\r\n  onToggleReviewForm = ev => {\r\n    ev.preventDefault();\r\n    // if (this.props.loggedInUser)\r\n    this.setState({ displayReviewForm: this.state.displayReviewForm === 'hide' ? '' : 'hide' });\r\n  };\r\n\r\n  onSaveReviewForm = async review => {\r\n    if (this.props.loggedInUser) {\r\n      const { loggedInUser } = this.props;\r\n      let meal = { ...this.props.displayedMeal.storeMeal };\r\n      const newReview = {\r\n        byUser: { _id: loggedInUser._id, fullName: loggedInUser.fullName, imgUrl: loggedInUser.imgUrl },\r\n        txt: review.txt,\r\n        rate: review.rate,\r\n        at: Date.now(),\r\n      };\r\n\r\n      if (meal.reviews.length > 0) {\r\n        meal.reviews = [...meal.reviews, newReview];\r\n      } else {\r\n        meal.reviews = [newReview];\r\n      }\r\n\r\n      await this.props.updateMeal(meal, this.props.loggedInUser);\r\n    }\r\n    this.setState({ displayReviewForm: 'hide' });\r\n  };\r\n\r\n  onChangeDate = (occurrence) => {\r\n    this.props.changeSelectedOccurrance(occurrence)\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.displayedMeal) return <div className='border-loading-indicator col-2 row-1'></div>;\r\n    else {\r\n      const meal = this.props.displayedMeal;\r\n      return (\r\n        <div className='meal-details-page-container'>\r\n          {meal && (\r\n            <>\r\n              {meal.images && meal.images.length > 0 && <ImageGallery images={meal.images}></ImageGallery>}\r\n              <div className='container page-title'>\r\n                <h2>{meal.title}</h2>\r\n              </div>\r\n              <div className='container meal-details-container flex'>\r\n                <div className='left-box'>\r\n                  <MealPageNav eventSetup={meal.eventSetup} hostRating={meal.hostRating}></MealPageNav>\r\n                  <ShowHideText text={meal.description} showRows={3}></ShowHideText>\r\n                  <MealMenu menu={meal.eventMenu} />\r\n                  <h3>{meal.eventAttendees && meal.eventAttendees.length > 0 ? meal.messages.hasAttendees : ''}</h3>\r\n                  {meal.eventAttendees && meal.eventAttendees.length > 0 && <AttendeesList attendees={meal.eventAttendees} currOccurrance={meal.selectedOccurance}></AttendeesList>}\r\n                  {/* <div className='right-box '>\r\n                  <MealPayment meal={meal} onEventRegistration={this.onEventRegistration} onChangeDate={this.onChangeDate}></MealPayment>\r\n                </div> */}\r\n                  <div className='reviews-title-wrapper'>\r\n                    <h3 id='reviews'>Reviews</h3>\r\n                    <label title='Add a Review' onClick={this.onToggleReviewForm}>\r\n                      <i className='icon-large far fa-plus-square'></i>\r\n                    </label>\r\n                  </div>\r\n\r\n                  <div className={this.state.displayReviewForm}>\r\n                    <ReviewForm onSaveReviewForm={this.onSaveReviewForm}></ReviewForm>\r\n                  </div>\r\n                  {meal.hostReviews && <ReviewList reviews={meal.hostReviews}></ReviewList>}\r\n                  <div className='container google-map-container'>\r\n                    <h3 id='location'>Location</h3>\r\n                    <MealMap location={meal.location}></MealMap>\r\n                  </div>\r\n                </div>\r\n                <div className='right-box '>\r\n                  <MealPayment meal={meal} onEventRegistration={this.onEventRegistration} onChangeDate={this.onChangeDate}></MealPayment>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  displayedMeal: state.occurrance.displayedMeal\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getMeal,\r\n  add,\r\n  updateMeal,\r\n  changeSelectedOccurrance\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealDetails);\r\n","import React, { Component } from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport { withRouter } from 'react-router';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n// import TableDetailsHost from './TableDetailsHost'\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\nclass UserMealPreview extends Component {\r\n\r\n  componentDidMount() {\r\n    window.scrollTo(0,0)\r\n  }\r\n\r\n  onClickRow = (event, data) => {\r\n    event.stopPropagation();\r\n    this.props.history.push(`/meal/${this.props.meal._id}`);\r\n  };\r\n  onEditClick = (event) => {\r\n    event.stopPropagation();\r\n\r\n    this.props.history.push(`/meal/edit/${this.props.meal._id}`)\r\n  }\r\n\r\n  onDelete = (event) => {\r\n    event.stopPropagation();\r\n\r\n    const { id } = this.props.match.params;\r\n    const userId = id\r\n    const mealId = this.props.meal._id\r\n    const occurensId = this.props.meal.occurensId\r\n\r\n    this.props.onDelete(userId, mealId, occurensId)\r\n  }\r\n\r\n  render() {\r\n    const occurrences = this.props.meal.occurrences\r\n\r\n    if (this.props.meal.isHosted) {\r\n      return (<React.Fragment>\r\n        {occurrences && occurrences.map((occurrence, idx) => {\r\n\r\n          const date = new Date(occurrence.date).toLocaleDateString()\r\n          return <div key={\"KeyOccurrences\" + idx} className=\"tab-content \">\r\n            <div className=\"flex  justify-center\">\r\n              {idx === 0 && <span> <EditIcon className=\" cursor\" onClick={this.onEditClick}></EditIcon> </span>}\r\n            </div>\r\n            <div>\r\n              <ul className=\"host-list flex space-around clean-list\">\r\n                <li><span>Date: </span><p>{date}</p></li>\r\n                <li><span>Total Guests:</span><p> {this.props.meal.capacity}</p></li>\r\n                <li><span>Registered Guests:</span> <p>{occurrence.total}</p></li>\r\n                <li><span>Revenue:</span> <p>{occurrence.total * this.props.meal.price} </p></li>\r\n                <li><span>Commission:</span> <p> {(occurrence.total * this.props.meal.price) * 0.1}</p></li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        })}\r\n      </React.Fragment>)\r\n    } else {\r\n      const date = new Date(this.props.meal.date).toLocaleDateString()\r\n      return (!this.props.meal.isHosted && <React.Fragment>\r\n        <div className=\"tab-content cursor \" onClick={this.onClickRow} title=\"Click me to see event\">\r\n          <ul className=\"guest-list clean-list\">\r\n            <ul className=\"clean-list flex space-between  \">\r\n              <li><span>Hosted By:</span> <span>{this.props.meal.hostedBy.fullName}</span></li>\r\n              <li><span>Date: </span><span>{date}</span></li>\r\n              <li><span onClick={this.onDelete} title=\"delete me from event\"></span></li>\r\n            </ul>\r\n            <ul className=\"clean-list flex justify-start\">\r\n              <li><span>Location: </span> <span>{this.props.meal.location.address}</span></li>\r\n            </ul>\r\n            <ul className=\"clean-list flex align-start space-between\">\r\n              <li><span>Cuisine: </span> <span>{this.props.meal.cuisineType}</span></li>\r\n              <li><span>Meal: </span> <span>{this.props.meal.mealType}</span></li>\r\n              <li><span>My Guests:</span> <span>{this.props.meal.total}</span></li>\r\n              <li><span>Total Price: </span> <span>${this.props.meal.price * this.props.meal.total} </span><small>(${this.props.meal.price} per guest)</small></li>\r\n            </ul>\r\n          </ul>\r\n        </div>\r\n      </React.Fragment>)\r\n    }\r\n  }\r\n}\r\nexport default withRouter(UserMealPreview);\r\n\r\n","import React from 'react';\r\n\r\nimport UserMealPreview from './UserMealPreview'\r\n\r\nexport default function UserMealList({ meals, userId ,onDelete}) {\r\n    \r\n    return <div className=\"row \">\r\n                <div className=\"col container \">\r\n                    {meals && meals.map((meal, idx) => {\r\n                        return <div key={idx}>\r\n\r\n                            <div className=\"preview-title \"> <span>{meal.isHosted? 'I Am Hosting': 'I Am A Guest'} </span></div>\r\n                            <div className=\"tabs-container \">\r\n                                <div className=\"tab\">\r\n                                    <input className= \"checkbox-arrow\" type=\"checkbox\" id={`chck${idx}`} />\r\n                                    <label className=\"tab-label\" htmlFor={`chck${idx}`} >{meal.title}</label>\r\n                                    <UserMealPreview  onDelete={onDelete} meal={meal} userId={userId} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n\r\n}\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport SocketService from '../services/SocketService';\r\nimport { getById, loadUserMeal, load, add } from '../actions/MealActions';\r\nimport { setFilter } from '../actions/FilterActions';\r\nimport UserMealList from '../components/UserMealList';\r\n\r\nclass UserDetails extends Component {\r\n\r\n  async componentDidMount() {\r\n\r\n  window.scrollTo(0,10)\r\n    \r\n    this.resetFilterDefinitions();\r\n  }\r\n\r\n  resetFilterDefinitions = async () => {\r\n    await this.props.setFilter({\r\n      userId: this.props.match.params.id,\r\n      at: '',\r\n      type: '',\r\n      location: {\r\n        city: '',\r\n        country: '',\r\n      },\r\n      tags: '',\r\n    });\r\n    this.loadMeals();\r\n  };\r\n\r\n  loadMeals = () => {\r\n    this.props.loadUserMeal(this.props.filter);\r\n  };\r\n\r\n  onCreateMeal = () => {\r\n    this.props.history.push('/meal/edit');\r\n  };\r\n\r\n  mealsToShow = async () => {\r\n    const { id } = this.props.match.params;\r\n    const attended = [];\r\n    const host = [];\r\n\r\n    let meals = [];\r\n    meals = [...this.props.userMeals];\r\n    await meals.forEach(async meal => {\r\n      if (meal.hostedBy._id === id) {\r\n        await host.push(meal);\r\n      } else {\r\n        await attended.push(meal);\r\n      }\r\n    });\r\n    return { host, attended };\r\n  };\r\n\r\n  onDelete = async (userId, mealId, occurenceId) => {\r\n    await this.props.getById(mealId);\r\n    const meal = { ...this.props.meal };\r\n    const occurrence = meal.occurrences.find(occurrence => {\r\n      return occurrence.id === occurenceId;\r\n    });\r\n    const idx = occurrence.attendees.findIndex(attendee => {\r\n      return attendee._id === userId;\r\n    });\r\n    \r\n    occurrence.attendees.splice(idx, 1);\r\n    await this.props.add(meal);\r\n    this.loadMeals();\r\n  };\r\n\r\n  render() {\r\n    \r\n    const user = this.props.loggedInUser;\r\n    if (!user) return null\r\n    return (\r\n      user && (\r\n        <div className='container user-details-container '>\r\n          <div className=' user-container'>\r\n            <span>Hello, </span>\r\n            <span>{user.fullName}</span>\r\n          </div>\r\n          <div className='controlls-container flex space-between '>\r\n            <div className='flex-shrink-50'>\r\n              <span>Events </span>\r\n            </div>\r\n            <div className='flex-shrink-50 flex justify-end'>\r\n              <button className='btn-sm-md btn-action align-end ' onClick={this.onCreateMeal}>\r\n                Create Event\r\n              </button>\r\n            </div>\r\n            \r\n          </div>\r\n          {this.props.userMeals.length > 0 && <UserMealList  onDelete={this.onDelete} meals={this.props.userMeals} userId={user._id}></UserMealList>}\r\n        </div>\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userMeals: state.meal.userMeals,\r\n  meals: state.meal.meals,\r\n  filter: state.filter.filter,\r\n  meal: state.meal.selectedMeal,\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  loadUserMeal,\r\n  setFilter,\r\n  add,\r\n  load,\r\n  getById,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDetails);\r\n","import axios from 'axios'\r\n\r\nexport default { uploadImages, getLatLngFromAddress }\r\n\r\nfunction _uploadImg(file) {\r\n    const CLOUD_NAME = 'due4sgv19'\r\n    const PRESET_NAME = 'ldwisjpq'\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', PRESET_NAME);\r\n    return fetch(UPLOAD_URL, {\r\n        method: 'POST',\r\n        body: formData\r\n    })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            return res\r\n        })\r\n        .catch(err => console.error(err))\r\n}\r\n\r\nasync function uploadImages(files) {\r\n    const urls = []\r\n    for (let i = 0; i < files.length; i++) {\r\n        const res = await _uploadImg(files[i]);\r\n        urls.push(res.url);\r\n    }\r\n    return urls\r\n}\r\n\r\nfunction getLatLngFromAddress(address) {\r\n    let regex = / /g;\r\n    address = address.replace(regex, '+');\r\n    //sends an HTTP request to google maps API with the given address string to get lat and lng\r\n    return axios.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${address}&key=AIzaSyAlRYsJRB1drgRGQVcSCbwcWhRpcaM7Z08`)\r\n        .then(res => {\r\n            let address = {\r\n                lat: res.data.results[0].geometry.location.lat,\r\n                lng: res.data.results[0].geometry.location.lng,\r\n                address: res.data.results[0].formatted_address\r\n            }\r\n            return address;\r\n        });\r\n}","import React, { Component } from 'react';\r\n\r\nclass ImageUpload extends Component {\r\n  state = { files: [], displayed: [], drag: false, msgState: 'Drop Here', fileArray: [] };\r\n\r\n  fileObj = [];\r\n  // fileArray = [];\r\n\r\n  dropRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    //on edit mode - images received in props shall be stored inside local state variable - files and then previewed \r\n    let div = this.dropRef.current;\r\n    div.addEventListener('dragenter', this.handleDragIn);\r\n    div.addEventListener('dragleave', this.handleDragOut);\r\n    div.addEventListener('dragover', this.handleDrag);\r\n    div.addEventListener('drop', this.handleDrop);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    let div = this.dropRef.current;\r\n    div.removeEventListener('dragenter', this.handleDragIn);\r\n    div.removeEventListener('dragleave', this.handleDragOut);\r\n    div.removeEventListener('dragover', this.handleDrag);\r\n    div.removeEventListener('drop', this.handleDrop);\r\n    //TODO - free memory return () => URL.revokeObjectURL(objectUrl)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.files !== this.props.files) {\r\n      // this.fileArray = [...this.props.files]\r\n      this.setState({ fileArray: [...this.props.files] })\r\n    }\r\n  }\r\n\r\n  handleDrag = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n  };\r\n\r\n  handleDragIn = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.dragCounter++;\r\n    if (ev.dataTransfer.files && ev.dataTransfer.files.length > 0) {\r\n      this.setState({ drag: true });\r\n    }\r\n  };\r\n\r\n  handleDragOut = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.dragCounter--;\r\n    if (this.dragCounter === 0) {\r\n      this.setState({ drag: false });\r\n    }\r\n  };\r\n\r\n  handleDrop = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.setState({ drag: false });\r\n    if (ev.dataTransfer.files && ev.dataTransfer.files.length > 0) {\r\n      this.setPreviewImages(ev.dataTransfer.files);\r\n      this.props.handleImageUpload(ev.dataTransfer.files);\r\n\r\n      ev.dataTransfer.clearData();\r\n      this.dragCounter = 0;\r\n    }\r\n  };\r\n\r\n  checkExistingImages = (ev) => {\r\n    if (this.state.fileArray.length > 0) {\r\n      this.props.handleImageUpload(ev.target.files)\r\n      return true;\r\n    }\r\n    return false\r\n  }\r\n\r\n  handleChange = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (!this.checkExistingImages(ev)) {\r\n      this.setPreviewImages(ev.target.files);\r\n      this.props.handleImageUpload(ev.target.files);\r\n    }\r\n  };\r\n\r\n  setPreviewImages = files => {\r\n    const { fileArray } = this.state\r\n    this.fileObj.push(files);\r\n    for (let i = 0; i < this.fileObj[0].length; i++) {\r\n      fileArray.push(URL.createObjectURL(this.fileObj[0][i]));\r\n      // URL.revokeObjectURL(this.fileObj[0][i]);\r\n    }\r\n    this.setState({ files: fileArray });\r\n    this.setState({ fileArray })\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='upload-container' ref={this.dropRef}>\r\n        <div className='left-box'>\r\n          <div className='dropzone-wrapper'>\r\n            <div className='dropzone-desc'>\r\n              <i className='glyphicon glyphicon-download-alt'></i>\r\n              <p>Choose an image file or drag it here.</p>\r\n            </div>\r\n            <input type='file' id='file-upload' name='img_logo' className='dropzone' multiple accept='image/*' onChange={this.handleChange} />\r\n          </div>\r\n        </div>\r\n        <div className='right-box'>\r\n          <div className='preview-zone hidden'>\r\n            <div className='box box-solid'>\r\n              <div className='box-header with-border'>\r\n              </div>\r\n              <div className='box-body'>\r\n                {(this.state.fileArray || []).map((url, idx) => (\r\n                  <div key={idx}>\r\n                    <img src={url} className='preview-image' alt='...' />\r\n                    <i className='far fa-times-circle icon-large' onClick={(event) => this.props.onImgRemoval(event, url, idx)}></i>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageUpload;\r\n\r\n/*\r\n\r\n htmlFor='file-upload'\r\n\r\n\r\n\r\n\r\nfunction uploadFile(file, i) {\r\n  var url = 'https://api.cloudinary.com/v1_1/joezimim007/image/upload'\r\n  var xhr = new XMLHttpRequest()\r\n  var formData = new FormData()\r\n  xhr.open('POST', url, true)\r\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\r\n\r\n  // Update progress (can be used to show progress indicator)\r\n  xhr.upload.addEventListener(\"progress\", function(e) {\r\n    updateProgress(i, (e.loaded * 100.0 / e.total) || 100)\r\n  })\r\n\r\n  xhr.addEventListener('readystatechange', function(e) {\r\n    if (xhr.readyState == 4 && xhr.status == 200) {\r\n      updateProgress(i, 100) // <- Add this\r\n    }\r\n    else if (xhr.readyState == 4 && xhr.status != 200) {\r\n      // Error. Inform the user\r\n    }\r\n  })\r\n\r\n  formData.append('upload_preset', 'ujpu6gyk')\r\n  formData.append('file', file)\r\n  xhr.send(formData)\r\n}\r\n\r\n\r\n<i class=\"far fa-window-close\"></i>\r\n\r\n\r\n\r\n\r\n\r\n6:30\r\nicon-medium\r\n\r\n\r\n*/\r\n","import React, { Component } from 'react';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nexport default class CheckboxLabels extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <FormGroup row>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={this.props.isPromoted}\r\n                            onClick={this.props.handleChange}\r\n                            value=\"checked\"\r\n                            color=\"primary\"\r\n                            name=\"isPromoted\"\r\n                        />\r\n                    }\r\n                    label={this.props.label}\r\n                />\r\n            </FormGroup>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport cloudService from '../services/ExternalService';\r\nimport { connect } from 'react-redux';\r\n\r\nimport ImageUpload from './ImageUpload';\r\nimport PromotionCheckbox from './PromotionCheckbox';\r\n\r\nvar id = 1;\r\nconst MAX_FILE_SIZE = 5000000; //max size is 5MB\r\nexport class MealForm extends Component {\r\n  state = {\r\n    _id: '',\r\n    hostedBy: { _id: 0, fullName: '', imgUrl: '' },\r\n    title: '',\r\n    description: '',\r\n    firstCourse: [],\r\n    mainCourse: [],\r\n    desserts: [],\r\n    beverages: [],\r\n    cuisineType: '',\r\n    mealType: '',\r\n    price: 0,\r\n    occurrences: [],\r\n    capacity: 0,\r\n    address: '',\r\n    city: '',\r\n    country: '',\r\n    lat: '',\r\n    lng: '',\r\n    imgUrls: [],\r\n    firstCourseTmp: '',\r\n    mainCourseTmp: '',\r\n    dessertTmp: '',\r\n    drinkTmp: '',\r\n    reviews: [],\r\n    currency: 'USD',\r\n    tags: [], //shall include all tags from user\r\n    isActive: true,\r\n    isPromoted: false,\r\n    isBtnEnabled: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (!this.props.meal) {\r\n      //create mode:\r\n      this.setState({ hostedBy: { _id: this.props.loggedInUser._id, fullName: this.props.loggedInUser.fullName, imgUrl: this.props.loggedInUser.imgUrl } });\r\n    } else {\r\n      const meal = this.props.meal;\r\n      this.setState({\r\n        hostedBy: { ...meal.hostedBy },\r\n        _id: meal._id,\r\n        isActive: meal.isActive,\r\n        isPromoted: meal.isPromoted,\r\n        tags: [...meal.tags],\r\n        title: meal.title,\r\n        description: meal.description,\r\n        firstCourse: [...meal.menu.firstCourse],\r\n        mainCourse: [...meal.menu.mainCourse],\r\n        desserts: [...meal.menu.desserts],\r\n        beverages: [...meal.menu.beverages],\r\n        cuisineType: meal.cuisineType,\r\n        mealType: meal.mealType,\r\n        price: meal.price,\r\n        capacity: meal.capacity,\r\n        occurrences: [...meal.occurrences],\r\n        address: meal.location.address,\r\n        city: meal.location.city,\r\n        country: meal.location.country,\r\n        lat: meal.location.lat,\r\n        lng: meal.location.lng,\r\n        reviews: [...meal.reviews],\r\n        imgUrls: [...meal.imgUrls],\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (JSON.stringify(prevProps.meal) !== JSON.stringify(this.props.meal) && this.props.meal) {\r\n      //edit mode:\r\n      const meal = this.props.meal;\r\n      this.setState({\r\n        hostedBy: { ...meal.hostedBy },\r\n        _id: meal._id,\r\n        isActive: meal.isActive,\r\n        isPromoted: meal.isPromoted,\r\n        tags: [...meal.tags],\r\n        title: meal.title,\r\n        description: meal.description,\r\n        firstCourse: [...meal.menu.firstCourse],\r\n        mainCourse: [...meal.menu.mainCourse],\r\n        desserts: [...meal.menu.desserts],\r\n        beverages: [...meal.menu.beverages],\r\n        cuisineType: meal.cuisineType,\r\n        mealType: meal.mealType,\r\n        price: meal.price,\r\n        capacity: meal.capacity,\r\n        occurrences: [...meal.occurrences],\r\n        address: meal.location.address,\r\n        city: meal.location.city,\r\n        country: meal.location.country,\r\n        lat: meal.location.lat,\r\n        lng: meal.location.lng,\r\n        reviews: [...meal.reviews],\r\n        imgUrls: [...meal.imgUrls],\r\n      });\r\n    }\r\n  }\r\n\r\n  handleImageUpload = async files => {\r\n    for (let i = 0; i < files.length; i++) {\r\n      if (files[i].size > MAX_FILE_SIZE) {\r\n        return;\r\n      } else if (!files[i].type.includes('jpeg') && !files[i].type.includes('jpg') && !files[i].type.includes('png')) {\r\n        return;\r\n      }\r\n    }\r\n    this.setState({ isBtnEnabled: false });\r\n    let imgUrls = await cloudService.uploadImages(files);\r\n    let prevImgUrls = this.state.imgUrls;\r\n    const newImgUrls = prevImgUrls.concat(imgUrls);\r\n    this.setState({ imgUrls: newImgUrls }, this.enableBtn);\r\n  };\r\n\r\n  enableBtn = () => {\r\n    this.setState({ isBtnEnabled: true });\r\n  };\r\n\r\n  onHandleChange = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    if (field === 'isPromoted') {\r\n      value = !this.state.isPromoted;\r\n    }\r\n    this.setState({ [field]: value });\r\n  };\r\n\r\n  onHandleDateAdd = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let date = ev.target.value;\r\n    // this.setState({ [field]: value });\r\n    if (date !== '') {\r\n      id += 1;\r\n      const occurrences = {\r\n        id: id,\r\n        date: Date.parse(date),\r\n        attendees: [],\r\n        total: 0\r\n      };\r\n      this.setState(prevState => ({\r\n        occurrences: [...prevState.occurrences, occurrences],\r\n      }));\r\n    }\r\n  };\r\n\r\n  onHandleAddMenuItem = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    let tmpFieldName = '';\r\n    switch (field) {\r\n      case 'firstCourse':\r\n        tmpFieldName = 'firstCourseTmp';\r\n        break;\r\n      case 'mainCourse':\r\n        tmpFieldName = 'mainCourseTmp';\r\n        break;\r\n      case 'desserts':\r\n        tmpFieldName = 'dessertTmp';\r\n        break;\r\n      default:\r\n        tmpFieldName = 'drinkTmp';\r\n        break;\r\n    }\r\n    if (value) this.setState({ [tmpFieldName]: value });\r\n  };\r\n\r\n  setTags = () => {\r\n    let newTags = [];\r\n    newTags.push(this.state.cuisineType);\r\n    newTags.push(this.state.mealType);\r\n    newTags.push(this.state.title);\r\n    newTags.push(this.state.price);\r\n    newTags.push(this.state.city);\r\n    newTags.push(this.state.country);\r\n    newTags.push(this.state.address);\r\n    newTags.push(this.state.hostedBy.fullName);\r\n    newTags.push(this.state.description);\r\n    newTags = newTags.concat(this.state.firstCourse);\r\n    newTags = newTags.concat(this.state.mainCourse);\r\n    newTags = newTags.concat(this.state.desserts);\r\n    newTags = newTags.concat(this.state.beverages);\r\n    this.state.occurrences.forEach(occurrence => {\r\n      const dateToRender = new Date(occurrence.date).toLocaleDateString();\r\n      newTags.push(dateToRender);\r\n    });\r\n    this.setState({ tags: newTags });\r\n  };\r\n\r\n  isFormComplete = () => {\r\n    const status = this.state\r\n    return (status.address && status.country && status.city && status.cuisineType && status.mealType && status.title && status.price && status.description && status.firstCourse && status.mainCourse && status.desserts && status.beverages && status.capacity && status.imgUrls)\r\n  }\r\n\r\n  onSaveMeal = async ev => {\r\n    ev.preventDefault();\r\n    if (this.isFormComplete()) {\r\n      const newAddress = await cloudService.getLatLngFromAddress(this.state.address + ', ' + this.state.city + ', ' + this.state.country);\r\n      this.setTags();\r\n      let meal = {\r\n        _id: this.state._id,\r\n        isActive: true,\r\n        isPromoted: this.state.isPromoted,\r\n        hostedBy: this.state.hostedBy,\r\n        menu: {\r\n          firstCourse: this.state.firstCourse,\r\n          mainCourse: this.state.mainCourse,\r\n          desserts: this.state.desserts,\r\n          beverages: this.state.beverages,\r\n        },\r\n        location: {\r\n          city: this.state.city,\r\n          country: this.state.country,\r\n          address: this.state.address,\r\n          lat: newAddress.lat,\r\n          lng: newAddress.lng,\r\n        },\r\n        imgUrls: this.state.imgUrls,\r\n        title: this.state.title,\r\n        description: this.state.description,\r\n        cuisineType: this.state.cuisineType,\r\n        mealType: this.state.mealType,\r\n        price: this.state.price,\r\n        occurrences: this.state.occurrences,\r\n        capacity: this.state.capacity,\r\n        reviews: this.state.reviews,\r\n        currency: this.state.currency,\r\n        tags: this.state.tags,\r\n      };\r\n      if (!this.props.meal) {\r\n        //create mode\r\n        delete meal._id;\r\n      }\r\n      this.props.onSaveMeal(meal);\r\n    }\r\n  };\r\n\r\n  handleDateRemoval = (occurrences, occurrenceIdx) => {\r\n    //removes a chosen event date occurrence by the host\r\n    const newOccurrences = [...occurrences];\r\n    newOccurrences.splice(occurrenceIdx, 1);\r\n    this.setState({ ...this.state, occurrences: newOccurrences });\r\n  };\r\n\r\n  handleMenuItemRemoval = (ev, list, idx) => {\r\n    let field;\r\n    switch (ev.target.nodeName) {\r\n      case 'I':\r\n        field = ev.target.classList[0];\r\n        break;\r\n      default:\r\n        field = ev.target.name;\r\n    }\r\n    const newList = [...list];\r\n    newList.splice(idx, 1);\r\n    this.setState({ [field]: newList });\r\n  };\r\n\r\n  onAddMenuItem = event => {\r\n    event.preventDefault();\r\n    let field;\r\n    switch (event.target.nodeName) {\r\n      case 'I':\r\n        field = event.target.parentNode.name;\r\n        break;\r\n      default:\r\n        field = event.target.name;\r\n    }\r\n    let value;\r\n    switch (field) {\r\n      case 'firstCourse':\r\n        value = this.state.firstCourseTmp;\r\n        this.setState({ firstCourseTmp: '' });\r\n        break;\r\n      case 'mainCourse':\r\n        value = this.state.mainCourseTmp;\r\n        this.setState({ mainCourseTmp: '' });\r\n        break;\r\n      case 'desserts':\r\n        value = this.state.dessertTmp;\r\n        this.setState({ dessertTmp: '' });\r\n        break;\r\n      default:\r\n        value = this.state.drinkTmp;\r\n        this.setState({ drinkTmp: '' });\r\n    }\r\n    if (value) {\r\n      let course = this.state[field];\r\n      let newCourse = [...course];\r\n      newCourse.push(value);\r\n      this.setState({ [field]: newCourse });\r\n    }\r\n  };\r\n\r\n  onImgRemoval = (event, url, idx) => {\r\n    let newImgUrls = [...this.state.imgUrls];\r\n    newImgUrls.splice(idx, 1);\r\n    this.setState({ imgUrls: newImgUrls });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form className='' onSubmit={this.onSaveMeal}>\r\n          <div className='image-container'>\r\n            <h4>Images</h4>\r\n            <ImageUpload onImgRemoval={this.onImgRemoval} handleImageUpload={this.handleImageUpload} files={this.state.imgUrls}></ImageUpload>\r\n          </div>\r\n          <div className='event-info-container'>\r\n            <h4>Details</h4>\r\n            <div className='card-bottom-border flex column'>\r\n              <div className='title'>\r\n                <label htmlFor='title'>Title</label>\r\n                <input type='text' placeholder='Event Name' id='title' name='title' value={this.state.title} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='description'>\r\n                <label htmlFor='description'>Description</label>\r\n                <textarea id='description' name='description' value={this.state.description} placeholder='Description' onChange={this.onHandleChange} className='textarea-form' required></textarea>\r\n              </div>\r\n              <div className='cuisineType'>\r\n                <label htmlFor='cuisineType'>Cuisine</label>\r\n                <input type='text' placeholder='Cuisine' name='cuisineType' id='cuisineType' value={this.state.cuisineType} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='mealType'>\r\n                <label htmlFor='mealType'>Meal</label>\r\n                <input type='text' placeholder='Dinner | Lunch | Breakfest' name='mealType' id='mealType' value={this.state.mealType} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='flex row flex space-between'>\r\n                <div className='address flex-basis-1 margin-right-10'>\r\n                  <label htmlFor='address'>Address</label>\r\n                  <input type='text' placeholder='Address' name='address' id='address' value={this.state.address} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='state flex-basis-1 margin-right-10'>\r\n                  <label htmlFor='state'>Country</label>\r\n                  <input type='text' placeholder='State' name='country' id='country' value={this.state.country} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='city flex-basis-1'>\r\n                  <label htmlFor='city'>City</label>\r\n                  <input type='text' placeholder='City' name='city' id='city' value={this.state.city} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n              </div>\r\n              <div className='price-capacity flex'>\r\n                <div className='price flex-basis-1 margin-right-20'>\r\n                  <label htmlFor='price'>Price</label>\r\n                  <input type='text' placeholder='Price' id='price' name='price' value={this.state.price} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='capacity flex-basis-1'>\r\n                  <label htmlFor='capacity'>How many people</label>\r\n                  <input type='number' placeholder='Capacity' id='capacity' name='capacity' value={this.state.capacity} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n              </div>\r\n              <div className='flex row flex space-even'>\r\n                <div className='date flex-basis-1 margin-right-20'>\r\n                  <div className='flex align-center'>\r\n                    <div className='flex column margin-right-20 width-50'>\r\n                      <label htmlFor='date'>Date</label>\r\n                      <input className='input-date' type='date' name='date' placeholder='Date' id='date' onChange={this.onHandleDateAdd} value={this.state.occurences} className='input-date'></input>\r\n                    </div>\r\n                    <div className='promotion flex-basis-1'>\r\n                      <PromotionCheckbox label={'Would you like to promote your event?'} handleChange={this.onHandleChange} isPromoted={this.state.isPromoted}></PromotionCheckbox>\r\n                    </div>\r\n                  </div>\r\n                  <div className='width-50'>\r\n                    {this.state.occurrences && (\r\n                      <div>\r\n                        <ul className='clean-list occurrence-list'>\r\n                          {' '}\r\n                          {this.state.occurrences.map((occurrence, idx) => {\r\n                            const dateToRender = new Date(occurrence.date).toLocaleDateString();\r\n                            return (\r\n                              <li className='occurrence-date' key={idx}>\r\n                                {dateToRender}\r\n                                <span>\r\n                                  <i className='far fa-times-circle icon-small' onClick={() => this.handleDateRemoval(this.state.occurrences, idx)}></i>\r\n                                </span>\r\n                              </li>\r\n                            );\r\n                          })}\r\n                        </ul>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='event-menu-container'>\r\n            <h4>Menu</h4>\r\n            <div className='card-bottom-border menu-main-container flex column align-center justify-center'>\r\n              <div className='menu-container'>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>First Course</h3>\r\n                  <div className='course-title-wrapper flex justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='First course dish' name='firstCourse' value={this.state.firstCourseTmp} className='input-form' onChange={this.onHandleAddMenuItem} required></input>\r\n                      {/* {this.state.occurrences && <div ><ul className=\"clean-list \"> {this.state.occurrences.map((occurrence, idx) => <li>{occurrence.date}<i className=\"icon-small fas fa-minus\" onClick={() => this.handleOccurenceRemoval(this.state.occurrences, idx)}></i></li>)}</ul></div>} */}\r\n                      {this.state.firstCourse && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.firstCourse.map((course, idx) => (\r\n                              <li className='menu-list-courses' name='firstCourse' key={idx}>\r\n                                {course}\r\n                                <i className='firstCourse far fa-times-circle icon-small' name='firstCourse' onClick={ev => this.handleMenuItemRemoval(ev, this.state.firstCourse, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='firstCourse' className='' title='Add new menu item' href='#' onClick={this.onAddMenuItem} required>\r\n                      <i name='firstCourse' className='icon-larger fas fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Main Course</h3>\r\n                  <div className='course-title-wrapper flex justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Main course dish' name='mainCourse' value={this.state.mainCourseTmp} className='input-form' onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.mainCourse && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.mainCourse.map((course, idx) => (\r\n                              <li className='menu-list-courses' name='mainCourse' key={idx}>\r\n                                {course}\r\n                                <i className='mainCourse far fa-times-circle icon-small' name='mainCourse' onClick={ev => this.handleMenuItemRemoval(ev, this.state.mainCourse, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='mainCourse' className='' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='mainCourse' className='icon-larger fas fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Dessert</h3>\r\n                  <div className='course-title-wrapper flex justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Dessert' name='desserts' className='input-form' value={this.state.dessertTmp} onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.desserts && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.desserts.map((course, idx) => (\r\n                              <li className='menu-list-courses' name='desserts' key={idx}>\r\n                                {course}\r\n                                <i className='desserts far fa-times-circle icon-small' name='desserts' onClick={ev => this.handleMenuItemRemoval(ev, this.state.desserts, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='desserts' className='' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='desserts' className='icon-larger fas fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Beverage</h3>\r\n                  <div className='course-title-wrapper flex justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Beverage' name='beverages' className='input-form' value={this.state.drinkTmp} onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.beverages && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {this.state.beverages.map((course, idx) => (\r\n                              <li className='menu-list-courses' name='beverages' key={idx}>\r\n                                {course}\r\n                                <i className='beverages far fa-times-circle icon-small' name='beverages' onClick={ev => this.handleMenuItemRemoval(ev, this.state.beverages, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='beverages' className='' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='beverages' className='icon-larger fas fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='save'>\r\n            <button className='button btn-lg btn-main' onClick={this.onSaveMeal} disabled={!this.state.isBtnEnabled}>\r\n              SAVE\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealForm;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { MealForm } from '../components/MealForm.js';\r\nimport { getById, add } from '../actions/MealActions.js';\r\n\r\nclass MealFormWrapper extends Component {\r\n\r\n  async componentDidMount() {\r\n    window.scrollTo(0,10)\r\n    const id = this.props.match.params.id;\r\n    if (id) { //edit mode:\r\n      await this.props.getById(id);\r\n    }\r\n  }\r\n\r\n  onSaveMeal = async (meal) => {\r\n    const loggedInUser = this.props.loggedInUser;\r\n    const mealToAdd = { ...meal }\r\n    await this.props.add(mealToAdd);\r\n    this.props.history.push(`/user/${loggedInUser._id}`)\r\n  };\r\n\r\n  render() {\r\n    const loggedInUser = this.props.loggedInUser\r\n    const id = this.props.match.params.id;\r\n    return (\r\n      <React.Fragment>\r\n        <div className='container main-form-container'>\r\n          <h2>Event</h2>\r\n          {((id && this.props.meal) || !id) && <MealForm loggedInUser={loggedInUser} onSaveMeal={this.onSaveMeal} meal={id ? this.props.meal : ''} />}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  meal: state.meal.selectedMeal,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getById,\r\n  add,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealFormWrapper);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport { SnackbarContent } from '@material-ui/core';\r\n\r\nexport class Notification extends Component {\r\n  //this CMP will get the notification msg from props\r\n  //will be rendered inside each component which can cause any notification\r\n\r\n  state = {\r\n    open: true,\r\n    vertical: 'top',\r\n    horizontal: 'right',\r\n    width:'20%',\r\n    style:{\r\n      backgroundColor: '#c0c0c0',\r\n      marginTop: '0px',\r\n      padding:'15px',\r\n      marginRight:'-24px',\r\n      borderTopLeftRadius:'50px',\r\n      borderBottomLeftRadius:'50px'\r\n\r\n\r\n      // color:'white'\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.updateOpenState();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    //if the prevprops open property is different from the current state's open property, update it\r\n  }\r\n\r\n  updateOpenState() {\r\n    this.setState({ ...this.state, open: this.props.open });\r\n  }\r\n\r\n  handleClick = newState => {\r\n    this.setState({ open: true, ...newState });\r\n  };\r\n\r\n  handleClose = () => {\r\n    // this.setState({ ...this.state, open: false });\r\n  };\r\n\r\n  render() {\r\n    const { vertical, horizontal, open } = this.state;\r\n    return (\r\n      <div>\r\n        <Snackbar  anchorOrigin={{ vertical, horizontal }} key={`${vertical},${horizontal}`} open={open} onClose={this.handleClose}  >\r\n          <SnackbarContent style={this.state.style} message={this.props.msg}>\r\n            \r\n          </SnackbarContent>\r\n        </Snackbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Notification);\r\n","import HttpService from './HttpService';\r\n\r\nconst authEndpoint = 'auth';\r\nconst endpoint = 'user';\r\n\r\nasync function login(credentails) {\r\n  const user = await HttpService.post(`${authEndpoint}/login`, credentails);\r\n  return _handleLogin(user);\r\n}\r\nasync function signup(credentails) {\r\n  const user = await HttpService.post(`${authEndpoint}/signup`, credentails);\r\n  return _handleLogin(user);\r\n}\r\n\r\nasync function logout() {\r\n  \r\n  await HttpService.post(`${authEndpoint}/logout`);\r\n  sessionStorage.clear();\r\n  \r\n}\r\n\r\nfunction _handleLogin(user) {\r\n  sessionStorage.setItem(endpoint, JSON.stringify(user));\r\n  \r\n  return user;\r\n}\r\n\r\nasync function getById(id) {\r\n  const user = await HttpService.get(`${endpoint}/${id}`);\r\n  return user;\r\n}\r\nfunction getUserLoggedIn() {\r\n  return sessionStorage.getItem('user');\r\n}\r\nfunction checkConnection() {\r\n  const currentUser = getUserLoggedIn();\r\n\r\n  if (currentUser) {\r\n    return true;\r\n  } else return false;\r\n}\r\n\r\nexport default {\r\n  login,\r\n  signup,\r\n  logout,\r\n  getById,\r\n  checkConnection,\r\n  getUserLoggedIn,\r\n};\r\n","import UserService from '../services/UserService';\r\nimport { loading, doneLoading } from './SystemActions';\r\n// import history from './../history';\r\n\r\nexport function login(credentails) {\r\n  return async dispatch => {\r\n    const user = await UserService.login(credentails);\r\n    dispatch(_setUser(user));\r\n  };\r\n}\r\nexport function signup(credentails) {\r\n  return async dispatch => {\r\n    const user = await UserService.signup(credentails);\r\n    dispatch(_addUser(user));\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await UserService.logout();\r\n    dispatch(_setUser(null));\r\n  };\r\n}\r\n\r\nexport function getById() {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch(loading());\r\n      const user = await UserService.getById();\r\n      dispatch(_setUser(user));\r\n    } catch (err) {\r\n      console.log('UserActions: ERROR in getById', err);\r\n      // example for rerouting - after changing the store\r\n      // history.push('/some/path');\r\n    } finally {\r\n      dispatch(doneLoading());\r\n    }\r\n  };\r\n}\r\n\r\nfunction _setUser(user) {\r\n  return {\r\n    type: 'SET',\r\n    user,\r\n  };\r\n}\r\n\r\nfunction _addUser(user) {\r\n  return {\r\n    type: 'ADD',\r\n    user,\r\n  };\r\n}\r\n\r\nexport default {\r\n  login,\r\n  logout,\r\n  signup,\r\n  getById,\r\n};\r\n","import React from 'react';\r\n\r\nexport default function NotificationMsg(props) {\r\n\r\n\r\n    return (props && <div className='msg-notification-container clean-list'>\r\n        <div className='notification-img'>\r\n            <img className='user-img-profile' src={props.user.imgUrl}></img>\r\n        </div>\r\n        <div className='user-info-notification' >\r\n            <span>Just now</span>\r\n            <span > {props.user.fullName}</span>\r\n            <span>has just signed-in to your event</span>\r\n            <span>{props.user.titelHost}</span>\r\n        </div>\r\n    </div>\r\n    );\r\n}\r\n\r\n//","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport Notification from './Notification';\r\nimport { login } from '../actions/UserActions';\r\n\r\nimport { logout } from '../actions/UserActions';\r\nimport SocketService from '../services/SocketService';\r\nimport { addMsg } from '../actions/SocketAction';\r\nimport NotificationMsg from './NotificationMsg';\r\n\r\nconst GUEST_EMAIL = 'guest@gmail.com'\r\nconst GUEST_PASSWORD = 'guest'\r\nconst GUEST_ID = '5e4810c4793b07597058e829';\r\n\r\nexport class Header extends Component {\r\n  state = {\r\n    showNotification: false,\r\n    registeredUser: {},\r\n  };\r\n\r\n  componentDidMount() {\r\n    \r\n    if (this.props.loggedInUser) {\r\n      \r\n      this.signToSocketEvent(this.props.loggedInUser._id);\r\n    }\r\n    else {\r\n      \r\n      this.loginAsGuest();\r\n      this.signToSocketEvent(GUEST_ID);\r\n    }\r\n  }\r\n\r\n  loginAsGuest() {\r\n    this.props.login({email: GUEST_EMAIL, password: GUEST_PASSWORD})\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.loggedInUser !== this.props.loggedInUser && this.props.loggedInUser) {\r\n      this.signToSocketEvent(this.props.loggedInUser._id);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    \r\n    this.unSignToSocketEvent();\r\n  }\r\n\r\n  signToSocketEvent = userId => {\r\n    SocketService.setup();\r\n    SocketService.emit('newChannel', `onEventRegistration${userId}`);\r\n    SocketService.on('addMsg', this.addMsg);\r\n  };\r\n\r\n  addMsg = newMsg => {\r\n    console.log('Header -> ', newMsg);\r\n\r\n    this.setState({ showNotification: true, registeredUser: newMsg.loggedInUser });\r\n    setTimeout(this.resetNotification, 8000);\r\n  };\r\n\r\n  resetNotification = () => {\r\n    this.setState({ showNotification: false, registeredUser: '' });\r\n  };\r\n\r\n  unSignToSocketEvent = () => {\r\n    SocketService.off('addMsg', this.addMsg);\r\n    SocketService.terminate();\r\n  };\r\n\r\n  onLogout = ev => {\r\n    ev.preventDefault();\r\n    this.props.logout();\r\n    this.unSignToSocketEvent();\r\n    this.props.history.push(`/`);\r\n  };\r\n\r\n  render() {\r\n    return [\r\n      this.state.showNotification && <Notification key={1} open={true} msg={<NotificationMsg user={this.state.registeredUser}></NotificationMsg>}></Notification>,\r\n      <div key={2} className='main-header-container flex align-center space-between'>\r\n        <div className='container logo flex-basis-60 '>\r\n          <Link to='/'>\r\n            <span>umami</span>\r\n          </Link>\r\n        </div>\r\n        <div className='nav-container container flex-basis-30 flex justify-end'>\r\n          <div className='controls flex-basis-1 flex row align-center justify-end'>\r\n            <div className='margin-right-10'>\r\n              {/* <Link to='/meal/edit'>\r\n                <span className=''>Hosts Zone</span>\r\n              </Link> */}\r\n            </div>\r\n            {this.props.loggedInUser && (\r\n              <>\r\n                <div className='logged-user-container'>\r\n                  <Link className='' to={`/user/${this.props.loggedInUser._id}`}>\r\n                    <img style={{ width: '60px', height: '60px' }} src='https://res.cloudinary.com/contentexs/image/upload/v1580171634/user-round.svg' alt='' />\r\n                  </Link>\r\n                </div>\r\n                <span>|</span>\r\n                <div>\r\n                  <a href='' onClick={this.onLogout}>\r\n                    logout\r\n                  </a>\r\n                  {/* <a>Sck: {this.props.msg} </a> */}\r\n                </div>\r\n              </>\r\n            )}\r\n            {!this.props.loggedInUser && (\r\n              <>\r\n                <Link className='' to={'/user/login'}>\r\n                  login\r\n                </Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>,\r\n    ];\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  msg: state.socket.msg,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  logout,\r\n  addMsg,\r\n  login\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\r\n","import React from 'react';\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <div className='footer-container  '>\r\n      <div className='footer-logo container flex column align-center justify-center'>\r\n        <h3>umami</h3>\r\n        <small> 2019 umami - All Rights Reserved</small>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signup } from '../actions/UserActions';\r\n\r\n\r\nexport class Singup extends Component {\r\n  state = {\r\n    modalIsOpen: false,\r\n    fullName: '',\r\n    username: '',\r\n    password: '',\r\n    email: '',\r\n    phone: '',\r\n    imgUrl: '',\r\n  };\r\n\r\n\r\n  changeInput = ev => {\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [field]: value });\r\n\r\n  };\r\n\r\n\r\n  onSignup = () => {\r\n    const user = this.state;\r\n    delete user.modalIsOpen;\r\n    if (user.fullName && user.username && user.password && user.email && user.phone && user.imgUrl) {\r\n      this.props.signup(user);\r\n    }\r\n  };\r\n\r\n  onCheckForm = (ev) => {\r\n    if (ev.key === 'Enter') this.onSignup()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <a onClick={this.openModal}>signup</a>\r\n        <div className='log-in' onKeyUp={(ev) => this.onCheckForm(ev)}>\r\n          <input type='text' className='margin-top-10' placeholder='Full Name' onChange={this.changeInput} name='fullName'></input>\r\n          <br />\r\n          <input type='text' className='margin-top-10' placeholder='User Name' onChange={this.changeInput} name='username'></input>\r\n          <br />\r\n          <input type='password' className='margin-top-10' placeholder='Password' onChange={this.changeInput} name='password'></input>\r\n          <br />\r\n          <input type='phone' className='margin-top-10' placeholder='Phone' onChange={this.changeInput} name='phone'></input>\r\n          <br />\r\n\r\n          <input type='imgUrl' className='margin-top-10' placeholder='imgUrl' onChange={this.changeInput} name='imgUrl'></input>\r\n          <br />\r\n          <input type='email' className='margin-top-10' placeholder='email' onChange={this.changeInput} name='email'></input>\r\n          <br />\r\n\r\n          <button className=\"btn-lg btn-action\" onClick={this.onSignup}>sign-up</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  signup,\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Singup);\r\n","import React, { Component } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { Link } from 'react-router-dom';\r\nimport { login } from '../actions/UserActions';\r\n\r\nimport { connect } from 'react-redux';\r\nimport Signup from '../components/Signup';\r\nimport { Button } from '@material-ui/core';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    email: '',\r\n    password: '',\r\n    isHide: true,\r\n  };\r\n\r\n  changeInput = ev => {\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [field]: value });\r\n  };\r\n\r\n  onLogInUser = async () => {\r\n    const email = this.state.email;\r\n    const password = this.state.password;\r\n    const user = { email, password };\r\n    if (email && password) {\r\n      await this.props.login(user);\r\n      this.props.history.push('/');\r\n    }\r\n  };\r\n\r\n  onCheckForm = (ev) => {\r\n    if (ev.key === 'Enter') this.onLogInUser()\r\n  }\r\n\r\n  changeForm = () => {\r\n    this.setState(prevState => ({ isHide: !prevState.isHide }));\r\n  };\r\n\r\n  render() {\r\n    const hideSignup = this.state.isHide ? 'hide' : 'show-block';\r\n    const hideLogIn = !this.state.isHide ? 'hide' : 'show-block';\r\n    const loginOrSignupText = (this.state.isHide) ? 'register' : 'login'\r\n    return (\r\n      <div className='flex column align-center justify-center'>\r\n        <div className={hideLogIn}>\r\n          <div >Log-in</div>\r\n          <div >\r\n            <input name='email' onChange={this.changeInput} value={this.state.email} type='text' className='login-input' placeholder=' email'></input>\r\n          </div>\r\n          <div className='margin-top-10'>\r\n            <input name='password' onChange={this.changeInput} value={this.state.password} type='password' className='login-input' placeholder=' Password'></input>\r\n          </div>\r\n          <div className='margin-top-10 login-btns-warpper'>\r\n            <div className='btn-container'>\r\n              <button className='btn-lg btn-action' onClick={this.onLogInUser}>\r\n                Login\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={hideSignup}>\r\n          <Signup></Signup>\r\n        </div>\r\n        <span className='login-or-signup' onClick={this.changeForm} onKeyUp={(ev) => this.onCheckForm(ev)}>\r\n          click <span className=\"cursor-pointer emphasized-login-text\">here</span> to {loginOrSignupText}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  login,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React from 'react';\r\nimport { Component } from 'react';\r\nimport { Router, Switch, Route } from 'react-router-dom';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport Home from './pages/Home';\r\nimport MealApp from './pages/MealApp';\r\nimport MealDetails from './pages/MealDetails';\r\nimport UserDetails from './pages/UserDetails';\r\nimport MealFormWrapper from './pages/MealFormWrapper';\r\n\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport Login from './components/Login';\r\n\r\nimport './assets/css/all.min.css';\r\nimport './assets/styles/global.scss';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment >\r\n        <Router history={history}>\r\n            <Header></Header>\r\n            <Switch>\r\n              <Route component={Home} path='/' exact></Route>\r\n              <Route component={MealFormWrapper} path='/meal/edit/:id?'></Route>\r\n              <Route component={MealApp} path='/meal/location/:location?'></Route>\r\n              <Route component={MealApp} path='/meal/cuisine/:cuisine?'></Route>\r\n              <Route component={MealApp} path='/meal/results/:results?'></Route>\r\n              <Route component={Login} path='/user/login' exact></Route>\r\n              {/* <Route component={Signup} path='/user/signup' exact></Route> */}\r\n              <Route component={MealDetails} path='/meal/:id' exact></Route>\r\n              <Route component={UserDetails} path='/user/:id' exact></Route>\r\n            </Switch>\r\n            <Footer></Footer>\r\n        </Router>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","\r\nlet initialState = {\r\n    filter: {\r\n        userId: '',\r\n        at: '',\r\n        type: '',\r\n        location: {\r\n            city: '',\r\n            country: '',\r\n        },\r\n        tags: ''\r\n    }\r\n};\r\n\r\nexport default function FilterReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n        case 'SET_FILTER':\r\n\r\n            return {\r\n                ...state,\r\n                filter: { ...action.filter }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","let initialState = {\r\n  meals: [],\r\n  userMeals: [],\r\n  selectedMeal: null,\r\n  cities: [],\r\n  cuisines: [],\r\n  filteredMeal: null, //holds the meal for the registration CMP (contains only relevant occurrences)\r\n};\r\n\r\nexport default function MealReducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOAD_MEALS':\r\n      return {\r\n        ...state,\r\n        meals: action.meals,\r\n      };\r\n    case 'GET_MEAL_BY_ID':\r\n      return {\r\n        ...state,\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'ADD_MEAL':\r\n      return {\r\n        ...state,\r\n        meals: [...state.meals, action.meal],\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'UPDATE_MEAL':\r\n      return {\r\n        ...state,\r\n        meals: state.meals.map(meal => (action.meal._id === meal._id ? action.meal : meal)),\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'REMOVE_MEAL':\r\n      return { ...state, meals: state.meals.filter(meal => meal._id !== action.id) };\r\n    case 'LOAD_CITIES':\r\n      return { ...state, cities: [...action.citiesToReducer] };\r\n    case 'LOAD_CUISINES':\r\n      return { ...state, cuisines: [...action.cuisineTypesToReducer] };\r\n    case 'LOAD_TAGS':\r\n      return { ...state, tags: [...action.tags] };\r\n    case 'LOAD_USER_MEAL':\r\n      return {\r\n        ...state,\r\n        userMeals: action.userMeals,\r\n      };\r\n    case 'LOAD_MEAL_FOR_REGISTRATION':\r\n      return {\r\n        ...state,\r\n        filteredMeal: action.filteredMeal,\r\n      };\r\n    case 'LOAD_HOME_MEALS':\r\n      return {\r\n        ...state,\r\n        homeMeals: action.meals,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export default {\r\n  createReducer,\r\n  updateObject,\r\n  addItemToState,\r\n  updateItemInState,\r\n  removeItemFromState,\r\n};\r\n\r\nexport function updateObject(oldObject, newValues) {\r\n  return Object.assign({}, oldObject, newValues);\r\n}\r\n\r\nexport function addItemToState(state, item) {\r\n  return [...state, item];\r\n}\r\n\r\nexport function updateItemInState(state, itemId, updateItemCallback) {\r\n  return state.map(item => (item.id !== itemId ? item : updateItemCallback(item)));\r\n}\r\n\r\nexport function removeItemFromState(state, itemId) {\r\n  return state.filter(item => item.id !== itemId);\r\n}\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n","import reducerUtility from './reducerUtilities';\r\n\r\nlet localLoggedUser = null;\r\nif (sessionStorage.user) localLoggedUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n  loggedInUser: localLoggedUser,\r\n};\r\n\r\nconst UserReducer = reducerUtility.createReducer(initialState, {\r\n  SET: load,\r\n  ADD: add,\r\n});\r\n\r\nfunction load(state, action) {\r\n  return { ...state, loggedInUser: action.user };\r\n}\r\n\r\nfunction add(state, action) {\r\n  return {\r\n    ...state,\r\n    loggedInUser: action.user,\r\n  };\r\n}\r\n\r\nexport default UserReducer;\r\n","const initialState = {\r\n  isLoading: false,\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOADING_START':\r\n      return { ...state, isLoading: true };\r\n    case 'LOADING_DONE':\r\n      return { ...state, isLoading: false };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","\r\nlet initialState = {\r\n    msg: '',\r\n    \r\n};\r\n\r\nexport default function SocketReducer(state = initialState, action = {}) {\r\n\r\n    switch (action.type) {\r\n        case 'ADD_MSG':\r\n            return {...state, msg:action.msg };\r\n        default:\r\n            return state;\r\n    }\r\n}","let initialState = {\r\n  displayedMeal: null\r\n}\r\n\r\nexport default function OccurrenceReducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOAD_DISPLAYED_MEAL':\r\n      return {\r\n        displayedMeal: {...action.displayedMeal},\r\n      };\r\n    case 'SET_SELECTED_OCCURRANCE':\r\n      return {\r\n        displayedMeal: { ...state.displayedMeal, selectedOccurance: action.selectedOccurance }\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\n\r\nimport FilterReducer from './FilterReducer';\r\nimport MealReducer from './MealReducer';\r\nimport UserReducer from './UserReducer';\r\nimport SystemReducer from './SystemReducer';\r\nimport SocketReducer from './SocketReducer';\r\nimport OccurranceReducer from './OccurranceReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  system: SystemReducer,\r\n  filter: FilterReducer,\r\n  meal: MealReducer,\r\n  user: UserReducer,\r\n  socket: SocketReducer,\r\n  occurrance: OccurranceReducer\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst Store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default Store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport Store from './store';\r\n\r\nReactDOM.render(\r\n  <Provider store={Store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}