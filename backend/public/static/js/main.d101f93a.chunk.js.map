{"version":3,"sources":["history.js","services/HttpService.js","services/mealService.js","actions/MealActions.js","services/SocketService.js","actions/FilterActions.js","components/SearchBar.js","components/MealCategoryPreview.js","services/UtilitiesService.js","components/MealCategoryList.js","components/MeetOurHosts.js","pages/Home.js","components/MealPreview.js","components/MealList.js","components/BadgePreview.js","components/BadgeList.js","components/Spinner.js","pages/MealApp.js","components/Notification.js","reducers/MealSelector.js","components/ImageGallery.js","components/MealPageNav.js","components/MealPayment.js","components/ShowHideText.js","components/MealMenu.js","components/AttendeesPreview.js","components/AttendeesList.js","actions/SocketAction.js","components/ReviewForm.js","components/ReviewPreview.js","components/ReviewList.js","components/MealMap.js","pages/MealDetails.js","components/UserMealPreview.js","components/UserMealList.js","pages/UserDetails.js","services/ExternalService.js","components/ImageUpload.js","components/PromotionCheckbox.js","components/MealForm.js","pages/MealFormWrapper.js","services/UserService.js","actions/UserActions.js","components/NotificationMsg.js","components/Header.js","components/Footer.js","components/Signup.js","components/Login.js","App.js","serviceWorker.js","reducers/FilterReducer.js","reducers/MealReducer.js","reducers/reducerUtilities.js","reducers/UserReducer.js","reducers/SystemReducer.js","reducers/SocketReducer.js","reducers/index.js","store.js","index.js"],"names":["history","createBrowserHistory","axios","Axios","create","withCredentials","endpoint","data","params","ajax","a","async","method","url","res","console","log","dir","response","status","push","query","filter","groupBy","distinctBy","userId","at","type","tags","location","city","country","meals","group","_id","$push","distinct","HttpService","getById","id","meal","add","addedMeal","update","updatedMeal","getMealForRegistration","newMeal","now","Date","newOccurrences","occurrences","forEach","occurrence","total","capacity","date","load","dispatch","MealService","loadUserMeal","userMeals","loadCities","cities","citiesToReducer","map","loadMealsByLocation","loadMealsByCuisine","loadCuisines","cuisineTypes","cuisineTypesToReducer","cuisine","action","socket","setup","io","terminate","on","eventName","cb","off","emit","setFilter","_setFilter","SearchBar","state","val","handleChange","event","key","setState","target","value","onSearchAction","props","className","placeholder","this","onChange","onKeyUp","Component","mapDispatchToProps","withRouter","connect","MealCategoryPreview","category","displayCategory","toggleIcon","toggleTxt","hostedTxt","txtPeriod","nextAvailableDate","name","variations","totalOccurrences","currentWeekOccurrences","totalEvents","totalPrice","priceAvg","imgUrl","variationIcon","variationTxt","length","src","alt","to","toLowerCase","addDaysToDate","days","copy","Number","setDate","getDate","formatDate","Intl","DateTimeFormat","year","month","day","format","_getImageByCategoryType","categoryType","categoryInstance","mapCuisinesImages","default","asian","spanish","italian","greek","moroccan","indian","mapCitiesImages","dallas","barcelona","duino","athens","marrakech","delhi","bangkok","sortByDate","b","getTime","getCategoriesInfo","categories","property","startDate","endDate","current","split","reduce","result","undefined","nextDate","today","getNextOccurrenceDate","totalAttendees","parseInt","getOccurrencesInRange","minDate","getOccurrencesCounter","instance","find","cuisineType","includes","_addCategoryInstanceVariety","parseFloat","price","Math","floor","getItemsInRange","items","item","findAllByKey","obj","keyToFind","Object","entries","acc","concat","MealCategoryList","UtilitiesService","idx","MeetOurHosts","autoPlay","muted","loop","Home","loggedInUser","user","msg","MealPreview","maxIdx","max","Infinity","date1","diffInDays","nextMeal","getNextDateFromNow","isPromoted","getDifferenceInDays","attendees","renderType","getMainMsg","reviews","getAvgRate","promotionMsg","getPromotionMsg","toDateString","slice","join","imgUrls","title","MealList","onCardClick","BadgePreview","isSelected","onClick","onBadgeClick","badge","BadgeList","badges","selectedBadge","Spinner","color","height","width","MealApp","isLoading","resetFilterDefinitions","currReview","rate","loadMeals","pathname","results","match","badgeName","setBadges","badgeType","cuisines","onLocationClick","innerText","onCuisineClick","prevProps","JSON","stringify","isResultsUrl","Notification","open","vertical","horizontal","style","backgroundColor","handleClick","newState","handleClose","updateOpenState","Snackbar","anchorOrigin","onClose","SnackbarContent","message","getMealDetails","createSelector","selectedMeal","availableOccurrences","detailsMeal","errorMsg","storeMeal","host","hostedBy","fullName","messages","noAvailableOccurrence","eventSoldOut","hasAttendees","noAttendees","userRegistered","pleaseLogin","registrationCart","selectedOccurance","availableDates","eventSetup","mealType","startTime","endTime","currency","description","eventMenu","menu","address","lat","lng","images","hostReviews","review","byUser","txt","totalReservations","reservations","attendee","numOfAttendees","occurrenceAttendees","occurrenceTotalPrice","isLoggedInUser","seatsLeft","sort","selectedDate","setSelectedOccurance","setAvailableDates","eventAttendees","reservation","getEventAttendees","hostRating","totalRated","avgRate","toFixed","setHostRating","ImageGallery","MealPageNav","href","MealPayment","availableSeats","availableText","registerCounter","buttonText","paymentClass","displayMsg","ev","preventDefault","Moment","userOccurrence","onEventRegistration","htmlFor","min","list","ShowHideText","text","showLink","linkText","toggleText","textLength","showRows","MealMenu","firstCourse","course","mainCourse","desserts","dessert","beverages","beverage","AttendeesPreview","AttendeesList","addMsg","newMsg","ReviewForm","email","starClass","starSelected","msgs","onSaveReviewForm","onToggleStar","onHandleChange","onCloseReviewForm","onSubmit","Array","from","_","required","ReviewPreview","data-rating","ReviewList","mapContainerStyle","marginBottom","zIndex","MealMap","google","initialCenter","zoom","GoogleApiWrapper","apiKey","MealDetails","pageOverlayClass","displayReviewForm","signToSocketEvent","hostedId","SocketService","unSignToSocketEvent","registration","userReservation","titleHost","onDisplayReviewForm","newReview","UserMealPreview","onClickRow","stopPropagation","onEditClick","onDelete","mealId","occurensId","objForHosted","Fragment","toLocaleDateString","UserMealList","UserDetails","onCreateMeal","mealsToShow","attended","findIndex","splice","uploadImages","files","urls","i","_uploadImg","getLatLngFromAddress","replace","get","then","geometry","formatted_address","file","UPLOAD_URL","formData","FormData","append","fetch","body","json","catch","err","error","ImageUpload","displayed","drag","msgState","fileArray","fileObj","dropRef","React","createRef","handleDrag","handleDragIn","dragCounter","dataTransfer","handleDragOut","handleDrop","setPreviewImages","handleImageUpload","clearData","checkExistingImages","URL","createObjectURL","div","addEventListener","removeEventListener","ref","multiple","accept","onImgRemoval","CheckboxLabels","FormGroup","row","FormControlLabel","control","Checkbox","checked","label","MealForm","firstCourseTmp","mainCourseTmp","dessertTmp","drinkTmp","isActive","isBtnEnabled","size","cloudService","prevImgUrls","newImgUrls","enableBtn","field","onHandleDateAdd","parse","prevState","onHandleAddMenuItem","tmpFieldName","setTags","newTags","dateToRender","onSaveMeal","newAddress","handleDateRemoval","occurrenceIdx","handleMenuItemRemoval","nodeName","classList","newList","onAddMenuItem","parentNode","newCourse","occurences","disabled","MealFormWrapper","_handleLogin","sessionStorage","setItem","getUserLoggedIn","getItem","login","credentails","signup","logout","clear","checkConnection","UserService","_setUser","_addUser","NotificationMsg","titelHost","Header","showNotification","registeredUser","setTimeout","resetNotification","onLogout","onLogIn","Footer","Singup","modalIsOpen","username","password","phone","changeInput","onSignup","openModal","Login","isHide","onLogInUser","goBack","changeForm","hideSignup","hideLogIn","Signup","App","component","path","exact","Boolean","window","hostname","initialState","filteredMeal","createReducer","handlers","hasOwnProperty","updateObject","oldObject","newValues","assign","addItemToState","updateItemInState","itemId","updateItemCallback","removeItemFromState","localLoggedUser","UserReducer","reducerUtility","SET","ADD","rootReducer","combineReducers","system","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","Store","createStore","applyMiddleware","thunk","ReactDOM","render","store","document","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.d101f93a.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","import history from '../history';\r\nimport Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production' ? '/api/' : '//localhost:3030/api/';\r\n// const BASE_URL = process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030/';\r\n\r\nvar axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nexport default {\r\n  get(endpoint, data, params) {\r\n    return ajax(endpoint, 'GET', data, params);\r\n  },\r\n  post(endpoint, data, params) {\r\n    return ajax(endpoint, 'POST', data, params);\r\n  },\r\n  put(endpoint, data, params) {\r\n    return ajax(endpoint, 'PUT', data, params);\r\n  },\r\n  delete(endpoint, data, params) {\r\n    return ajax(endpoint, 'DELETE', data, params);\r\n  },\r\n};\r\n\r\nasync function ajax(endpoint, method = 'get', data = null, params = null, dispatch) {\r\n  try {\r\n    const res = await axios({\r\n      url: `${BASE_URL}${endpoint}`,\r\n      method,\r\n      data,\r\n      params,\r\n    });\r\n    return res.data;\r\n  } catch (err) {\r\n    console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}, with params: ${params}`);\r\n    console.dir(err);\r\n    if (err.response && err.response.status === 401) {\r\n      history.push('/');\r\n      // diaspatch ('authorization error')\r\n    }\r\n    // diaspatch ('error')\r\n    throw err;\r\n  }\r\n}\r\n","import HttpService from './HttpService';\r\n\r\nexport default {\r\n  query,\r\n  getById,\r\n  add,\r\n  update,\r\n  getMealForRegistration\r\n};\r\n\r\nconst endpoint = 'meal';\r\n\r\nasync function query(filter, groupBy, distinctBy) {\r\n  let params;\r\n  if (filter) {\r\n    params = {\r\n      userId: filter.userId,\r\n      at: filter.at,\r\n      type: filter.type,\r\n      tags: filter.tags,\r\n    };\r\n    if (filter.location) {\r\n      params.city = filter.location.city;\r\n      params.country = filter.location.country;\r\n    }\r\n  } else if (groupBy) {\r\n    if (groupBy.meals) {\r\n      params = {\r\n        group: groupBy._id,\r\n        meals: groupBy.meals.$push,\r\n      };\r\n    } else {\r\n      params = {\r\n        group: groupBy._id,\r\n      };\r\n    }\r\n  } else if (distinctBy) {\r\n    params = {\r\n      distinct: distinctBy._id,\r\n    };\r\n  }\r\n  const meals = await HttpService.get(endpoint, filter, params);\r\n  return meals;\r\n}\r\n\r\nasync function getById(id) {\r\n  const meal = await HttpService.get(`${endpoint}/${id}`);\r\n  return meal;\r\n}\r\n\r\nasync function add(meal) {\r\n  const addedMeal = await HttpService.post(`${endpoint}`, meal);\r\n  return addedMeal;\r\n}\r\n\r\nasync function update(meal) {\r\n  const updatedMeal = await HttpService.put(`${endpoint}/${meal._id}`, meal);\r\n  return updatedMeal;\r\n}\r\n\r\nfunction getMealForRegistration(meal) {\r\n  //this method gets a regular meal object\r\n  //returns a new meal containing only the following occurrences:\r\n  //dates that didn't already pass\r\n  //occurrences which have more room left\r\n\r\n  const newMeal = { ...meal }\r\n  const now = Date.now()\r\n  const newOccurrences = []\r\n  newMeal.occurrences.forEach(occurrence => {\r\n    if (occurrence.total < newMeal.capacity && occurrence.date > now) {\r\n      newOccurrences.push(occurrence)\r\n    }\r\n  })\r\n  newMeal.occurrences = newOccurrences\r\n  return newMeal;\r\n}","import MealService from '../services/mealService';\r\n\r\nexport default {\r\n  load,\r\n  getById,\r\n  add,\r\n  remove,\r\n  loadCities,\r\n  loadCuisines,\r\n  loadUserMeal,\r\n  loadMealsByLocation,\r\n  loadMealsByCuisine,\r\n};\r\n\r\nexport function load(filter) {\r\n  return async dispatch => {\r\n    const meals = await MealService.query(filter);\r\n    dispatch({ type: 'LOAD', meals });\r\n  };\r\n}\r\n\r\nexport function loadMealsToList(meals) {\r\n  //this method gets the full list of meals as received from the backend (and stored in the global state)\r\n  //and filters the meals to contain only the meals with releveant occurrances (dates which didn't pass already, occurrances which are not fully occuppied)\r\n  return async dispatch => {\r\n    const filteredMeals = await MealService.filter(meals);\r\n    dispatch({ type: 'LOAD_FILTERED_MEALS', filteredMeals });\r\n  };\r\n}\r\n\r\nexport function loadUserMeal(filter) {\r\n  return async dispatch => {\r\n    const userMeals = await MealService.query(filter);\r\n    dispatch({ type: 'LOAD_USER_MEAL', userMeals });\r\n  };\r\n}\r\n\r\nexport function loadCities() {\r\n  const groupBy = {\r\n    _id: '$location.city',\r\n  };\r\n  return async dispatch => {\r\n    const cities = await MealService.query(null, groupBy);\r\n    const citiesToReducer = cities.map(city => city._id);\r\n    dispatch({ type: 'LOAD_CITIES', citiesToReducer });\r\n  };\r\n}\r\n\r\nexport function loadMealsByLocation() {\r\n  const groupBy = {\r\n    _id: '$location.city',\r\n    meals: {\r\n      $push: '$$ROOT',\r\n    },\r\n  };\r\n  return async dispatch => {\r\n    const meals = await MealService.query(null, groupBy);\r\n    dispatch({ type: 'LOAD', meals });\r\n  };\r\n}\r\n\r\nexport function loadMealsByCuisine() {\r\n  const groupBy = {\r\n    _id: '$cuisineType',\r\n    meals: {\r\n      $push: '$$ROOT',\r\n    },\r\n  };\r\n  return async dispatch => {\r\n    const meals = await MealService.query(null, groupBy);\r\n    dispatch({ type: 'LOAD', meals });\r\n  };\r\n}\r\n\r\nexport function loadCuisines() {\r\n  const groupBy = {\r\n    _id: '$cuisineType',\r\n  };\r\n  return async dispatch => {\r\n    const cuisineTypes = await MealService.query(null, groupBy);\r\n    const cuisineTypesToReducer = cuisineTypes.map(cuisine => cuisine._id);\r\n    dispatch({ type: 'LOAD_CUISINES', cuisineTypesToReducer });\r\n  };\r\n}\r\n\r\nexport function loadTags() {\r\n  const distinct = {\r\n    _id: 'tags',\r\n  };\r\n  return async dispatch => {\r\n    const tags = await MealService.query(null, null, distinct);\r\n    // const cuisineTypesToReducer = cuisineTypes.map(cuisine => cuisine._id)\r\n    dispatch({ type: 'LOAD_TAGS', tags });\r\n  };\r\n}\r\n\r\nexport function getById(id) {\r\n  return async dispatch => {\r\n    const meal = await MealService.getById(id);\r\n    dispatch({ type: 'GET_BY_ID', meal });\r\n  };\r\n}\r\n\r\nexport function add(meal) {\r\n  const action = meal._id ? 'UPDATE' : 'ADD';\r\n  if (action === 'UPDATE') {\r\n    return async dispatch => {\r\n      const newMeal = await MealService.update(meal);\r\n      dispatch({ type: action, meal: newMeal });\r\n    };\r\n  } else {\r\n    return async dispatch => {\r\n      const newMeal = await MealService.add(meal);\r\n      dispatch({ type: action, meal: newMeal });\r\n    };\r\n  }\r\n}\r\n\r\nexport function remove(id) {\r\n  return async dispatch => {\r\n    await MealService.remove(id);\r\n    dispatch({ type: 'REMOVE', id });\r\n  };\r\n}\r\n\r\nexport function getMealForRegistration(meal) { //this method does not turn to the backend therefore it is not async!\r\n  return dispatch => {\r\n    const newMeal = MealService.getMealForRegistration(meal);\r\n    dispatch({ type: 'LOAD_MEAL_FOR_REGISTRATION', filteredMeal: newMeal })\r\n  }\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\n\r\nlet socket;\r\n\r\nexport default {\r\n  setup,\r\n  terminate,\r\n  on,\r\n  off,\r\n  emit\r\n};\r\n\r\nfunction setup() {\r\n\r\n  socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n  socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n  socket.on(eventName, cb);\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n  socket.off(eventName, cb);\r\n}\r\n\r\nfunction emit(eventName, data) { \r\n   \r\n  socket.emit(eventName, data);\r\n}\r\n","\r\nexport default {\r\n    setFilter\r\n};\r\n\r\nexport function setFilter(filter) {\r\n    return async dispatch => await dispatch(_setFilter(filter))\r\n}\r\n\r\nfunction _setFilter(filter) {\r\n    return {\r\n        type: 'SET_FILTER',\r\n        filter\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport { setFilter } from '../actions/FilterActions';\r\n\r\nexport class SearchBar extends Component {\r\n  state = {\r\n    val: '',\r\n  };\r\n\r\n  handleChange = async event => {\r\n    if (event.key !== 'Enter') {\r\n      this.setState({ val: event.target.value });\r\n    }\r\n  };\r\n\r\n  onSearchAction = async event => {\r\n    if (event.key === 'Enter' || event.type === 'click') {\r\n      const res = this.state.val;\r\n      await this.setState({ val: '' });\r\n      this.props.history.push(`/meal/results/${res}`);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='main-search-container container margin-top-20'>\r\n        <input className='search-input' type='text' placeholder={this.props.placeholder} value={this.state.val} onChange={this.handleChange} onKeyUp={this.onSearchAction}></input>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  filter: state.filter.filter,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  setFilter,\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SearchBar));","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass MealCategoryPreview extends Component {\r\n  state = { category: null, displayCategory: '', toggleIcon: '', toggleTxt: '', hostedTxt: '', txtPeriod: '' };\r\n  componentDidMount() {\r\n    const { category } = this.props;\r\n    this.setState({\r\n      category: {\r\n        nextAvailableDate: {\r\n          date: category.nextAvailableDate.date,\r\n          city: category.nextAvailableDate.city,\r\n          country: category.nextAvailableDate.country,\r\n          cuisine: category.nextAvailableDate.cuisine,\r\n        },\r\n        name: category.name,\r\n        variations: category.variations,\r\n        totalOccurrences: category.totalOccurrences,\r\n        currentWeekOccurrences: category.currentWeekOccurrences,\r\n        totalEvents: category.totalEvents,\r\n        totalPrice: category.totalPrice,\r\n        priceAvg: category.priceAvg,\r\n        imgUrl: category.imgUrl,\r\n      },\r\n      variationIcon: this.props.displayCategory === 'Cuisine' ? 'https://res.cloudinary.com/contentexs/image/upload/v1580171634/location.svg' : 'https://res.cloudinary.com/contentexs/image/upload/v1580170530/dish-round.svg',\r\n      variationTxt: this.props.displayCategory === 'Cuisine' ? `On ${category.variations.length} Different Locations` : `${category.variations.length} Different Cuisine Types`,\r\n      hostedTxt: category.currentWeekOccurrences > 0 ? `${category.currentWeekOccurrences} Hosted Events` : `${category.totalOccurrences} Hosted Events`,\r\n      txtPeriod: category.currentWeekOccurrences > 0 ? 'This Week' : '',\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.category) return <div></div>;\r\n    return (\r\n      <div className='category-card'>\r\n        <img src={this.state.category.imgUrl} alt='category' className='card-img'></img>\r\n        <h5 className='card-name'>{this.state.category.name}</h5>\r\n        <div className='card-total-one'>\r\n          <img src={this.state.variationIcon} alt='icon'></img>\r\n          <div>\r\n            <span>{this.state.variationTxt}</span>\r\n          </div>\r\n        </div>\r\n        <div className='card-hosted'>\r\n          <img src='https://res.cloudinary.com/contentexs/image/upload/v1580170530/dinner-round.svg' alt='dinner icon'></img>\r\n          <div>\r\n            <span> {this.state.hostedTxt} </span>\r\n          </div>\r\n        </div>\r\n        <div className='card-next-date'>\r\n          <img src='https://res.cloudinary.com/contentexs/image/upload/v1580170530/calender-round.svg' alt='calender icon'></img>\r\n          <div>\r\n            <span className='title'>Next Event Is On, </span> <span>{this.state.category.nextAvailableDate.date}</span>\r\n          </div>\r\n        </div>\r\n        <div className='card-avg-price'>\r\n          <img src='https://res.cloudinary.com/contentexs/image/upload/v1580328925/money.svg' alt='money icon'></img>\r\n          <div>\r\n            <span className='title'>Avg Price Is, </span>\r\n            <span>\r\n              ${this.state.category.priceAvg}\r\n              <small> (per guest)</small>\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className='card-btn'>\r\n          <Link to={`/meal/${this.props.displayCategory.toLowerCase()}/${this.props.category.name}`} className='btn'>\r\n            <span className=''>View Events</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealCategoryPreview;\r\n","function sortByDate(a, b) {\r\n  var dateA = new Date(a.date).getTime();\r\n  var dateB = new Date(b.date).getTime();\r\n  return dateA > dateB ? 1 : -1;\r\n}\r\n\r\nfunction addDaysToDate(date, days) {\r\n  const copy = new Date(Number(date));\r\n  copy.setDate(date.getDate() + days);\r\n  return copy;\r\n}\r\n\r\nfunction formatDate(date) {\r\n  let options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n  return new Intl.DateTimeFormat('en-US', options).format(new Date(date));\r\n}\r\n\r\nfunction findAllByKey(obj, keyToFind) {\r\n  return Object.entries(obj).reduce((acc, [key, value]) => (key === keyToFind ? acc.concat(value) : typeof value === 'object' ? acc.concat(findAllByKey(value, keyToFind)) : acc), []);\r\n}\r\n\r\nfunction getItemsInRange(items, startDate, endDate = null) {\r\n  if (endDate === null)\r\n    return items.filter(item => {\r\n      return item.date > startDate;\r\n    });\r\n  else\r\n    return items.filter(item => {\r\n      return item.date > startDate && item.date <= endDate;\r\n    });\r\n}\r\n\r\nfunction _addCategoryInstanceVariety(instance, categoryType, cuisine, city) {\r\n  let variations = [];\r\n\r\n  if (categoryType.type === 'Cuisine') {\r\n    variations = instance.variations.includes(city) ? [...instance.variations, city] : instance.variations;\r\n  }\r\n\r\n  if (categoryType.type === 'Location') {\r\n    variations = instance.variations.includes(cuisine) ? [...instance.variations, cuisine] : instance.variations;\r\n  }\r\n\r\n  return variations;\r\n}\r\n\r\nfunction _getImageByCategoryType(categoryType, categoryInstance) {\r\n  let imgUrl = '';\r\n\r\n  const mapCuisinesImages = {\r\n    default: 'https://res.cloudinary.com/contentexs/image/upload/v1580324681/default-c.jpg',\r\n    'tex-mex': 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/tex-mex.jpg',\r\n    asian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/asian.jpg',\r\n    spanish: 'https://res.cloudinary.com/contentexs/image/upload/v1580324681/barcelona.jpg',\r\n    italian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/italian.jpg',\r\n    greek: 'https://res.cloudinary.com/contentexs/image/upload/v1580326079/greek.jpg',\r\n    moroccan: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/moroccan.jpg',\r\n    indian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/indian.jpg',\r\n  };\r\n\r\n  const mapCitiesImages = {\r\n    default: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/default.jpg',\r\n    dallas: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/dallas.jpg',\r\n    barcelona: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/barcelona.jpg',\r\n    duino: 'https://res.cloudinary.com/contentexs/image/upload/v1580322154/duino.jpg',\r\n    athens: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/athens.jpg',\r\n    marrakech: 'https://res.cloudinary.com/contentexs/image/upload/v1580322154/marrakech.jpg',\r\n    delhi: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/delhi.jpg',\r\n    bangkok: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/bangkok.jpg',\r\n  };\r\n\r\n  if (categoryType.type === 'Cuisine') {\r\n    imgUrl = mapCuisinesImages[categoryInstance.toLowerCase()] ? mapCuisinesImages[categoryInstance.toLowerCase()] : mapCuisinesImages['default'];\r\n  }\r\n\r\n  if (categoryType.type === 'Location') {\r\n    imgUrl = mapCitiesImages[categoryInstance.toLowerCase()] ? mapCitiesImages[categoryInstance.toLowerCase()] : mapCitiesImages['default'];\r\n  }\r\n  return imgUrl;\r\n}\r\n\r\nfunction getNextOccurrenceDate(occurrences) {\r\n  const today = new Date();\r\n  return occurrences.reduce((result, value) => (result.date - today < value.date - today ? result.date : value.date), today);\r\n}\r\n\r\nfunction getAttendeesCounter(occurrences) {\r\n  return occurrences.reduce((result, value) => (result += parseInt(value.total)), 0);\r\n}\r\n\r\nfunction getOccurrencesInRange(occurrences, startDate, endDate) {\r\n  return occurrences.reduce((result, value) => {\r\n    return value.date > startDate && value.date <= endDate ? (result += 1) : result;\r\n  }, 0);\r\n}\r\n\r\nfunction getOccurrencesCounter(occurrences, minDate) {\r\n  return occurrences.reduce((result, value) => {\r\n    return value.date > minDate ? (result += 1) : result;\r\n  }, 0);\r\n}\r\n\r\nfunction getCategoriesInfo(meals, category) {\r\n  let categories = [];\r\n  const categoryType = category === 'Cuisine' ? { type: category, property: 'cuisineType' } : { type: category, property: 'location.city' };\r\n  const startDate = addDaysToDate(new Date(), -1);\r\n  const endDate = addDaysToDate(startDate, 9);\r\n\r\n  meals.forEach(current => {\r\n    //categoryInstance -> Berlin / Italian\r\n    const categoryInstance = categoryType.property.split('.').reduce((result, value) => {\r\n      return result ? result[value] : undefined;\r\n    }, current);\r\n    if (!categoryInstance) return;\r\n\r\n    let nextDate = getNextOccurrenceDate(current.occurrences);\r\n    let totalAttendees = getAttendeesCounter(current.occurrences);\r\n    if (parseInt(totalAttendees) < parseInt(current.capacity) && nextDate < new Date()) return;\r\n\r\n    let currentWeekOccurrences = getOccurrencesInRange(current.occurrences, startDate, endDate);\r\n    let totalOccurrences = getOccurrencesCounter(current.occurrences, new Date());\r\n    let instance = categories.find(current => current.name === categoryInstance);\r\n\r\n    if (instance) {\r\n      instance.nextAvailableDate = {\r\n        date: instance.nextAvailableDate.date > nextDate ? formatDate(nextDate) : formatDate(instance.nextAvailableDate.date),\r\n        city: current.location.city,\r\n        country: current.location.country,\r\n        cuisine: current.cuisineType,\r\n      };\r\n      instance.variations = _addCategoryInstanceVariety(instance, categoryType, current.cuisineType, current.location.city);\r\n      instance.totalOccurrences += parseInt(totalOccurrences);\r\n      instance.currentWeekOccurrences += parseInt(currentWeekOccurrences);\r\n      instance.totalEvents += 1;\r\n      instance.totalPrice += parseFloat(current.price);\r\n      instance.priceAvg = Math.floor(parseFloat(instance.totalPrice) / parseInt(instance.totalEvents));\r\n    } else {\r\n      instance = {\r\n        name: categoryInstance,\r\n        nextAvailableDate: { date: formatDate(nextDate), city: current.location.city, country: current.location.country, cuisine: current.cuisineType },\r\n        variations: categoryType === 'Cuisine' ? [current.location.city] : [current.cuisineType],\r\n        totalOccurrences: parseInt(totalOccurrences),\r\n        currentWeekOccurrences: parseInt(currentWeekOccurrences),\r\n        totalEvents: 1,\r\n        totalPrice: parseFloat(current.price),\r\n        priceAvg: Math.floor(parseFloat(current.price)),\r\n        imgUrl: _getImageByCategoryType(categoryType, categoryInstance),\r\n      };\r\n\r\n      categories = [...categories, instance];\r\n    }\r\n  });\r\n  return categories;\r\n}\r\n\r\nexport default {\r\n  sortByDate,\r\n  getCategoriesInfo,\r\n  getItemsInRange,\r\n  findAllByKey,\r\n  addDaysToDate,\r\n  formatDate,\r\n};\r\n","import React, { Component } from 'react';\r\nimport MealCategoryPreview from './MealCategoryPreview';\r\nimport UtilitiesService from '../services/UtilitiesService';\r\n\r\nclass MealCategoryList extends Component {\r\n  state = { categories: [], displayCategory: '' };\r\n  componentDidMount() {\r\n    const categories = UtilitiesService.getCategoriesInfo(this.props.meals, this.props.displayCategory);\r\n    this.setState({ categories: categories ? categories : [], displayCategory: this.props.displayCategory });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='main-categories-container category-cards'>\r\n        {this.state.categories &&\r\n          this.state.categories.map((category, idx) => {\r\n            return <MealCategoryPreview key={idx} category={category} displayCategory={this.props.displayCategory}></MealCategoryPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealCategoryList;\r\n","import React, { Component } from 'react';\r\n\r\nexport default class MeetOurHosts extends Component {\r\n  render() {\r\n    return (\r\n      <div className='main-meet-hosts-container'>\r\n        <div className='bg-video'>\r\n          <video className='bg-video-content' autoPlay muted loop>\r\n            <source src='https://res.cloudinary.com/contentexs/video/upload/v1580346727/hosts-bg.mp4' type='video/mp4' /> Your browser is not supported!\r\n          </video>\r\n        </div>\r\n\r\n        <div className='hosts'>\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580359192/002.jpg' alt='Our event hosts' />\r\n            <h2>Mary Smith</h2>\r\n            <h3 className='host-txt'> I'm just someone who likes cooking and for whom sharing food is a form of expression.</h3>\r\n            <blockquote className='host-reviews'>\r\n              Amazing! I had such a fantastic time at Mary's home. She is a great host -- it felt like dinner with family. Wonderful, flavorful food and lots of it. Thank You!\r\n              <cite>Alberto Duncan</cite>\r\n            </blockquote>\r\n          </div>\r\n\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580360371/001.jpg' alt='Our event hosts' />\r\n            <h2>Kathy Wilson</h2>\r\n            <h3 className='host-txt'> I love cooking with my friends, sharing recipes and meeting new people.</h3>\r\n            <blockquote className='host-reviews'>\r\n              Kathy and Luc were incredibly hospitable and full of stories from their incredibly full lives. The boat was beautiful and so was the area we saw while we were on it. One of the best meals I had in my life\r\n              <cite>Lisa Freeman</cite>\r\n            </blockquote>\r\n          </div>\r\n\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580359192/003.jpg' alt='Our event hosts' />\r\n            <h2>Luc Seath</h2>\r\n            <h3 className='host-txt'> Astrophysicist by formation, IT Database Designer by profession and cook by passion.</h3>\r\n            <blockquote className='host-reviews'>\r\n              It was a very cozy and nice atmosphere. The food was prepared with great attention to detail and there was a huge variety of delicacies. Really very very tasty. It was great a pleasure!\r\n              <cite>Rob Smith</cite>\r\n            </blockquote>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { load } from '../actions/MealActions';\r\nimport SocketService from '../services/SocketService';\r\n\r\nimport SearchBar from '../components/SearchBar';\r\nimport MealCategoryList from '../components/MealCategoryList';\r\nimport MeetOurHosts from '../components/MeetOurHosts';\r\n\r\nclass Home extends Component {\r\n  componentDidMount() {\r\n    this.props.load();\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div className='hero-container'>\r\n          <div className='hero-box flex column align-center'>\r\n            <div className='text flex column align-center'>\r\n              <span>let's eat.</span>\r\n              <span>Discover Home Cooking Around The World</span>\r\n            </div>\r\n            <div className='how-to'>\r\n              <ul className='clean-list flex align-center justify-center margin-bottom-20'>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580171632/globe.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>1.</span>Choose Location\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580171632/event.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>2.</span>Select Event\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580172376/calender.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>3.</span>Register\r\n                  </span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className='search-container'>\r\n              <SearchBar placeholder='Where to ?  What are you craving for? '></SearchBar>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='section-container'>\r\n          {this.props.meals.length > 0 && (\r\n            <>\r\n              <div className='section-title-container'>\r\n                <h2>Browse Our Top Locations</h2>\r\n              </div>\r\n              <MealCategoryList meals={this.props.meals} displayCategory='Location'></MealCategoryList>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className='section-container'>\r\n          {this.props.meals.length > 0 && (\r\n            <>\r\n              <div className='section-title-container'>\r\n                <h2>View Our Exciting Cuisines</h2>\r\n              </div>\r\n              <MealCategoryList meals={this.props.meals} displayCategory='Cuisine'></MealCategoryList>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className='section-container'>\r\n          <div className='section-title-container'>\r\n            <h2>Meet Our Hosts</h2>\r\n          </div>\r\n          <MeetOurHosts></MeetOurHosts>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  filter: state.filter.filter,\r\n  meals: state.meal.meals,\r\n  msg :state.socket.msg,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  load,\r\n  \r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass MealPreview extends Component {\r\n\r\n    getNextDateFromNow() {\r\n        let max = -Infinity\r\n        let maxIdx;\r\n        this.props.meal.occurrences.forEach((occurrence, idx) => {\r\n            if (occurrence.date > max && occurrence.date > Date.now()) {\r\n                max = occurrence\r\n                maxIdx = idx\r\n            }\r\n        })\r\n        return { max, maxIdx }\r\n    }\r\n\r\n    getDifferenceInDays(date) {\r\n        const date1 = new Date(date)\r\n        const now = new Date(Date.now())\r\n        const diffInDays = (date1.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)\r\n        return Math.floor(diffInDays);\r\n    }\r\n\r\n    getPromotionMsg() {\r\n        const nextMeal = this.getNextDateFromNow()\r\n        if (this.props.meal.isPromoted) return 'super host';\r\n        else if (this.getDifferenceInDays(nextMeal.max.date) <= 2) return 'hurry up!';\r\n        else if (this.props.meal.capacity - this.props.meal.occurrences[nextMeal.maxIdx].attendees.length < 4) {\r\n            return `${this.props.meal.capacity - this.props.meal.occurrences[nextMeal.maxIdx].attendees.length} places left!`\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getMainMsg() {\r\n        let res;\r\n        if (this.props.renderType === 'location') {\r\n            res = {\r\n                val: this.props.meal.location.city,\r\n                type: 'location'\r\n            }\r\n            return res\r\n        } else {\r\n            res = {\r\n                val: this.props.meal.cuisineType,\r\n                type: 'cuisine'\r\n            }\r\n            return res\r\n        }\r\n    }\r\n\r\n    // onCardClick = (id) => {\r\n    //     this.props.onCardClick(id)\r\n    // }\r\n\r\n    render() {\r\n        const msg = this.getMainMsg();\r\n        const reviews = [...this.props.meal.reviews]\r\n        const variationIcon = (msg.type === 'location') ? 'https://res.cloudinary.com/contentexs/image/upload/v1580170530/dish-round.svg' : 'https://res.cloudinary.com/contentexs/image/upload/v1580171634/location.svg'\r\n        const avgRate = (this.props.meal && reviews) ? this.props.getAvgRate(reviews) : ''\r\n        let nextDate = new Date(this.getNextDateFromNow().max.date)\r\n        const promotionMsg = this.getPromotionMsg()\r\n        nextDate = nextDate.toDateString().split(' ').slice(1, 3).join(' ')\r\n        return this.props.meal && <div className=\"\">\r\n            <div className='category-card-prev'>\r\n                <div className='image-with-superhost'>\r\n                    {promotionMsg && <div className=\"super-host-preview \">{promotionMsg}</div>}\r\n                    <img src={this.props.meal.imgUrls[0]} alt='category' className='card-img-prev'></img>\r\n                </div>\r\n                <h5 className='card-name-prev'>{msg.val}</h5>\r\n                <div className='card-total-one-prev'>\r\n                    <img src={variationIcon} alt='icon'></img>\r\n                    <div>\r\n                        <span>{msg.type === 'location' ? this.props.meal.cuisineType : this.props.meal.location.city + ', ' + this.props.meal.location.country}</span>\r\n                    </div>\r\n                </div>\r\n                <div className='card-hosted-prev'>\r\n                    <img src='https://res.cloudinary.com/contentexs/image/upload/v1580170530/dinner-round.svg' alt='dinner icon'></img>\r\n                    <div>\r\n                        <span> {this.props.meal.title} </span>\r\n                    </div>\r\n                </div>\r\n                <div className='card-next-date-prev'>\r\n                    <img src='https://res.cloudinary.com/contentexs/image/upload/v1580170530/calender-round.svg' alt='calender icon'></img>\r\n                    <div>\r\n                        <span className='title-prev'>Next Event Is On, </span> <span>{nextDate}</span>\r\n                    </div>\r\n                </div>\r\n                <div className='card-avg-price-prev'>\r\n                    <img src='https://res.cloudinary.com/contentexs/image/upload/v1580328925/money.svg' alt='money icon'></img>\r\n                    <div>\r\n                        <span className='title-prev'>Price is </span>\r\n                        <span>\r\n                            ${this.props.meal.price}\r\n                            <small> (per guest)</small>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div className='card-btn-prev'>\r\n                    <Link to={`/meal/${this.props.meal._id}`} className='btn'>\r\n                        <span className=''>View Events</span>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\nexport default MealPreview;","import React, { Component } from 'react';\r\n\r\n\r\nimport { withRouter } from \"react-router\";\r\nimport MealPreview from './MealPreview'\r\n\r\nclass MealList extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"main-categories-container category-cards-list\">\r\n        {this.props.meals.map(meal => (\r\n          <div  key={meal._id}>\r\n            <MealPreview onCardClick={this.props.onCardClick} meal={meal} getAvgRate={this.props.getAvgRate} renderType={this.props.renderType} />\r\n          </div>\r\n        ))}\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(MealList);\r\n\r\n\r\n\r\n\r\n","import React from \"react\";\r\n\r\nexport default function BadgePreview(props) {\r\n    return (\r\n        <div className={props.isSelected}  onClick={props.onBadgeClick}>\r\n            <h3 className=\"\">{props.badge}</h3>\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react';\r\n\r\nimport BadgePreview from './BadgePreview'\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass BadgeList extends Component {\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <span className=\"badge-list-container\">\r\n                {this.props.badges && this.props.badges.map((badge, idx) => {\r\n                    return <div className=\"badge-card-container \" key={idx}>\r\n                        <BadgePreview  isSelected={badge === this.props.selectedBadge ? 'selected' : ''} onBadgeClick={this.props.onBadgeClick} badge={badge} />\r\n                    </div>\r\n                })}\r\n            </span>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(BadgeList);\r\n","import React from 'react';\r\nimport ReactLoading from 'react-loading';\r\n\r\nexport default function Spinner({ type, color }) {\r\n  return <ReactLoading type={type} color={color} height={100} width={100} />;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { load, loadCuisines, loadCities, loadMealsByLocation, loadMealsByCuisine } from '../actions/MealActions';\r\nimport { setFilter } from '../actions/FilterActions';\r\n\r\nimport MealList from '../components/MealList';\r\nimport BadgeList from '../components/BadgeList';\r\nimport Spinner from '../components/Spinner';\r\nimport SearchBar from '../components/SearchBar';\r\n\r\nexport class MealApp extends Component {\r\n  state = {\r\n    selectedBadge: '',\r\n    renderType: '',\r\n    isLoading: true\r\n  };\r\n\r\n  async componentDidMount() {\r\n    await this.resetFilterDefinitions();\r\n    if (this.props.location.pathname.includes('results')) {\r\n      this.setState({ renderType: 'results' });\r\n      const { results } = this.props.match.params;\r\n      await this.props.setFilter({ ...this.filter, tags: results });\r\n      await this.loadMeals();\r\n    } else {\r\n      await this.loadMeals();\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (JSON.stringify(prevProps.location.pathname) !== JSON.stringify(this.props.location.pathname)) {\r\n      await this.loadMeals();\r\n    }\r\n  }\r\n\r\n  async componentWillUnmount() {\r\n    await this.resetFilterDefinitions();\r\n  }\r\n\r\n  resetFilterDefinitions = async () => {\r\n    await this.props.setFilter({\r\n      userId: '',\r\n      at: '',\r\n      type: '',\r\n      location: {\r\n        city: '',\r\n        country: '',\r\n      },\r\n      tags: '',\r\n    });\r\n  }\r\n\r\n  getAvgRate = reviews => {\r\n    return reviews.reduce((acc, currReview) => acc + parseInt(currReview.rate), 0) / reviews.length;\r\n  };\r\n\r\n  load = async () => {\r\n    await this.props.load(this.props.filter)\r\n  }\r\n\r\n  loadMeals = async () => {\r\n    if (this.props.location.pathname.includes('results')) {\r\n      const { results } = this.props.match.params;\r\n      await this.props.setFilter({ ...this.filter, tags: results });\r\n      this.setState({ isLoading: true })\r\n      await this.load();\r\n      this.setState({ isLoading: false })\r\n    } else {\r\n      let badgeName = '';\r\n      if (this.props.location.pathname.includes('location')) {\r\n        badgeName = 'location';\r\n      } else if (this.props.location.pathname.includes('cuisine')) {\r\n        badgeName = 'cuisine';\r\n      }\r\n      this.setBadges(badgeName);\r\n      this.setState({ renderType: badgeName });\r\n      if (badgeName === 'location') {\r\n        const { location } = this.props.match.params;\r\n        if (!location) {\r\n          //load meals grouped by location\r\n          await this.props.loadMealsByLocation();\r\n          this.setState({ isLoading: false })\r\n        } else {\r\n          //load meals from specific location\r\n          await this.props.setFilter({ ...this.props.filter, location: { ...this.props.location, city: location } })\r\n          this.setState({ isLoading: true })\r\n          await this.load();\r\n          this.setState({ isLoading: false })\r\n        }\r\n      } else {\r\n        const { cuisine } = this.props.match.params;\r\n        if (!cuisine) {\r\n          //load meals grouped by cuisine\r\n          this.props.loadMealsByCuisine();\r\n          this.setState({ isLoading: false })\r\n        } else {\r\n          await this.props.setFilter({ ...this.props.filter, type: cuisine })\r\n          //load meals from specific cuisine\r\n          this.setState({ isLoading: true })\r\n          await this.load();\r\n          this.setState({ isLoading: false })\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  setBadges = async badgeType => {\r\n    if (badgeType === 'location' && !(this.props.cities.length > 0)) {\r\n      await this.props.loadCities();\r\n    } else if (badgeType === 'cuisine' && !(this.props.cuisines.length > 0)) {\r\n      await this.props.loadCuisines();\r\n    }\r\n  };\r\n\r\n  onLocationClick = async event => {\r\n    const city = event.target.innerText;\r\n    await this.resetFilterDefinitions();\r\n    await this.props.setFilter({ ...this.props.filter, location: { ...this.props.filter.location, city } });\r\n    this.props.history.push(`/meal/location/${city}`);\r\n    await this.loadMeals();\r\n  };\r\n\r\n  onCuisineClick = async event => {\r\n    const cuisine = event.target.innerText;\r\n    await this.resetFilterDefinitions();\r\n    await this.props.setFilter({ ...this.props.filter, type: cuisine });\r\n    this.props.history.push(`/meal/cuisine/${cuisine}`);\r\n    await this.loadMeals();\r\n  };\r\n\r\n  onCardClick = id => {\r\n    this.props.history.push(`/meal/${id}`);\r\n  };\r\n\r\n  render() {\r\n    const isResultsUrl = this.props.location.pathname.includes('results');\r\n    return (\r\n      <div className='container'>\r\n        <SearchBar></SearchBar>\r\n        {this.state.isLoading && (\r\n          <div className='spinner-container'>\r\n            <Spinner type='spin'></Spinner>\r\n          </div>\r\n        )}\r\n        {this.props.cuisines && this.state.renderType === 'cuisine' && !isResultsUrl && <BadgeList selectedBadge={this.state.selectedBadge} onBadgeClick={this.onCuisineClick} badges={this.props.cuisines}></BadgeList>}\r\n        {this.props.cities && this.state.renderType === 'location' && !isResultsUrl && <BadgeList selectedBadge={this.state.selectedBadge} onBadgeClick={this.onLocationClick} badges={this.props.cities}></BadgeList>}\r\n        {this.props.meals.length > 0 && this.state.renderType && !this.state.isLoading && <MealList onCardClick={this.onCardClick} onCuisineClick={this.onCuisineClick} onLocationClick={this.onLocationClick} renderType={this.state.renderType} meals={this.props.meals} getAvgRate={this.getAvgRate}></MealList>}\r\n        {!this.state.isLoading && this.props.meals.length === 0 && isResultsUrl && <div>Your search has no results</div>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  meals: state.meal.meals,\r\n  filter: state.filter.filter,\r\n  cities: state.meal.cities,\r\n  cuisines: state.meal.cuisines,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  load,\r\n  setFilter,\r\n  loadCuisines,\r\n  loadCities,\r\n  loadMealsByLocation,\r\n  loadMealsByCuisine,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealApp);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport { SnackbarContent } from '@material-ui/core';\r\n\r\nexport class Notification extends Component {\r\n  //this CMP will get the notification msg from props\r\n  //will be rendered inside each component which can cause any notification\r\n\r\n  state = {\r\n    open: true,\r\n    vertical: 'top',\r\n    horizontal: 'center',\r\n    style:{\r\n      backgroundColor: '#c0c0c0',\r\n      // color:'white'\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.updateOpenState();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    //if the prevprops open property is different from the current state's open property, update it\r\n  }\r\n\r\n  updateOpenState() {\r\n    this.setState({ ...this.state, open: this.props.open });\r\n  }\r\n\r\n  handleClick = newState => {\r\n    this.setState({ open: true, ...newState });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ ...this.state, open: false });\r\n  };\r\n\r\n  render() {\r\n    const { vertical, horizontal, open } = this.state;\r\n    return (\r\n      <div>\r\n        <Snackbar  anchorOrigin={{ vertical, horizontal }} key={`${vertical},${horizontal}`} open={open} onClose={this.handleClose}  >\r\n          <SnackbarContent style={this.state.style} message={this.props.msg}>\r\n            \r\n          </SnackbarContent>\r\n        </Snackbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Notification);\r\n","import { createSelector } from 'reselect';\r\n\r\nimport UtilitiesService from '../services/UtilitiesService';\r\n\r\nconst loggedInUserSelector = state => state.user.loggedInUser;\r\nconst selectedMealSelector = state => state.meal.selectedMeal;\r\n\r\nexport const getMealDetails = createSelector([selectedMealSelector, loggedInUserSelector], (selectedMeal, loggedInUser) => {\r\n  let detailsMeal = {},\r\n    availableOccurrences = [];\r\n\r\n  if (!selectedMeal) return null;\r\n\r\n  let meal = { ...selectedMeal };\r\n  availableOccurrences = meal.occurrences && meal.occurrences.length > 0 ? UtilitiesService.getItemsInRange(meal.occurrences, new Date()) : [];\r\n  if (!availableOccurrences || availableOccurrences.length < 1) return { errorMsg: 'There are no available events' };\r\n\r\n  detailsMeal = {\r\n    storeMeal: meal,\r\n    id: meal._id,\r\n    host: {\r\n      _id: meal.hostedBy._id,\r\n      fullName: meal.hostedBy.fullName,\r\n      imgUrl: meal.hostedBy.imgUrl,\r\n    },\r\n    messages: {\r\n      noAvailableOccurrence: 'We are sorry, It seems we made a mistake and this event is not active. You will be redirected to our events page to continue browsing.',\r\n      eventSoldOut: 'We are sorry, It seems we made a mistake and this event is all sold out. You will be redirected to our events page to continue browsing.',\r\n      hasAttendees: 'Meet the other guests',\r\n      noAttendees: 'We will be delighted to have you as our guest. Please register now.',\r\n      userRegistered: 'You are booked to this event',\r\n      pleaseLogin: 'Please login before proceeding.',\r\n    },\r\n    registrationCart: {},\r\n    selectedOccurance: {},\r\n    availableDates: {},\r\n    isPromoted: meal.isPromoted,\r\n    eventSetup: {\r\n      capacity: parseInt(meal.capacity),\r\n      cuisineType: meal.cuisineType,\r\n      mealType: meal.mealType,\r\n      startTime: meal.mealType === 'Dinner' ? '6:00PM' : meal.mealType === 'Lunch' ? '12:00PM' : '9:00AM',\r\n      endTime: meal.mealType === 'Dinner' ? '9:00PM' : meal.mealType === 'Lunch' ? '4:00PM' : '11:00AM',\r\n    },\r\n    price: parseFloat(meal.price),\r\n    currency: meal.currency,\r\n    title: meal.title,\r\n    description: meal.description,\r\n    eventMenu: meal.menu,\r\n    location: {\r\n      country: meal.location.country,\r\n      city: meal.location.city,\r\n      address: meal.location.address,\r\n      lat: meal.location.lat,\r\n      lng: meal.location.lng,\r\n    },\r\n    images: meal.imgUrls,\r\n    hostReviews: meal.reviews.map(review => {\r\n      return {\r\n        user: {\r\n          _id: review.byUser._id,\r\n          fullName: review.byUser.fullName,\r\n          imgUrl: review.byUser.imgUrl,\r\n        },\r\n        date: review.at,\r\n        txt: review.txt,\r\n        rate: parseInt(review.rate),\r\n      };\r\n    }),\r\n    occurrences: setOccurrences(availableOccurrences, meal.price, meal.capacity, loggedInUser ? loggedInUser._id : 0),\r\n  };\r\n  detailsMeal.occurrences.sort(UtilitiesService.sortByDate);\r\n  detailsMeal.selectedOccurance = setSelectedOccurance(detailsMeal.occurrences);\r\n  detailsMeal.availableDates = setAvailableDates(detailsMeal.occurrences, detailsMeal.selectedOccurance);\r\n  detailsMeal.eventAttendees = getEventAttendees(detailsMeal.selectedOccurance);\r\n  detailsMeal.hostRating = setHostRating(detailsMeal.hostReviews);\r\n  return detailsMeal;\r\n});\r\n\r\nfunction setOccurrences(occurrences, price, capacity, userId) {\r\n  return occurrences.map(occurrence => {\r\n    let totalReservations = 0;\r\n    return {\r\n      id: occurrence.id,\r\n      date: occurrence.date,\r\n      reservations: occurrence.attendees.map(attendee => {\r\n        totalReservations += parseInt(attendee.numOfAttendees);\r\n        return {\r\n          user: {\r\n            _id: attendee._id,\r\n            fullName: attendee.fullName,\r\n            imgUrl: attendee.imgUrl,\r\n          },\r\n          occurrenceAttendees: parseInt(attendee.numOfAttendees),\r\n          occurrenceTotalPrice: parseInt(attendee.numOfAttendees) * parseInt(price),\r\n          isLoggedInUser: userId === attendee._id ? true : false,\r\n        };\r\n      }),\r\n      totalReservations: totalReservations,\r\n      seatsLeft: parseInt(capacity) - totalReservations,\r\n    };\r\n  });\r\n}\r\n\r\nfunction setSelectedOccurance(occurrences, selectedDate = null) {\r\n  let selectedOccurance = null;\r\n  if (selectedDate) return occurrences.find(occurrence => new Date(occurrence.date).getTime() === new Date(selectedDate).getTime());\r\n  else {\r\n    selectedOccurance = occurrences.find(occurrence => {\r\n      let isLoggedIn = UtilitiesService.findAllByKey(occurrence, 'isLoggedInUser');\r\n      return isLoggedIn === true;\r\n    });\r\n    if (selectedOccurance) return selectedOccurance;\r\n    else {\r\n      return occurrences.find(occurrence => occurrence.seatsLeft > 0);\r\n    }\r\n  }\r\n}\r\n\r\nfunction setAvailableDates(occurrences, selectedOccurance) {\r\n  var result = [];\r\n  return occurrences.reduce((acc, occurrence) => {\r\n    if (!result.includes(occurrence.date)) {\r\n      result.push(occurrence.date);\r\n      let isSelected = selectedOccurance && occurrence.id === selectedOccurance.id;\r\n      acc.push({ date: occurrence.date, isSelected: isSelected });\r\n    }\r\n    return acc;\r\n  }, []);\r\n}\r\n\r\nfunction setHostRating(reviews) {\r\n  let totalRated = reviews ? reviews.length : 0;\r\n  let avgRate = 0;\r\n  if (totalRated > 0) {\r\n    avgRate = reviews.reduce((result, current) => result + parseInt(current.rate), 0) / totalRated;\r\n  }\r\n  return { totalRated: totalRated, avgRate: avgRate > 0 ? avgRate.toFixed(1) : 0 };\r\n}\r\n\r\nfunction getEventAttendees(occurrence) {\r\n  var result = [];\r\n  return occurrence.reservations.reduce((acc, reservation) => {\r\n    if (!result.includes(reservation.user._id)) {\r\n      result.push(reservation.user._id);\r\n      acc.push(reservation.user);\r\n    }\r\n    return acc;\r\n  }, []);\r\n}\r\n\r\n/*\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  on Load: ==> \r\n            for both situations: \r\n                get eventId\r\n                check/validate event & occurrences: \r\n                  1. all occurrences are greater then today\r\n                  2. every occurrence has at least one available slot \r\n                      2.1. - for logged in users - will be able to see also - occurrences that have \r\n                             no more available seats but has still not passed\r\n\r\n            if user is not logged in:\r\n                load - data -> don't allow to register to an event or write a review\r\n                set the nearest occurrence as the one which is displayed\r\n\r\n            if user is logged in:\r\n\r\n                check if the user is registered to one of the occurrences\r\n\r\n                    if not registered  ->  set the nearest occurrence as the one which is displayed\r\n                                           enable both registration form & review form\r\n\r\n                    if registered to event -> populate data for the nearest registered event in the registration form \r\n                                              display a message to the user in the registration form - \r\n                                              that he registered to that event on - bla bla ...\r\n\r\n  on change date ==> re-render the data that is relvent to the specific occurrence  + validate available slots\r\n\r\n        --- perform process from load --- get only valid occurrences  + chk if user is registered to current event --> get data from DB ??\r\n       \r\n        --- populate the following:  number of available slots , registration form data\r\n\r\n  on register to an event :\r\n        maybe - change to one phase ? or add to another prop -->\r\n            on input change -> save to -> 'add-to-cart' list \r\n            on button click -> if both fields are populated -> ask user to approve \r\n            on button click approve --> register user\r\n                                        clear the 'add-to-cart' list  \r\n  \r\n  */\r\n","import React, { Component } from 'react';\r\n\r\nclass ImageGallery extends Component {\r\n  render() {\r\n    const { images } = this.props;\r\n\r\n    return (\r\n      <div className='gallery-container '>\r\n        <div className='gallery'>\r\n          <figure className='gallery-item gallery-item-1'>\r\n            <img alt='' name='main' className='gallery-img' src={images[0]}></img>\r\n          </figure>\r\n          <figure className='gallery-item gallery-item-2'>\r\n            <img alt='' name='one' className='gallery-img' src={images[1]}></img>\r\n          </figure>\r\n          <figure className='gallery-item gallery-item-3'>\r\n            <img alt='' name='two' className='gallery-img' src={images[2]}></img>\r\n          </figure>\r\n          <figure className='gallery-item gallery-item-4'>\r\n            <img alt='' name='three' className='gallery-img' src={images[3]}></img>\r\n          </figure>\r\n          <figure className='gallery-item gallery-item-5'>\r\n            <img alt='' name='four' className='gallery-img' src={images[4]}></img>\r\n          </figure>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nclass MealPageNav extends Component {\r\n  render() {\r\n    let { hostRating, eventSetup } = this.props;\r\n    return (\r\n      <div className='card-simple nav-container'>\r\n        <div className='top-box flex '>\r\n          <a className='btn' href='#menu'>\r\n            Menu\r\n          </a>\r\n          <a className='btn' href='#reviews'>\r\n            Reviews\r\n          </a>\r\n          <a className='btn' href='#location'>\r\n            Location\r\n          </a>\r\n        </div>\r\n        <div className='bottom-box flex'>\r\n          <div className={hostRating.avgRate && hostRating.avgRate > 0 ? 'rate' : 'hide'}>\r\n            <i className='icon-small fas fa-star'></i>\r\n            <span>{hostRating.avgRate}</span>\r\n            <span>({hostRating.totalRated})</span>\r\n          </div>\r\n          <div className='meal-period'>\r\n            <span>{eventSetup.startTime}</span> - <span>{eventSetup.endTime}</span>\r\n          </div>\r\n          <div>{eventSetup.mealType}</div>\r\n          <div>{eventSetup.cuisineType}</div>\r\n          <div className='meal-guests'>\r\n            <span>{eventSetup.capacity}</span>\r\n            <span> Guests </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\nconst mapDispatchToProps = {};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealPageNav);\r\n\r\n// import React, { Component } from 'react';\r\n// import { connect } from 'react-redux';\r\n\r\n// class MealPageNav extends Component {\r\n//   state = { startTime: '', endTime: '', minCapacity: '', totalRates: 0, avgRate: 0, rateClass: 'hide' };\r\n\r\n//   componentDidMount() {\r\n//     const { meal } = this.props;\r\n//     let startTime = meal.mealType === 'Dinner' ? '6:00PM' : meal.mealType === 'Lunch' ? '12:00PM' : '9:00AM';\r\n//     let endTime = meal.mealType === 'Dinner' ? '9:00PM' : meal.mealType === 'Lunch' ? '4:00PM' : '11:00AM';\r\n//     let minCapacity = Math.floor(parseInt(meal.capacity) / 2);\r\n//     let totalRates = meal.reviews.length;\r\n//     let avgRate = 0;\r\n//     let rateClass = 'hide';\r\n\r\n//     if (totalRates > 0) {\r\n//       avgRate = meal.reviews.reduce((result, current) => result + parseInt(current.rate), 0) / meal.reviews.length;\r\n\r\n//       if (avgRate) rateClass = 'rate';\r\n//     }\r\n\r\n//     this.setState({\r\n//       startTime: startTime,\r\n//       endTime: endTime,\r\n//       minCapacity: minCapacity,\r\n//       totalRates: totalRates,\r\n//       avgRate: avgRate,\r\n//       rateClass: rateClass,\r\n//     });\r\n//   }\r\n\r\n//   render() {\r\n//     let { meal } = this.props;\r\n//     return (\r\n//       <div className='nav-container'>\r\n//         <div className='top-box flex '>\r\n//           <a className='btn' href='#menu'>\r\n//             Menu\r\n//           </a>\r\n//           <a className='btn' href='#reviews'>\r\n//             Reviews\r\n//           </a>\r\n//           <a className='btn' href='#location'>\r\n//             Location\r\n//           </a>\r\n//         </div>\r\n\r\n//         <div className='bottom-box flex'>\r\n//           <div className={this.state.rateClass}>\r\n//             <i className='icon-small fas fa-star'></i>\r\n//             <span>{this.state.avgRate.toFixed(1)}</span>\r\n//             <span>({this.state.totalRates})</span>\r\n//           </div>\r\n//           <div className='meal-period'>\r\n//             <span>{this.state.startTime}</span> - <span>{this.state.endTime}</span>\r\n//           </div>\r\n//           <div>{meal.mealType}</div>\r\n//           <div>{meal.cuisineType}</div>\r\n//           <div className='meal-guests'>\r\n//             <span>{meal.capacity}</span>\r\n//             <span> Guests </span>\r\n//           </div>\r\n//           {/* <div className='available-places'>\r\n//             <span> Available Places-{meal.capacity - meal.currCapacity}</span>\r\n//           </div> */}\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// const mapStateToProps = state => ({\r\n//   loggedInUser: state.user.loggedInUser,\r\n// });\r\n\r\n// const mapDispatchToProps = {};\r\n// export default connect(mapStateToProps, mapDispatchToProps)(MealPageNav);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Moment from 'moment';\r\n\r\nclass MealPayment extends Component {\r\n  state = { meal: [], selectedOccurance: {}, numOfAttendees: 0, totalPrice: 0, date: '', availableSeats: 0, availableText: '', registerCounter: 0, buttonText: '', paymentClass: 'hide', displayMsg: 'hide', msg: '' };\r\n\r\n  componentDidMount() {\r\n    let { meal } = this.props;\r\n    let userOccurrence = meal.selectedOccurance.reservations.find(reservation => reservation.isLoggedInUser);\r\n\r\n    this.setState({\r\n      meal: meal,\r\n      msg: userOccurrence && userOccurrence.isLoggedInUser ? meal.messages.userRegistered : '',\r\n      displayMsg: userOccurrence && userOccurrence.isLoggedInUser ? '' : 'hide',\r\n      selectedOccurance: meal.selectedOccurance,\r\n      numOfAttendees: userOccurrence && userOccurrence.isLoggedInUser ? userOccurrence.occurrenceAttendees : 0,\r\n      totalPrice: userOccurrence && userOccurrence.isLoggedInUser ? userOccurrence.occurrenceTotalPrice : 0,\r\n      date: Moment(meal.selectedOccurance.date).format('MM-DD-YY'),\r\n      availableSeats: parseInt(meal.selectedOccurance.seatsLeft),\r\n      availableText: `${meal.selectedOccurance.seatsLeft} available seats`,\r\n      registerCounter: 0,\r\n      buttonText: userOccurrence && userOccurrence.isLoggedInUser ? 'UPDATE EVENT' : 'REGISTER EVENT',\r\n      paymentClass: userOccurrence && userOccurrence.isLoggedInUser ? 'payment' : 'hide',\r\n    });\r\n  }\r\n\r\n  handleChange = ev => {\r\n    debugger;\r\n    ev.preventDefault();\r\n    let name = ev.target.name;\r\n    let value = ev.target.value;\r\n    if (name === 'numOfAttendees' && this.state.numOfAttendees !== value) {\r\n      this.setState({\r\n        numOfAttendees: parseInt(value),\r\n        totalPrice: parseInt(value) * parseInt(this.state.meal.price),\r\n        availableSeats: parseInt(this.state.availableSeats) - parseInt(value),\r\n        availableText: `${parseInt(this.state.availableSeats) - parseInt(value)} available seats`,\r\n      });\r\n    } else {\r\n      debugger;\r\n      if (this.state.date !== value) {\r\n        debugger;\r\n        let selectedOccurance = this.props.meal.occurrences.find(current => {\r\n          return Moment(current.date).format('MM-DD-YY') === value;\r\n        });\r\n\r\n        if (this.props.loggedInUser) {\r\n          let userOccurrence = selectedOccurance.reservations.find(reservation => reservation.user._id === this.props.loggedInUser._id);\r\n          if (userOccurrence) userOccurrence.isLoggedInUser = true;\r\n        }\r\n\r\n        this.setState({\r\n          date: value,\r\n          selectedOccurance: selectedOccurance,\r\n          availableSeats: parseInt(selectedOccurance.seatsLeft) - parseInt(this.state.numOfAttendees),\r\n          availableText: `${parseInt(selectedOccurance.seatsLeft) - parseInt(this.state.numOfAttendees)} available seats`,\r\n          msg: '',\r\n          displayMsg: 'hide',\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  onEventRegistration = ev => {\r\n    ev.preventDefault();\r\n    debugger;\r\n    if (this.state.registerCounter === 0) {\r\n      this.setState({ registerCounter: 1, buttonText: 'BOOK EVENT', paymentClass: 'payment' });\r\n    } else if (this.state.registerCounter >= 1 && this.state.numOfAttendees !== 0) {\r\n      if (!this.props.loggedInUser) {\r\n        console.log('Meal Reservation - user not logged in');\r\n        this.setState({ msg: this.state.meal.messages.pleaseLogin, displayMsg: '' });\r\n        return;\r\n      }\r\n      debugger;\r\n      this.setState({ registerCounter: 0, msg: '', displayMsg: 'hide' });\r\n      this.props.onEventRegistration({ id: this.state.selectedOccurance.id, date: +Moment(this.state.date, 'MM-DD-YY'), numOfAttendees: this.state.numOfAttendees });\r\n    }\r\n  };\r\n\r\n  render() {\r\n\r\n    const { meal } = this.props;\r\n    console.log('MealPayment - props', this.props);\r\n    console.log('MealPayment - state', this.state);\r\n\r\n    return (<div className='card-simple payment-container'>\r\n      <div className='price'>\r\n        <span>$</span>\r\n        {meal.price}\r\n        <small>per guest</small>\r\n      </div>\r\n      <div>\r\n        <hr />\r\n      </div>\r\n      <div className='details-container'>\r\n        <div className='msg'>\r\n          <span className={this.state.displayMsg}>{this.state.msg}</span>\r\n        </div>\r\n        <div className='date'>\r\n          <label htmlFor='date'>Date</label>\r\n          <select name='date' onChange={this.handleChange} value={this.state.date}>\r\n            {meal.availableDates.map((current, idx) => {\r\n              return (\r\n                <option key={idx} value={Moment(current.date).format('MM-DD-YY')}>\r\n                  {Moment(current.date).format('MM-DD-YY')}\r\n                </option>\r\n              );\r\n            })}\r\n          </select>\r\n        </div>\r\n        <div className='guests'>\r\n          <label htmlFor='numOfAttendees'>Number of Guests</label>\r\n          <input type='number' placeholder='Number of Guests' min='1' name='numOfAttendees' onChange={this.handleChange} value={this.state.numOfAttendees === 0 ? '' : this.state.numOfAttendees}></input>\r\n          <small className='small-text'>{this.state.availableText}</small>\r\n        </div>\r\n        <div className={this.state.paymentClass}>\r\n          <ul className='clean-list'>\r\n            <li>\r\n              <span>\r\n                ${meal.price} x {this.state.numOfAttendees}\r\n              </span>\r\n              <span>guests</span>\r\n            </li>\r\n            <li>\r\n              <span>Total</span>\r\n              <span>${this.state.totalPrice}</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div>\r\n          <hr />\r\n        </div>\r\n        <div className='details-container'>\r\n          <div className='date'>\r\n            <label htmlFor='date'>Date</label>\r\n            <input name='date' list='occurrences' placeholder='Select Event Date' value={this.state.date} onChange={this.handleChange} title='Select one of the event dates' className='input-date'></input>\r\n            <datalist id='occurrences'>\r\n              {meal.availableDates.map((current, idx) => {\r\n                // if (current != this.state.date)\r\n                return (\r\n                  <option key={idx} value={Moment(current.date).format('MM-DD-YY')}>\r\n                    {Moment(current.date).format('MM-DD-YY')}\r\n                  </option>\r\n                );\r\n              })}\r\n            </datalist>\r\n          </div>\r\n          <div className='guests'>\r\n            <label htmlFor='numOfAttendees'>Number of Guests</label>\r\n            <input type='number' placeholder='Number of Guests' min='1' name='numOfAttendees' onChange={this.handleChange} value={this.state.numOfAttendees === 0 ? '' : this.state.numOfAttendees}></input>\r\n            <small className='small-text'>{this.state.availableText}</small>\r\n          </div>\r\n          <div className={this.state.paymentClass}>\r\n            <ul className='clean-list'>\r\n              <li>\r\n                <span>\r\n                  ${meal.price} x {this.state.numOfAttendees}\r\n                </span>\r\n                <span>guests</span>\r\n              </li>\r\n              <li>\r\n                <span>Total</span>\r\n                <span>${this.state.totalPrice}</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <button onClick={this.onEventRegistration} className='button btn-main'>\r\n              {this.state.buttonText}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(MealPayment);","import React, { Component } from 'react';\r\n\r\nclass ShowHideText extends Component {\r\n  state = { text: '', showLink: 'hide', linkText: '' };\r\n  componentDidMount() {\r\n    let textLength = this.props.text.length;\r\n    if (Math.floor(textLength / 60) > this.props.showRows) {\r\n      let text = this.props.text.slice(0, 180);\r\n      this.setState({ text: `${text} ...`, showLink: '', linkText: 'show more' });\r\n    } else {\r\n      this.setState({ text: this.props.text });\r\n    }\r\n  }\r\n\r\n  toggleText = ev => {\r\n    ev.preventDefault();\r\n    if (this.state.linkText === 'show more') {\r\n      this.setState({ text: this.props.text, showLink: '', linkText: 'show less' });\r\n    } else {\r\n      let text = this.props.text.slice(0, 180);\r\n      this.setState({ text: `${text} ...`, showLink: '', linkText: 'show more' });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n       <div className='show-hide-text-container'>\r\n        <p>\r\n          {this.state.text}\r\n          <a className={this.state.showLink} href='#' onClick={this.toggleText}>\r\n            {this.state.linkText}\r\n          </a>\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShowHideText;\r\n","import React, { Component } from 'react';\r\n\r\nclass MealMenu extends Component {\r\n  render() {\r\n    const { menu } = this.props;\r\n    return (\r\n      <div className=' menu-main-container'>\r\n        <div className='card-simple menu-container'>\r\n          <div className='card-title menu-section'>\r\n            <h3>First Course</h3>\r\n            {menu.firstCourse.map((course, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {course}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='card-title menu-section'>\r\n            <h3>Main Course</h3>\r\n            {menu.mainCourse.map((course, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {course}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='card-title menu-section'>\r\n            <h3>Dessert</h3>\r\n            {menu.desserts.map((dessert, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {dessert}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='card-title menu-section'>\r\n            <h3>Beverages</h3>\r\n            {menu.beverages.map((beverage, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {beverage}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealMenu;\r\n","import React, { Component } from 'react';\r\n\r\nclass AttendeesPreview extends Component {\r\n  render() {\r\n    const { attendee } = this.props;\r\n    return (\r\n      <div className='frame'>\r\n        <div className='card-simple center'>\r\n          <div className='profile'>\r\n            <div className='image'>\r\n              <div className='circle-1'></div>\r\n              <div className='circle-2'></div>\r\n              <img src={attendee.imgUrl} width='70' height='70' alt={attendee.fullName} />\r\n            </div>\r\n            <div className='name'>{attendee.fullName}</div>\r\n            <div className='address'>US, New-York</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AttendeesPreview;\r\n","import React, { Component } from 'react';\r\nimport AttendeesPreview from './AttendeesPreview';\r\n\r\nclass AttendeesList extends Component {\r\n  render() {\r\n    const { attendees } = this.props;\r\n    return (\r\n      <div className='main-attendees-container'>\r\n        {attendees &&\r\n          attendees.map((attendee, idx) => {\r\n            return <AttendeesPreview key={idx} attendee={attendee}></AttendeesPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default AttendeesList;\r\n","\r\n\r\nexport default {\r\n    addMsg\r\n}\r\n\r\nexport function addMsg(newMsg) {\r\n  \r\n  return async dispatch => {\r\n    // const msg = await MealService.query(newMsg);\r\n    const msg = newMsg\r\n    console.log('SocketAction -> msg',msg);\r\n      dispatch({ type: 'ADD_MSG', msg });\r\n    };\r\n  }\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport SocketService from '../services/SocketService';\r\nimport { addMsg } from '../actions/SocketAction';\r\nvar id =1\r\n\r\nclass ReviewForm extends Component {\r\n  state = {\r\n    email: '',\r\n    txt: '',\r\n    rate: 0,\r\n    starClass: 'icon-medium color-gray far fa-star',\r\n    starSelected: 'icon-medium color-yellow far fa-star',\r\n    msgs: ''\r\n  };\r\n\r\n  onSaveReviewForm = ev => {\r\n    ev.preventDefault();\r\n    this.props.onSaveReviewForm({ email: this.state.email, txt: this.state.txt, rate: this.state.rate });\r\n  };\r\n\r\n  onToggleStar = ev => {\r\n    ev.preventDefault();\r\n    let id = ev.target.id;\r\n    this.setState({ rate: id });\r\n  };\r\n\r\n  onHandleChange = ev => {\r\n    ev.preventDefault();\r\n    let name = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='card-container-lg card-container-horizontal flex align-center justify-center'>\r\n        <div className='card-background-lg main-review-form-container flex column align-end'>\r\n          <i className='icon-medium color-gray fas fa-times' title='Close' onClick={this.props.onCloseReviewForm}></i>\r\n          <form className='review-form flex column align-center' onSubmit={this.onSaveReviewForm}>\r\n            <h3>How satisfied are you?</h3>\r\n            <div className='rating flex margin-bottom-20'>\r\n              {Array.from(Array(5), (_, idx) => {\r\n                return <i key={idx} id={idx + 1} className={idx < this.state.rate ? this.state.starSelected : this.state.starClass} name={idx + 1} onClick={this.onToggleStar}></i>;\r\n              })}\r\n            </div>\r\n              <span>{this.state.msgs}</span>\r\n            <h3>We would love to hear what you think</h3>\r\n            <div className='email'>\r\n              <input type='email' placeholder='Email' name='email' onChange={this.onHandleChange} required></input>\r\n            </div>\r\n            <div className='review'>\r\n              <textarea className='' id='review' name='txt' onChange={this.onHandleChange} min='5' placeholder='Tell us what you think'></textarea>\r\n            </div>\r\n            <div className='save'>\r\n              <button className='button btn-main'>SAVE</button>\r\n            </div>\r\n          </form>\r\n          <h4 className='review-h5'>Thanks for your feedback</h4>\r\n        </div>\r\n    \r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  msg :state.socket.msg\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  addMsg\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewForm);","import React, { Component } from 'react';\r\nimport Moment from 'moment';\r\nimport SocketService from '../services/SocketService';\r\n\r\nclass ReviewPreview extends Component {\r\n\r\n\r\n  render() {\r\n    const { review } = this.props;\r\n    return (\r\n      <div className='review-container '>\r\n        {review && (\r\n          <blockquote>\r\n            <header>\r\n              <span data-rating={review.rate || 0}>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n              </span>\r\n              <strong>Event Name </strong>\r\n              <span>{Moment(review.date).format('MM-DD-YY')}</span>\r\n              <span>\r\n                By <em>{review.user.fullName}</em>\r\n              </span>\r\n              <span>Verified Review</span>\r\n            </header>\r\n            <p>{review.txt}</p>\r\n          </blockquote>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ReviewPreview;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ReviewPreview from './ReviewPreview';\r\n\r\nexport class ReviewList extends Component {\r\n  render() {\r\n    const { reviews } = this.props;\r\n    return (\r\n      <div className='main-reviews-container'>\r\n        {reviews &&\r\n          reviews.map((review, idx) => {\r\n            return <ReviewPreview key={idx} review={review}></ReviewPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewList);\r\n","import React, { Component } from 'react';\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\n\r\nconst GOOGLE_API_KEY = 'AIzaSyDt708aK1FKYJTOT61i_xrzY9R3UD3_6Lw&&';\r\n\r\nconst mapContainerStyle = {\r\n  width: '48vw',\r\n  height: '35vh',\r\n  // paddingBottom:'120vh',\r\n  // margin: '20px 200px 20px 0px',\r\n  marginBottom: '60vh',\r\n  zIndex: -1,\r\n\r\n};\r\n\r\nclass MealMap extends Component {\r\n  // defaultProps = {\r\n  //   center: {\r\n  //     lat: this.props.location.lat,\r\n  //     lng: this.props.location.lng,\r\n  //   },\r\n  //   zoom: 20,\r\n  // };\r\n\r\n  render() {\r\n    const location = { ...this.props.location };\r\n    delete location.address;\r\n    delete location.city;\r\n    delete location.country;\r\n    return (<Map\r\n      style={mapContainerStyle} google={this.props.google} initialCenter={location} zoom={14}>\r\n      <Marker name={'Current location'} />\r\n    </Map>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: GOOGLE_API_KEY,\r\n})(MealMap);\r\n// className='card-container-horizontal '","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Notification from '../components/Notification';\r\nimport { getById, add } from '../actions/MealActions';\r\nimport { getMealDetails } from '../reducers/MealSelector';\r\n\r\nimport ImageGallery from '../components/ImageGallery';\r\n\r\nimport MealPageNav from '../components/MealPageNav';\r\nimport MealPayment from '../components/MealPayment';\r\nimport ShowHideText from '../components/ShowHideText';\r\nimport MealMenu from '../components/MealMenu';\r\n\r\nimport AttendeesList from '../components/AttendeesList';\r\nimport ReviewForm from '../components/ReviewForm';\r\nimport ReviewList from '../components/ReviewList';\r\nimport SocketService from '../services/SocketService';\r\nimport MealMap from '../components/MealMap';\r\n\r\nclass MealDetails extends Component {\r\n  state = { pageOverlayClass: 'hide', displayReviewForm: 'hide', occurrenceAttendees: {} };\r\n\r\n  async componentDidMount() {\r\n    const id = this.props.match.params.id;\r\n    await this.props.getById(id);\r\n    console.log('MealDetails -> componentDidMount',this.props.meal);\r\n    const hostedId = this.props.meal.storeMeal.hostedBy._id\r\n    \r\n    this.signToSocketEvent(hostedId) \r\n    // console.log(\"hostedId->\",hostedId);\r\n    \r\n    // SocketService.emit('newChannel',`onEventRegistration${hostedId}`);\r\n    // SocketService.on('addMsg', this.addMsg);\r\n  }\r\n\r\n  signToSocketEvent = (hostedId) => {\r\n    \r\n    SocketService.setup();\r\n    console.log('hostedId', hostedId);\r\n    SocketService.emit('newChannel', `onEventRegistration${hostedId}`);\r\n    SocketService.on('addMsg', this.addMsg);\r\n  }\r\n\r\n// componentWillUnmount(){\r\n//   // debugger\r\n//   // if(!this.props.loggedInUser){\r\n//     this.unSignToSocketEvent()\r\n//   // }\r\n// }\r\n\r\n  // componentWillUnmount() {\r\n\r\n  //   SocketService.off('addMsg', this.addMsg);\r\n  //   SocketService.terminate();\r\n  // } //\r\n\r\n  unSignToSocketEvent = () => {\r\n    \r\n    SocketService.off('addMsg', this.addMsg);\r\n    SocketService.terminate();\r\n  }\r\n\r\n  onEventRegistration = async registration => {\r\n    if (this.props.loggedInUser) {\r\n      const { loggedInUser } = this.props;\r\n      let meal = { ...this.props.meal.storeMeal };\r\n\r\n      let selectedOccurance = meal.occurrences.find(current => current.id === registration.id);\r\n      if (!selectedOccurance) {\r\n        console.log(\"onEventRegistration: couldn't find selected occurrence\", registration);\r\n        return;\r\n      }\r\n\r\n      let userReservation = selectedOccurance.attendees.find(attendee => attendee._id === loggedInUser._id);\r\n\r\n      if (userReservation) {\r\n        userReservation.numOfAttendees = parseInt(userReservation.numOfAttendees) + parseInt(registration.numOfAttendees);\r\n      } else {\r\n        selectedOccurance.attendees = [...selectedOccurance.attendees, { _id: loggedInUser._id, fullName: loggedInUser.fullName, imgUrl: loggedInUser.imgUrl, numOfAttendees: registration.numOfAttendees }];\r\n      }\r\n      selectedOccurance.total = parseInt(selectedOccurance.total) + parseInt(registration.numOfAttendees);\r\n\r\n      await this.props.add(meal);\r\n      loggedInUser.titleHost = meal.title;\r\n      SocketService.emit('newMsg', { meal, loggedInUser });\r\n    }\r\n  };\r\n\r\n  addMsg = newMsg => {\r\n    console.log('TEST addMsg -> ', newMsg);\r\n  }; //\r\n\r\n  onDisplayReviewForm = ev => {\r\n    ev.preventDefault();\r\n    if (this.props.loggedInUser) this.setState({ displayReviewForm: '', pageOverlayClass: 'page-overlay show-block' });\r\n  };\r\n\r\n  onCloseReviewForm = ev => {\r\n    ev.preventDefault();\r\n    this.setState({ displayReviewForm: 'hide', pageOverlayClass: 'hide' });\r\n  };\r\n\r\n  onSaveReviewForm = async review => {\r\n    this.setState({ displayReviewForm: 'hide', pageOverlayClass: 'hide' });\r\n    if (this.props.loggedInUser) {\r\n      const { loggedInUser } = this.props;\r\n      const meal = { ...this.props.meal };\r\n\r\n      const newReview = {\r\n        byUser: { _id: loggedInUser._id, fullName: loggedInUser.fullName, imgUrl: loggedInUser.imgUrl },\r\n        txt: review.txt,\r\n        rate: review.rate,\r\n        at: Date.now(),\r\n      };\r\n      meal.reviews = [...meal.reviews, newReview];\r\n\r\n      await this.props.add(meal);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (!this.props.meal) return <div className='border-loading-indicator col-2 row-1'></div>;\r\n    else {\r\n      const { meal } = this.props;\r\n      return (\r\n        <div className='meal-details-page-container'>\r\n          <div id='page-overlay' className={this.state.pageOverlayClass}></div>\r\n          {meal && (\r\n            <>\r\n              <div className='container page-title'>\r\n                <h2>{meal.title}</h2>\r\n              </div>\r\n              <ImageGallery images={meal.images}></ImageGallery>\r\n              <div className='container meal-details-container flex'>\r\n                <div className='left-box flex-shrink-70'>\r\n                  <MealPageNav eventSetup={meal.eventSetup} hostRating={meal.hostRating}></MealPageNav>\r\n                  <h3>A word about the experience</h3>\r\n                  <ShowHideText text={meal.description} showRows={3}></ShowHideText>\r\n                  <h3 id='menu'>Our menu</h3>\r\n                  <MealMenu menu={meal.eventMenu} />\r\n                  <h3>{meal.eventAttendees && meal.eventAttendees.length > 0 ? meal.messages.hasAttendees : meal.messages.noAttendees}</h3>\r\n                  <AttendeesList attendees={meal.eventAttendees}></AttendeesList>\r\n                  <div className='reviews-title-wrapper'>\r\n                    <h3 id='reviews'>Reviews</h3>\r\n                    <a title='Review Us' href='' onClick={this.onDisplayReviewForm}>\r\n                      <i className='icon-large far fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                  <div className={this.state.displayReviewForm}>\r\n                    <ReviewForm onSaveReviewForm={this.onSaveReviewForm} onCloseReviewForm={this.onCloseReviewForm}></ReviewForm>\r\n                  </div>\r\n                  {meal.hostReviews && <ReviewList reviews={meal.hostReviews}></ReviewList>}\r\n                  <div className='google-map-container'>\r\n                    <h3 id='location'>Location</h3>\r\n                    <MealMap location={meal.location}></MealMap>\r\n                  </div>\r\n                </div>\r\n                <div className='right-box flex-shrink-30'>\r\n                  <MealPayment meal={meal} onEventRegistration={this.onEventRegistration}></MealPayment>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  meal: getMealDetails(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getById,\r\n  add,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealDetails)","import React, { Component } from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport { withRouter } from 'react-router';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n// import TableDetailsHost from './TableDetailsHost'\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\nclass UserMealPreview extends Component {\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  onClickRow = (event, data) => {\r\n    event.stopPropagation();\r\n    this.props.history.push(`/meal/${this.props.meal._id}`);\r\n  };\r\n  onEditClick = (event) => {\r\n    event.stopPropagation();\r\n\r\n    this.props.history.push(`/meal/edit/${this.props.meal._id}`)\r\n  }\r\n\r\n  onDelete = (event) => {\r\n    event.stopPropagation();\r\n\r\n    const { id } = this.props.match.params;\r\n    const userId = id\r\n    const mealId = this.props.meal._id\r\n    const occurensId = this.props.meal.occurensId\r\n\r\n    this.props.onDelete(userId,mealId,occurensId)\r\n  }\r\n\r\n  render() {\r\n    const occurrences = this.props.meal.occurrences\r\n    \r\n    if (this.props.meal.objForHosted) {\r\n      return (<React.Fragment>\r\n        {occurrences && occurrences.map((occurrence) => {\r\n          const date = new Date(occurrence.date).toLocaleDateString()\r\n          return <div key={\"Key\" + occurrences.id} className=\"tab-content \">\r\n            <div className=\" \">\r\n              <ul className=\"host-list flex space-around clean-list\">\r\n                <li><span>Date: </span><span>{date}</span></li>\r\n                <li><span>Total Guests:</span><span> {this.props.meal.capacity}</span></li>\r\n                <li><span>Registered Guests:</span> <span>{occurrence.total}</span></li>\r\n                <li><span>Revenue:</span> <span>{occurrence.total * this.props.meal.price} </span></li>\r\n                <li><span>Commission:</span> <span> {(occurrence.total * this.props.meal.price) * 0.1}</span></li>\r\n                <li><span> <EditIcon className=\" cursor\" onClick={this.onEditClick}></EditIcon> </span></li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        })}\r\n      </React.Fragment>)\r\n    } else {\r\n      const date = new Date(this.props.meal.date).toLocaleDateString()\r\n      return (!this.props.meal.objForHosted && <React.Fragment>\r\n        <div className=\"tab-content cursor \" onClick={this.onClickRow} title=\"Click me to see event\">\r\n          <ul className=\"guest-list clean-list\">\r\n            <ul className=\"clean-list flex space-between  \">\r\n              <li><span>Hosted By:</span> <span>{this.props.meal.hostedBy.fullName}</span></li>\r\n              <li><span>Date: </span><span>{date}</span></li>\r\n              <li><span onClick={this.onDelete} title=\"delete me from event\"></span></li>\r\n            </ul>\r\n            <ul className=\"clean-list flex justify-start\">\r\n              <li><span>Location: </span> <span>{this.props.meal.location.address}</span></li>\r\n            </ul>\r\n            <ul className=\"clean-list flex align-start space-between\">\r\n              <li><span>Cuisine: </span> <span>{this.props.meal.cuisineType}</span></li>\r\n              <li><span>Meal: </span> <span>{this.props.meal.mealType}</span></li>\r\n              <li><span>My Guests:</span> <span>{this.props.meal.total}</span></li>\r\n              <li><span>Total Price: </span> <span>${this.props.meal.price * this.props.meal.total} </span><small>(${this.props.meal.price} per guest)</small></li>\r\n            </ul>\r\n          </ul>\r\n        </div>\r\n      </React.Fragment>)\r\n    }\r\n  }\r\n}\r\nexport default withRouter(UserMealPreview);\r\n\r\n","import React from 'react';\r\n\r\nimport UserMealPreview from './UserMealPreview'\r\n\r\nexport default function UserMealList({ meals, userId ,onDelete}) {\r\n    \r\n    return <div className=\"row\">\r\n                <div className=\"col\">\r\n                    {meals && meals.map((meal, idx) => {\r\n                        return <div key={idx}>\r\n\r\n                            <div className=\"preview-title \"> {meal.objForHosted && <span >I'm Hosting </span>}{!meal.objForHosted && <span>I'm a Guest </span>}</div>\r\n                            <div className=\"tabs-container\">\r\n                                <div className=\"tab\">\r\n                                    <input className= \"checkbox-arrow\" type=\"checkbox\" id={`chck${idx}`} />\r\n                                    <label className=\"tab-label\" htmlFor={`chck${idx}`} >{meal.title}</label>\r\n                                    <UserMealPreview  onDelete={onDelete} meal={meal} userId={userId} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n\r\n}\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport SocketService from '../services/SocketService';\r\nimport { getById,loadUserMeal,load, add } from '../actions/MealActions';\r\nimport { setFilter } from '../actions/FilterActions';\r\nimport UserMealList from '../components/UserMealList';\r\n\r\nclass UserDetails extends Component {\r\n  \r\n  async componentDidMount() {\r\n    this.resetFilterDefinitions()\r\n    this.signToSocketEvent(this.props.loggedInUser._id)\r\n  }\r\n\r\n  // componentWillUnmount() {\r\n  //   SocketService.off('addMsg', this.addMsg);\r\n  //   SocketService.terminate();\r\n  // }//\r\n\r\n  signToSocketEvent = (userId) => {\r\n    SocketService.setup();\r\n    console.log('userId', userId);\r\n\r\n    SocketService.emit('newChannel', `onEventRegistration${userId}`);\r\n    SocketService.on('addMsg', this.addMsg);\r\n  }\r\n\r\n\r\n  \r\n  addMsg = newMsg => {\r\n    console.log('TEST addMsg -> ', newMsg);\r\n\r\n    this.loadMeals()    \r\n  };//\r\n\r\n  resetFilterDefinitions = async () => {\r\n    await this.props.setFilter({\r\n      userId: this.props.match.params.id,\r\n      at: '',\r\n      type: '',\r\n      location: {\r\n        city: '',\r\n        country: '',\r\n      },\r\n      tags: '',\r\n    });\r\n    this.loadMeals();\r\n  };\r\n\r\n  loadMeals = () => {\r\n    this.props.loadUserMeal(this.props.filter);\r\n  };\r\n\r\n  onCreateMeal = () => {\r\n    this.props.history.push('/meal/edit');\r\n  };\r\n\r\n  mealsToShow = async () => {\r\n    const { id } = this.props.match.params;\r\n    const attended = [];\r\n    const host = [];\r\n\r\n    const meals = [];\r\n    meals = [...this.props.userMeals];\r\n    await meals.forEach(async meal => {\r\n      if (meal.hostedBy._id == id) {\r\n        await host.push(meal);\r\n      } else {\r\n        await attended.push(meal);\r\n      }\r\n    });\r\n    return { host, attended };\r\n  };\r\n\r\n  onDelete = async (userId, mealId, occurensId) => {\r\n    await this.props.getById(mealId);\r\n    const meal = { ...this.props.meal };\r\n    const occurrence = meal.occurrences.find(occurrence => {\r\n      return occurrence.id == occurensId;\r\n    });\r\n    const idx = occurrence.attendees.findIndex(attendee => {\r\n      return attendee._id == userId;\r\n    });\r\n    occurrence.attendees.splice(idx, 1);\r\n    // await this.props.add(meal);\r\n    this.loadMeals();\r\n  };\r\n\r\n  render() {\r\n    const user = this.props.loggedInUser;\r\n    return (user && <div className='user-details-container container'>\r\n        <div className='user-container'>\r\n          <span>Hello, </span>\r\n          <span>{user.fullName}</span>\r\n        </div>\r\n        <div className='controlls-container flex space-between '>\r\n          <div className='flex-shrink-50'>\r\n            <span>Events </span>\r\n          </div>\r\n          <div className='flex-shrink-50 flex justify-end'>\r\n            <button className='btn-sm-md btn-action align-end ' onClick={this.onCreateMeal}>\r\n              Create Event\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {this.props.userMeals.length > 0 && <UserMealList onDelete={this.onDelete} meals={this.props.userMeals} userId={user._id}></UserMealList>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userMeals: state.meal.userMeals,\r\n  meals: state.meal.meals,\r\n  filter: state.filter.filter,\r\n  meal: state.meal.selectedMeal,\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  loadUserMeal,\r\n  setFilter,\r\n  add,\r\n  load,\r\n  getById,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDetails);\r\n","import axios from 'axios'\r\n\r\nexport default { uploadImages, getLatLngFromAddress }\r\n\r\nfunction _uploadImg(file) {\r\n    const CLOUD_NAME = 'due4sgv19'\r\n    const PRESET_NAME = 'ldwisjpq'\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', PRESET_NAME);\r\n    return fetch(UPLOAD_URL, {\r\n        method: 'POST',\r\n        body: formData\r\n    })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            return res\r\n        })\r\n        .catch(err => console.error(err))\r\n}\r\n\r\nasync function uploadImages(files) {\r\n    const urls = []\r\n    for (let i = 0; i < files.length; i++) {\r\n        const res = await _uploadImg(files[i]);\r\n        urls.push(res.url);\r\n    }\r\n    return urls\r\n}\r\n\r\nfunction getLatLngFromAddress(address) {\r\n    let regex = / /g;\r\n    address = address.replace(regex, '+');\r\n    //sends an HTTP request to google maps API with the given address string to get lat and lng\r\n    return axios.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${address}&key=AIzaSyAlRYsJRB1drgRGQVcSCbwcWhRpcaM7Z08`)\r\n        .then(res => {\r\n            let address = {\r\n                lat: res.data.results[0].geometry.location.lat,\r\n                lng: res.data.results[0].geometry.location.lng,\r\n                address: res.data.results[0].formatted_address\r\n            }\r\n            return address;\r\n        });\r\n}","import React, { Component } from 'react';\r\n\r\nclass ImageUpload extends Component {\r\n  state = { files: [], displayed: [], drag: false, msgState: 'Drop Here', fileArray: [] };\r\n\r\n  fileObj = [];\r\n  // fileArray = [];\r\n\r\n  dropRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    //on edit mode - images received in props shall be stored inside local state variable - files and then previewed \r\n    let div = this.dropRef.current;\r\n    div.addEventListener('dragenter', this.handleDragIn);\r\n    div.addEventListener('dragleave', this.handleDragOut);\r\n    div.addEventListener('dragover', this.handleDrag);\r\n    div.addEventListener('drop', this.handleDrop);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    let div = this.dropRef.current;\r\n    div.removeEventListener('dragenter', this.handleDragIn);\r\n    div.removeEventListener('dragleave', this.handleDragOut);\r\n    div.removeEventListener('dragover', this.handleDrag);\r\n    div.removeEventListener('drop', this.handleDrop);\r\n    //TODO - free memory return () => URL.revokeObjectURL(objectUrl)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.files !== this.props.files) {\r\n      // this.fileArray = [...this.props.files]\r\n      this.setState({ fileArray: [...this.props.files] })\r\n    }\r\n  }\r\n\r\n  handleDrag = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n  };\r\n\r\n  handleDragIn = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.dragCounter++;\r\n    if (ev.dataTransfer.files && ev.dataTransfer.files.length > 0) {\r\n      this.setState({ drag: true });\r\n    }\r\n  };\r\n\r\n  handleDragOut = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.dragCounter--;\r\n    if (this.dragCounter === 0) {\r\n      this.setState({ drag: false });\r\n    }\r\n  };\r\n\r\n  handleDrop = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.setState({ drag: false });\r\n    if (ev.dataTransfer.files && ev.dataTransfer.files.length > 0) {\r\n      this.setPreviewImages(ev.dataTransfer.files);\r\n      this.props.handleImageUpload(ev.dataTransfer.files);\r\n\r\n      ev.dataTransfer.clearData();\r\n      this.dragCounter = 0;\r\n    }\r\n  };\r\n\r\n  checkExistingImages = (ev) => {\r\n    if (this.state.fileArray.length > 0) {\r\n      this.props.handleImageUpload(ev.target.files)\r\n      return true;\r\n    }\r\n    return false\r\n  }\r\n\r\n  handleChange = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (!this.checkExistingImages(ev)) {\r\n      this.setPreviewImages(ev.target.files);\r\n      this.props.handleImageUpload(ev.target.files);\r\n    }\r\n  };\r\n\r\n  setPreviewImages = files => {\r\n    const { fileArray } = this.state\r\n    this.fileObj.push(files);\r\n    for (let i = 0; i < this.fileObj[0].length; i++) {\r\n      fileArray.push(URL.createObjectURL(this.fileObj[0][i]));\r\n      // URL.revokeObjectURL(this.fileObj[0][i]);\r\n    }\r\n    this.setState({ files: fileArray });\r\n    this.setState({ fileArray })\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='upload-container' ref={this.dropRef}>\r\n        <div className='left-box'>\r\n          <div className='dropzone-wrapper'>\r\n            <div className='dropzone-desc'>\r\n              <i className='glyphicon glyphicon-download-alt'></i>\r\n              <p>Choose an image file or drag it here.</p>\r\n            </div>\r\n            <input type='file' id='file-upload' name='img_logo' className='dropzone' multiple accept='image/*' onChange={this.handleChange} />\r\n          </div>\r\n        </div>\r\n        <div className='right-box'>\r\n          <div className='preview-zone hidden'>\r\n            <div className='box box-solid'>\r\n              <div className='box-header with-border'>\r\n              </div>\r\n              <div className='box-body'>\r\n                {(this.state.fileArray || []).map((url, idx) => (\r\n                  <div key={idx}>\r\n                    <img src={url} className='preview-image' alt='...' />\r\n                    <i className='far fa-times-circle icon-large' onClick={(event) => this.props.onImgRemoval(event, url, idx)}></i>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageUpload;\r\n\r\n/*\r\n\r\n htmlFor='file-upload'\r\n\r\n\r\n\r\n\r\nfunction uploadFile(file, i) {\r\n  var url = 'https://api.cloudinary.com/v1_1/joezimim007/image/upload'\r\n  var xhr = new XMLHttpRequest()\r\n  var formData = new FormData()\r\n  xhr.open('POST', url, true)\r\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\r\n\r\n  // Update progress (can be used to show progress indicator)\r\n  xhr.upload.addEventListener(\"progress\", function(e) {\r\n    updateProgress(i, (e.loaded * 100.0 / e.total) || 100)\r\n  })\r\n\r\n  xhr.addEventListener('readystatechange', function(e) {\r\n    if (xhr.readyState == 4 && xhr.status == 200) {\r\n      updateProgress(i, 100) // <- Add this\r\n    }\r\n    else if (xhr.readyState == 4 && xhr.status != 200) {\r\n      // Error. Inform the user\r\n    }\r\n  })\r\n\r\n  formData.append('upload_preset', 'ujpu6gyk')\r\n  formData.append('file', file)\r\n  xhr.send(formData)\r\n}\r\n\r\n\r\n<i class=\"far fa-window-close\"></i>\r\n\r\n\r\n\r\n\r\n\r\n6:30\r\nicon-medium\r\n\r\n\r\n*/\r\n","import React, { Component } from 'react';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nexport default class CheckboxLabels extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <FormGroup row>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={this.props.isPromoted}\r\n                            onClick={this.props.handleChange}\r\n                            value=\"checked\"\r\n                            color=\"primary\"\r\n                            name=\"isPromoted\"\r\n                        />\r\n                    }\r\n                    label={this.props.label}\r\n                />\r\n            </FormGroup>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport cloudService from '../services/ExternalService';\r\nimport { connect } from 'react-redux';\r\n\r\nimport ImageUpload from './ImageUpload';\r\nimport PromotionCheckbox from './PromotionCheckbox';\r\n\r\nvar id = 1;\r\nconst MAX_FILE_SIZE = 5000000; //max size is 5MB\r\nexport class MealForm extends Component {\r\n  state = {\r\n    _id: '',\r\n    hostedBy: { _id: 0, fullName: '', imgUrl: '' },\r\n    title: '',\r\n    description: '',\r\n    firstCourse: [],\r\n    mainCourse: [],\r\n    desserts: [],\r\n    beverages: [],\r\n    cuisineType: '',\r\n    mealType: '',\r\n    price: 0,\r\n    occurrences: [],\r\n    capacity: 0,\r\n    address: '',\r\n    city: '',\r\n    country: '',\r\n    lat: '',\r\n    lng: '',\r\n    imgUrls: [],\r\n    firstCourseTmp: '',\r\n    mainCourseTmp: '',\r\n    dessertTmp: '',\r\n    drinkTmp: '',\r\n    reviews: [],\r\n    currency: 'USD',\r\n    tags: [], //shall include all tags from user\r\n    isActive: true,\r\n    isPromoted: false,\r\n    isBtnEnabled: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (!this.props.meal) {\r\n      this.setState({ hostedBy: this.props.loggedInUser });\r\n    } else {\r\n      const meal = this.props.meal;\r\n      this.setState({\r\n        hostedBy: { ...meal.hostedBy },\r\n        _id: meal._id,\r\n        isActive: meal.isActive,\r\n        isPromoted: meal.isPromoted,\r\n        tags: [...meal.tags],\r\n        title: meal.title,\r\n        description: meal.description,\r\n        firstCourse: [...meal.menu.firstCourse],\r\n        mainCourse: [...meal.menu.mainCourse],\r\n        desserts: [...meal.menu.desserts],\r\n        beverages: [...meal.menu.beverages],\r\n        cuisineType: meal.cuisineType,\r\n        mealType: meal.mealType,\r\n        price: meal.price,\r\n        capacity: meal.capacity,\r\n        occurrences: [...meal.occurrences],\r\n        address: meal.location.address,\r\n        city: meal.location.city,\r\n        country: meal.location.country,\r\n        lat: meal.location.lat,\r\n        lng: meal.location.lng,\r\n        reviews: [...meal.reviews],\r\n        imgUrls: [...meal.imgUrls],\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (JSON.stringify(prevProps.meal) !== JSON.stringify(this.props.meal) && this.props.meal) {\r\n      //edit mode:\r\n      const meal = this.props.meal;\r\n      this.setState({\r\n        hostedBy: { ...meal.hostedBy },\r\n        _id: meal._id,\r\n        isActive: meal.isActive,\r\n        isPromoted: meal.isPromoted,\r\n        tags: [...meal.tags],\r\n        title: meal.title,\r\n        description: meal.description,\r\n        firstCourse: [...meal.menu.firstCourse],\r\n        mainCourse: [...meal.menu.mainCourse],\r\n        desserts: [...meal.menu.desserts],\r\n        beverages: [...meal.menu.beverages],\r\n        cuisineType: meal.cuisineType,\r\n        mealType: meal.mealType,\r\n        price: meal.price,\r\n        capacity: meal.capacity,\r\n        occurrences: [...meal.occurrences],\r\n        address: meal.location.address,\r\n        city: meal.location.city,\r\n        country: meal.location.country,\r\n        lat: meal.location.lat,\r\n        lng: meal.location.lng,\r\n        reviews: [...meal.reviews],\r\n        imgUrls: [...meal.imgUrls],\r\n      });\r\n    }\r\n  }\r\n\r\n  handleImageUpload = async files => {\r\n    for (let i = 0; i < files.length; i++) {\r\n      if (files[i].size > MAX_FILE_SIZE) {\r\n        return;\r\n      } else if (!files[i].type.includes('jpeg') && !files[i].type.includes('jpg') && !files[i].type.includes('png')) {\r\n        return;\r\n      }\r\n    }\r\n    this.setState({ isBtnEnabled: false });\r\n    let imgUrls = await cloudService.uploadImages(files);\r\n    let prevImgUrls = this.state.imgUrls;\r\n    const newImgUrls = prevImgUrls.concat(imgUrls);\r\n    this.setState({ imgUrls: newImgUrls }, this.enableBtn);\r\n  };\r\n\r\n  enableBtn = () => {\r\n    this.setState({ isBtnEnabled: true });\r\n  };\r\n\r\n  onHandleChange = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    if (field === 'isPromoted') {\r\n      value = !this.state.isPromoted;\r\n    }\r\n    this.setState({ [field]: value });\r\n  };\r\n\r\n  onHandleDateAdd = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let date = ev.target.value;\r\n    // this.setState({ [field]: value });\r\n    if (date !== '') {\r\n      id += 1;\r\n      const occurrences = {\r\n        id: id,\r\n        date: Date.parse(date),\r\n        attendees: [],\r\n        total: 0\r\n      };\r\n      this.setState(prevState => ({\r\n        occurrences: [...prevState.occurrences, occurrences],\r\n      }));\r\n    }\r\n  };\r\n\r\n  onHandleAddMenuItem = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    let tmpFieldName = '';\r\n    switch (field) {\r\n      case 'firstCourse':\r\n        tmpFieldName = 'firstCourseTmp';\r\n        break;\r\n      case 'mainCourse':\r\n        tmpFieldName = 'mainCourseTmp';\r\n        break;\r\n      case 'desserts':\r\n        tmpFieldName = 'dessertTmp';\r\n        break;\r\n      default:\r\n        tmpFieldName = 'drinkTmp';\r\n        break;\r\n    }\r\n    if (value) this.setState({ [tmpFieldName]: value });\r\n  };\r\n\r\n  setTags = () => {\r\n    let newTags = [];\r\n    newTags.push(this.state.cuisineType);\r\n    newTags.push(this.state.mealType);\r\n    newTags.push(this.state.title);\r\n    newTags.push(this.state.price);\r\n    newTags.push(this.state.city);\r\n    newTags.push(this.state.country);\r\n    newTags.push(this.state.address);\r\n    newTags.push(this.state.hostedBy.fullName);\r\n    newTags.push(this.state.description);\r\n    newTags = newTags.concat(this.state.firstCourse);\r\n    newTags = newTags.concat(this.state.mainCourse);\r\n    newTags = newTags.concat(this.state.desserts);\r\n    newTags = newTags.concat(this.state.beverages);\r\n    this.state.occurrences.forEach(occurrence => {\r\n      const dateToRender = new Date(occurrence.date).toLocaleDateString();\r\n      newTags.push(dateToRender);\r\n    });\r\n    this.setState({ tags: newTags });\r\n  };\r\n\r\n  onSaveMeal = async ev => {\r\n    // ev.preventDefault();\r\n    const newAddress = await cloudService.getLatLngFromAddress(this.state.address + ', ' + this.state.city + ', ' + this.state.country);\r\n    this.setTags();\r\n    let meal = {\r\n      _id: this.state._id,\r\n      isActive: true,\r\n      isPromoted: this.state.isPromoted,\r\n      hostedBy: this.state.hostedBy,\r\n      menu: {\r\n        firstCourse: this.state.firstCourse,\r\n        mainCourse: this.state.mainCourse,\r\n        desserts: this.state.desserts,\r\n        beverages: this.state.beverages,\r\n      },\r\n      location: {\r\n        city: this.state.city,\r\n        country: this.state.country,\r\n        address: this.state.address,\r\n        lat: newAddress.lat,\r\n        lng: newAddress.lng,\r\n      },\r\n      imgUrls: this.state.imgUrls,\r\n      title: this.state.title,\r\n      description: this.state.description,\r\n      cuisineType: this.state.cuisineType,\r\n      mealType: this.state.mealType,\r\n      price: this.state.price,\r\n      occurrences: this.state.occurrences,\r\n      capacity: this.state.capacity,\r\n      reviews: this.state.reviews,\r\n      currency: this.state.currency,\r\n      tags: this.state.tags,\r\n    };\r\n    if (!this.props.meal) {\r\n      //create mode\r\n      delete meal._id;\r\n    }\r\n    this.props.onSaveMeal(meal);\r\n  };\r\n\r\n  handleDateRemoval = (occurrences, occurrenceIdx) => {\r\n    //removes a chosen event date occurrence by the host\r\n    const newOccurrences = [...occurrences];\r\n    newOccurrences.splice(occurrenceIdx, 1);\r\n    this.setState({ ...this.state, occurrences: newOccurrences });\r\n  };\r\n\r\n  handleMenuItemRemoval = (ev, list, idx) => {\r\n    let field;\r\n    switch (ev.target.nodeName) {\r\n      case 'I':\r\n        field = ev.target.classList[0];\r\n        break;\r\n      default:\r\n        field = ev.target.name;\r\n    }\r\n    const newList = [...list];\r\n    newList.splice(idx, 1);\r\n    this.setState({ [field]: newList });\r\n  };\r\n\r\n  onAddMenuItem = event => {\r\n    event.preventDefault();\r\n    let field;\r\n    switch (event.target.nodeName) {\r\n      case 'I':\r\n        field = event.target.parentNode.name;\r\n        break;\r\n      default:\r\n        field = event.target.name;\r\n    }\r\n    let value;\r\n    switch (field) {\r\n      case 'firstCourse':\r\n        value = this.state.firstCourseTmp;\r\n        this.setState({ firstCourseTmp: '' });\r\n        break;\r\n      case 'mainCourse':\r\n        value = this.state.mainCourseTmp;\r\n        this.setState({ mainCourseTmp: '' });\r\n        break;\r\n      case 'desserts':\r\n        value = this.state.dessertTmp;\r\n        this.setState({ dessertTmp: '' });\r\n        break;\r\n      default:\r\n        value = this.state.drinkTmp;\r\n        this.setState({ drinkTmp: '' });\r\n    }\r\n    if (value) {\r\n      let course = this.state[field];\r\n      let newCourse = [...course];\r\n      newCourse.push(value);\r\n      this.setState({ [field]: newCourse });\r\n    }\r\n  };\r\n\r\n  onImgRemoval = (event, url, idx) => {\r\n    let newImgUrls = [...this.state.imgUrls];\r\n    newImgUrls.splice(idx, 1);\r\n    this.setState({ imgUrls: newImgUrls });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form className='' onSubmit={this.onSaveMeal}>\r\n          <div className='image-container'>\r\n            <h4>Images</h4>\r\n            <ImageUpload onImgRemoval={this.onImgRemoval} handleImageUpload={this.handleImageUpload} files={this.state.imgUrls}></ImageUpload>\r\n          </div>\r\n          <div className='event-info-container'>\r\n            <h4>Details</h4>\r\n            <div className='card-bottom-border flex column'>\r\n              <div className='title'>\r\n                <label htmlFor='title'>Title</label>\r\n                <input type='text' placeholder='Event Name' id='title' name='title' value={this.state.title} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='description'>\r\n                <label htmlFor='description'>Description</label>\r\n                <textarea id='description' name='description' value={this.state.description} placeholder='Description' onChange={this.onHandleChange} className='textarea-form' required></textarea>\r\n              </div>\r\n              <div className='cuisineType'>\r\n                <label htmlFor='cuisineType'>Cuisine</label>\r\n                <input type='text' placeholder='Cuisine' name='cuisineType' id='cuisineType' value={this.state.cuisineType} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='mealType'>\r\n                <label htmlFor='mealType'>Meal</label>\r\n                <input type='text' placeholder='Dinner | Lunch | Breakfest' name='mealType' id='mealType' value={this.state.mealType} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='flex row flex space-between'>\r\n                <div className='address flex-basis-1 margin-right-10'>\r\n                  <label htmlFor='address'>Address</label>\r\n                  <input type='text' placeholder='Address' name='address' id='address' value={this.state.address} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='state flex-basis-1 margin-right-10'>\r\n                  <label htmlFor='state'>Country</label>\r\n                  <input type='text' placeholder='State' name='country' id='country' value={this.state.country} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='city flex-basis-1'>\r\n                  <label htmlFor='city'>City</label>\r\n                  <input type='text' placeholder='City' name='city' id='city' value={this.state.city} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n              </div>\r\n              <div className='price-capacity flex'>\r\n                <div className='price flex-basis-1 margin-right-20'>\r\n                  <label htmlFor='price'>Price</label>\r\n                  <input type='text' placeholder='Price' id='price' name='price' value={this.state.price} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='capacity flex-basis-1'>\r\n                  <label htmlFor='capacity'>How many people</label>\r\n                  <input type='number' placeholder='Capacity' id='capacity' name='capacity' value={this.state.capacity} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n              </div>\r\n              <div className='flex row flex space-even'>\r\n                <div className='date flex-basis-1 margin-right-20'>\r\n                  <div className='flex align-center'>\r\n                    <div className='flex column margin-right-20 width-50'>\r\n                      <label htmlFor='date'>Date</label>\r\n                      <input className='input-date' type='date' name='date' placeholder='Date' id='date' onChange={this.onHandleDateAdd} value={this.state.occurences} className='input-date'></input>\r\n                    </div>\r\n                    <div className='promotion flex-basis-1'>\r\n                      <PromotionCheckbox label={'Would you like to promote your event?'} handleChange={this.onHandleChange} isPromoted={this.state.isPromoted}></PromotionCheckbox>\r\n                    </div>\r\n                  </div>\r\n                  <div className='width-50'>\r\n                    {this.state.occurrences && (\r\n                      <div>\r\n                        <ul className='clean-list occurrence-list'>\r\n                          {' '}\r\n                          {this.state.occurrences.map((occurrence, idx) => {\r\n                            const dateToRender = new Date(occurrence.date).toLocaleDateString();\r\n                            return (\r\n                              <li className='occurrence-date' key={idx}>\r\n                                {dateToRender}\r\n                                <span>\r\n                                  <i className='far fa-times-circle icon-small' onClick={() => this.handleDateRemoval(this.state.occurrences, idx)}></i>\r\n                                </span>\r\n                              </li>\r\n                            );\r\n                          })}\r\n                        </ul>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='event-menu-container'>\r\n            <h4>Menu</h4>\r\n            <div className='card-bottom-border menu-main-container flex column align-center justify-center'>\r\n              <div className='menu-container'>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>First Course</h3>\r\n                  <div className='course-title-wrapper flex justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='First course dish' name='firstCourse' value={this.state.firstCourseTmp} className='input-form' onChange={this.onHandleAddMenuItem} required></input>\r\n                      {/* {this.state.occurrences && <div ><ul className=\"clean-list \"> {this.state.occurrences.map((occurrence, idx) => <li>{occurrence.date}<i className=\"icon-small fas fa-minus\" onClick={() => this.handleOccurenceRemoval(this.state.occurrences, idx)}></i></li>)}</ul></div>} */}\r\n                      {this.state.firstCourse && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.firstCourse.map((course, idx) => (\r\n                              <li className='menu-list-courses' name='firstCourse' key={idx}>\r\n                                {course}\r\n                                <i className='firstCourse far fa-times-circle icon-small' name='firstCourse' onClick={ev => this.handleMenuItemRemoval(ev, this.state.firstCourse, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='firstCourse' className='' title='Add new menu item' href='#' onClick={this.onAddMenuItem} required>\r\n                      <i name='firstCourse' className='icon-larger fas fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Main Course</h3>\r\n                  <div className='course-title-wrapper flex justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Main course dish' name='mainCourse' value={this.state.mainCourseTmp} className='input-form' onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.mainCourse && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.mainCourse.map((course, idx) => (\r\n                              <li className='menu-list-courses' name='mainCourse' key={idx}>\r\n                                {course}\r\n                                <i className='mainCourse far fa-times-circle icon-small' name='mainCourse' onClick={ev => this.handleMenuItemRemoval(ev, this.state.mainCourse, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='mainCourse' className='' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='mainCourse' className='icon-larger fas fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Dessert</h3>\r\n                  <div className='course-title-wrapper flex justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Dessert' name='desserts' className='input-form' value={this.state.dessertTmp} onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.desserts && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.desserts.map((course, idx) => (\r\n                              <li className='menu-list-courses' name='desserts' key={idx}>\r\n                                {course}\r\n                                <i className='desserts far fa-times-circle icon-small' name='desserts' onClick={ev => this.handleMenuItemRemoval(ev, this.state.desserts, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='desserts' className='' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='desserts' className='icon-larger fas fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Beverage</h3>\r\n                  <div className='course-title-wrapper flex justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Beverage' name='beverages' className='input-form' value={this.state.drinkTmp} onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.beverages && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {this.state.beverages.map((course, idx) => (\r\n                              <li className='menu-list-courses' name='beverages' key={idx}>\r\n                                {course}\r\n                                <i className='beverages far fa-times-circle icon-small' name='beverages' onClick={ev => this.handleMenuItemRemoval(ev, this.state.beverages, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='beverages' className='' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='beverages' className='icon-larger fas fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='save'>\r\n            <button className='button btn-lg btn-main' onClick={this.onSaveMeal} disabled={!this.state.isBtnEnabled}>\r\n              SAVE\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealForm;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { MealForm } from '../components/MealForm.js';\r\nimport { getById, add } from '../actions/MealActions.js';\r\n\r\nclass MealFormWrapper extends Component {\r\n\r\n  async componentDidMount() {\r\n    const id = this.props.match.params.id;\r\n    if (id) { //edit mode:\r\n      await this.props.getById(id);\r\n    }\r\n  }\r\n\r\n  onSaveMeal = async meal => {\r\n    const loggedInUser = { ...this.props.loggedInUser };\r\n\r\n    await this.props.add(meal);\r\n    this.props.history.push(`/user/${loggedInUser._id}`)\r\n  };\r\n\r\n  render() {\r\n    const loggedInUser = { ...this.props.loggedInUser }\r\n    const id = this.props.match.params.id;\r\n    return (\r\n      <React.Fragment>\r\n        <div className='container main-form-container'>\r\n          <h2>Event</h2>\r\n          {((id && this.props.meal) || !id) && <MealForm loggedInUser={loggedInUser} onSaveMeal={this.onSaveMeal} meal={id ? this.props.meal : ''} />}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  meal: state.meal.selectedMeal,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getById,\r\n  add,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealFormWrapper);\r\n","import HttpService from './HttpService';\r\n\r\nconst authEndpoint = 'auth';\r\nconst endpoint = 'user';\r\n\r\nasync function login(credentails) {\r\n  \r\n  const user = await HttpService.post(`${authEndpoint}/login`, credentails);\r\n  return _handleLogin(user);\r\n}\r\nasync function signup(credentails) {\r\n  const user = await HttpService.post(`${authEndpoint}/signup`, credentails);\r\n  return _handleLogin(user);\r\n}\r\n\r\nasync function logout() {\r\n  await HttpService.post(`${authEndpoint}/logout`);\r\n  \r\n  sessionStorage.clear();\r\n  \r\n}\r\n\r\nfunction _handleLogin(user) {\r\n  sessionStorage.setItem(endpoint, JSON.stringify(user));\r\n  return user;\r\n}\r\n\r\nasync function getById(id) {\r\n  const user = await HttpService.get(`${endpoint}/${id}`);\r\n  return user;\r\n}\r\nfunction getUserLoggedIn() {\r\n  return sessionStorage.getItem('user');\r\n}\r\nfunction checkConnection() {\r\n  const currentUser = getUserLoggedIn();\r\n\r\n  if (currentUser) {\r\n    return true;\r\n  } else return false;\r\n}\r\n\r\nexport default {\r\n  login,\r\n  signup,\r\n  logout,\r\n  getById,\r\n  checkConnection,\r\n  getUserLoggedIn,\r\n};\r\n","import UserService from '../services/UserService';\r\nimport { loading, doneLoading } from './SystemActions';\r\n// import history from './../history';\r\n\r\nexport function login(credentails) {\r\n  return async dispatch => {\r\n    const user = await UserService.login(credentails);\r\n    dispatch(_setUser(user));\r\n  };\r\n}\r\nexport function signup(credentails) {\r\n  return async dispatch => {\r\n    const user = await UserService.signup(credentails);\r\n    dispatch(_addUser(user));\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await UserService.logout();\r\n    dispatch(_setUser(null));\r\n  };\r\n}\r\n\r\nexport function getById() {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch(loading());\r\n      const user = await UserService.getById();\r\n      dispatch(_setUser(user));\r\n    } catch (err) {\r\n      console.log('UserActions: ERROR in getById', err);\r\n      // example for rerouting - after changing the store\r\n      // history.push('/some/path');\r\n    } finally {\r\n      dispatch(doneLoading());\r\n    }\r\n  };\r\n}\r\n\r\nfunction _setUser(user) {\r\n  return {\r\n    type: 'SET',\r\n    user,\r\n  };\r\n}\r\n\r\nfunction _addUser(user) {\r\n  return {\r\n    type: 'ADD',\r\n    user,\r\n  };\r\n}\r\n\r\nexport default {\r\n  login,\r\n  logout,\r\n  signup,\r\n  getById,\r\n};\r\n","import React from 'react';\r\n\r\nexport default function NotificationMsg(props) {\r\n\r\n\r\n    return (props && <div className='msg-notification-container clean-list'>\r\n        <div className='notification-img'>\r\n            <img className='user-img-profile' src={props.user.imgUrl}></img>\r\n        </div>\r\n        <div className='user-info-notification' >\r\n            <span>Just now</span>\r\n            <span > {props.user.fullName}</span>\r\n            <span>has just signed-in to your event</span>\r\n            <span>{props.user.titelHost}</span>\r\n        </div>\r\n    </div>\r\n    );\r\n}\r\n\r\n//","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport Notification from './Notification'\r\n\r\nimport { logout, login } from '../actions/UserActions';\r\nimport SocketService from '../services/SocketService';\r\nimport { addMsg } from '../actions/SocketAction';\r\nimport NotificationMsg from './NotificationMsg'\r\n\r\nexport class Header extends Component {\r\n\r\n  state = {\r\n    showNotification: false,\r\n    registeredUser: {}\r\n  }\r\n\r\n  componentDidMount() {\r\ndebugger\r\n    if (this.props.loggedInUser) {\r\n      this.signToSocketEvent(this.props.loggedInUser._id)\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    debugger\r\n    if (prevProps.loggedInUser !== this.props.loggedInUser && this.props.loggedInUser) {\r\n      this.signToSocketEvent(this.props.loggedInUser._id)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    \r\n    this.unSignToSocketEvent()\r\n  }//\r\n\r\n  signToSocketEvent = (userId) => {\r\n    SocketService.setup();\r\n    console.log('userId', userId);\r\n    SocketService.emit('newChannel', `onEventRegistration${userId}`);\r\n    SocketService.on('addMsg', this.addMsg);\r\n  }\r\n\r\n  addMsg = newMsg => {\r\n    \r\n    console.log(\"Header -> \",newMsg);\r\n    \r\n    this.setState({ showNotification: true, registeredUser: newMsg.loggedInUser })\r\n    setTimeout(this.resetNotification, 3000)\r\n  };//\r\n\r\n  resetNotification = () => {\r\n    this.setState({ showNotification: false, registeredUser: '' })\r\n  }\r\n\r\n  unSignToSocketEvent = () => {\r\n    \r\n    SocketService.off('addMsg', this.addMsg);\r\n    SocketService.terminate();\r\n  }\r\n\r\n  onLogout = (ev) => {\r\n    debugger\r\n    ev.preventDefault()\r\n    this.unSignToSocketEvent()\r\n    this.props.logout();\r\n    this.props.history.push(`/`);\r\n  };\r\n\r\n  // onLogIn = async user => {\r\n    \r\n  //   // await this.props.login(user);\r\n  //   this.signToSocketEvent(this.props.loggedInUser._id)\r\n  // };\r\n\r\n\r\n  render() {\r\n\r\n    return ([this.state.showNotification && <Notification open={true} msg={<NotificationMsg user={this.state.registeredUser}></NotificationMsg>}></Notification>,\r\n    <div className='main-header-container flex align-center space-between'>\r\n      <div className='container logo flex-basis-60 '>\r\n        <Link to='/'>\r\n          <span>umami</span>\r\n        </Link>\r\n      </div>\r\n      <div className='nav-container container flex-basis-30 flex justify-end'>\r\n        <div className='controls flex-basis-1 flex row align-center justify-center'>\r\n          <div className='margin-right-10'>\r\n            <Link to='/meal/edit'>\r\n              <span className='ellipse-link'>Become a Host</span>\r\n            </Link>\r\n          </div>\r\n          {this.props.loggedInUser && (\r\n            <>\r\n              <div className='logged-user-container'>\r\n                <Link className='' to={`/user/${this.props.loggedInUser._id}`}>\r\n                  <img style={{ width: '60px', height: '60px' }} src='https://res.cloudinary.com/contentexs/image/upload/v1580171634/user-round.svg' alt='' />\r\n                </Link>\r\n              </div>\r\n              <span>|</span>\r\n              <div>\r\n                <a href='' onClick={this.onLogout}>\r\n                  logout\r\n                  </a>\r\n                {/* <a>Sck: {this.props.msg} </a> */}\r\n              </div>\r\n            </>\r\n          )}\r\n          {!this.props.loggedInUser && (\r\n            <>\r\n              <Link className=' ' to={'/user/login'} onLogIn={this.onLogIn}>log-in</Link>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>]\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  msg: state.socket.msg\r\n\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  logout,\r\n  login,\r\n  addMsg\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\r\n","import React from 'react';\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <div className='footer-container  '>\r\n      <div className='footer-logo container flex column align-center justify-center'>\r\n        <h3>umami</h3>\r\n        <small> 2019 umami - All Rights Reserved</small>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signup } from '../actions/UserActions';\r\n\r\n\r\nexport class Singup extends Component {\r\n  state = {\r\n    modalIsOpen: false,\r\n    fullName: '',\r\n    username: '',\r\n    password: '',\r\n    email: '',\r\n    phone: '',\r\n    imgUrl: '',\r\n  };\r\n\r\n\r\n  changeInput = ev => {\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [field]: value });\r\n\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n\r\n  onSignup = () => {\r\n    const user = this.state;\r\n    delete user.modalIsOpen;\r\n    this.props.signup(user);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <a onClick={this.openModal}>signup</a>\r\n        <div className='log-in'>\r\n          <input type='text'  className='margin-top-10' placeholder='Full Name' onChange={this.changeInput} name='fullName'></input>\r\n          <br />\r\n          <input type='text'  className='margin-top-10' placeholder='User Name' onChange={this.changeInput} name='username'></input>\r\n          <br />\r\n          <input type='password'  className='margin-top-10' placeholder='Password' onChange={this.changeInput} name='password'></input>\r\n          <br />\r\n          <input type='phone'  className='margin-top-10' placeholder='Phone' onChange={this.changeInput} name='phone'></input>\r\n          <br />\r\n\r\n          <input type='imgUrl'  className='margin-top-10' placeholder='imgUrl' onChange={this.changeInput} name='imgUrl'></input>\r\n          <br />\r\n          <input type='email'  className='margin-top-10' placeholder='email' onChange={this.changeInput} name='email'></input>\r\n          <br />\r\n\r\n          <button className=\"btn-lg btn-action\" onClick={this.onSignup}>sign-up</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  signup,\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Singup);\r\n","import React, { Component } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { Link } from 'react-router-dom';\r\nimport { login } from '../actions/UserActions';\r\n\r\nimport { connect } from 'react-redux';\r\nimport Signup from '../components/Signup';\r\nimport { Button } from '@material-ui/core';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    email: '',\r\n    password: '',\r\n    isHide: true,\r\n  };\r\n\r\n  changeInput = ev => {\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [field]: value });\r\n  };\r\n\r\n  onLogInUser = async () => {\r\n    const email = this.state.email;\r\n    const password = this.state.password;\r\n    const user = { email, password };\r\n\r\n    await this.props.login(user);\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  changeForm = () => {\r\n    this.setState(prevState => ({ isHide: !prevState.isHide }));\r\n  };\r\n\r\n  render() {\r\n    const hideSignup = this.state.isHide ? 'hide' : 'show-block';\r\n    const hideLogIn = !this.state.isHide ? 'hide' : 'show-block';\r\n    return (\r\n      <div className='flex column align-center justify-center'>\r\n        {/* <Navbar styleNavBar={styleNavBar} ></Navbar> */}\r\n        <div className={hideLogIn}>\r\n        <div >Log-in</div>\r\n          <div >\r\n            <input name='email' onChange={this.changeInput} value={this.state.email} type='text' className='login-input' placeholder=' email'></input>\r\n          </div>\r\n          <div className='margin-top-10'>\r\n            <input name='password' onChange={this.changeInput} value={this.state.password} type='password' className='login-input' placeholder=' Password'></input>\r\n          </div>\r\n          <div className='margin-top-10 login-btns-warpper'>\r\n            <div className='btn-container'>\r\n              <button className='btn-lg btn-action' onClick={this.onLogInUser}>\r\n                Login\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={hideSignup}>\r\n          <Signup></Signup>\r\n        </div>\r\n        <span className='cursor-pointer' onClick={this.changeForm}>\r\n          If you are not registered click here to register\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  login,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React from 'react';\r\nimport { Component } from 'react';\r\nimport { Router, Switch, Route } from 'react-router-dom';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport Home from './pages/Home';\r\nimport MealApp from './pages/MealApp';\r\nimport MealDetails from './pages/MealDetails';\r\nimport UserDetails from './pages/UserDetails';\r\nimport MealFormWrapper from './pages/MealFormWrapper';\r\n\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport Login from './components/Login';\r\n\r\nimport './assets/css/all.min.css';\r\nimport './assets/styles/global.scss';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Router history={history}>\r\n          <Header></Header>\r\n          <Switch>\r\n            <Route component={Home} path='/' exact></Route>\r\n            <Route component={MealFormWrapper} path='/meal/edit/:id?'></Route>\r\n            <Route component={MealApp} path='/meal/location/:location?'></Route>\r\n            <Route component={MealApp} path='/meal/cuisine/:cuisine?'></Route>\r\n            <Route component={MealApp} path='/meal/results/:results?'></Route>\r\n            <Route component={Login} path='/user/login' exact></Route>\r\n            {/* <Route component={Signup} path='/user/signup' exact></Route> */}\r\n            <Route component={MealDetails} path='/meal/:id' exact></Route>\r\n            <Route component={UserDetails} path='/user/:id' exact></Route>\r\n          </Switch>\r\n          <Footer></Footer>\r\n        </Router>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","\r\nlet initialState = {\r\n    filter: {\r\n        userId: '',\r\n        at: '',\r\n        type: '',\r\n        location: {\r\n            city: '',\r\n            country: '',\r\n        },\r\n        tags: ''\r\n    }\r\n};\r\n\r\nexport default function FilterReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n        case 'SET_FILTER':\r\n\r\n            return {\r\n                ...state,\r\n                filter: { ...action.filter }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","let initialState = {\r\n  meals: [],\r\n  userMeals: [],\r\n  selectedMeal: null,\r\n  cities: [],\r\n  cuisines: [],\r\n  filteredMeal: null //holds the meal for the registration CMP (contains only relevant occurrences)\r\n};\r\n\r\nexport default function MealReducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOAD':\r\n      return {\r\n        ...state,\r\n        meals: action.meals,\r\n      };\r\n    case 'GET_BY_ID':\r\n      return {\r\n        ...state,\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'ADD':\r\n      return {\r\n        ...state,\r\n        meals: [...state.meals, action.meal],\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'UPDATE':\r\n      return {\r\n        ...state,\r\n        meals: state.meals.map(meal => (action.meal._id === meal._id ? action.meal : meal)),\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'REMOVE':\r\n      return { ...state, meals: state.meals.filter(meal => meal._id !== action.id) };\r\n    case 'LOAD_CITIES':\r\n      return { ...state, cities: [...action.citiesToReducer] };\r\n    case 'LOAD_CUISINES':\r\n      return { ...state, cuisines: [...action.cuisineTypesToReducer] };\r\n    case 'LOAD_TAGS':\r\n      return { ...state, tags: [...action.tags] };\r\n    case 'LOAD_USER_MEAL':\r\n      return {\r\n        ...state,\r\n        userMeals: action.userMeals,\r\n      };\r\n    case 'LOAD_MEAL_FOR_REGISTRATION':\r\n      return {\r\n        ...state, filteredMeal: action.filteredMeal\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export default {\r\n  createReducer,\r\n  updateObject,\r\n  addItemToState,\r\n  updateItemInState,\r\n  removeItemFromState,\r\n};\r\n\r\nexport function updateObject(oldObject, newValues) {\r\n  return Object.assign({}, oldObject, newValues);\r\n}\r\n\r\nexport function addItemToState(state, item) {\r\n  return [...state, item];\r\n}\r\n\r\nexport function updateItemInState(state, itemId, updateItemCallback) {\r\n  return state.map(item => (item.id !== itemId ? item : updateItemCallback(item)));\r\n}\r\n\r\nexport function removeItemFromState(state, itemId) {\r\n  return state.filter(item => item.id !== itemId);\r\n}\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n","import reducerUtility from './reducerUtilities';\r\n\r\nlet localLoggedUser = null;\r\nif (sessionStorage.user) localLoggedUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n  loggedInUser: localLoggedUser,\r\n};\r\n\r\nconst UserReducer = reducerUtility.createReducer(initialState, {\r\n  SET: load,\r\n  ADD: add,\r\n});\r\n\r\nfunction load(state, action) {\r\n  return { ...state, loggedInUser: action.user };\r\n}\r\n\r\nfunction add(state, action) {\r\n  return {\r\n    ...state,\r\n    loggedInUser: action.user,\r\n  };\r\n}\r\n\r\nexport default UserReducer;\r\n","const initialState = {\r\n  isLoading: false,\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOADING_START':\r\n      return { ...state, isLoading: true };\r\n    case 'LOADING_DONE':\r\n      return { ...state, isLoading: false };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","\r\nlet initialState = {\r\n    msg: '',\r\n    \r\n};\r\n\r\nexport default function SocketReducer(state = initialState, action = {}) {\r\n\r\n    switch (action.type) {\r\n        case 'ADD_MSG':\r\n            return {...state, msg:action.msg };\r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers } from 'redux';\r\n\r\nimport FilterReducer from './FilterReducer';\r\nimport MealReducer from './MealReducer';\r\nimport UserReducer from './UserReducer';\r\nimport SystemReducer from './SystemReducer';\r\nimport SocketReducer from './SocketReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  system: SystemReducer,\r\n  filter: FilterReducer,\r\n  meal: MealReducer,\r\n  user: UserReducer,\r\n  socket: SocketReducer\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst Store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default Store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport Store from './store';\r\n\r\nReactDOM.render(\r\n  <Provider store={Store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}