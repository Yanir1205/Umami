{"version":3,"sources":["history.js","services/HttpService.js","services/mealService.js","actions/MealActions.js","actions/FilterActions.js","components/SearchBar.js","components/MealCategoryPreview.js","services/UtilitiesService.js","components/MealCategoryList.js","components/MeetOurHosts.js","pages/Home.js","components/MealPreview.js","components/MealList.js","components/BadgePreview.js","components/BadgeList.js","components/Spinner.js","pages/MealApp.js","components/Notification.js","components/ImageGallery.js","components/MealPageNav.js","components/MealPayment.js","components/ShowHideText.js","components/MealMenu.js","components/AttendeesPreview.js","components/AttendeesList.js","components/ReviewForm.js","components/ReviewPreview.js","components/ReviewList.js","components/MealMap.js","pages/MealDetails.js","components/UserMealPreview.js","components/UserMealList.js","pages/UserDetails.js","services/ExternalService.js","components/ImageUpload.js","components/PromotionCheckbox.js","components/MealForm.js","pages/MealFormWrapper.js","services/UserService.js","actions/UserActions.js","components/Signup.js","components/Login.js","components/Header.js","components/Footer.js","App.js","serviceWorker.js","reducers/FilterReducer.js","reducers/MealReducer.js","reducers/reducerUtilities.js","reducers/UserReducer.js","reducers/SystemReducer.js","reducers/index.js","store.js","index.js"],"names":["history","createBrowserHistory","axios","Axios","create","withCredentials","endpoint","data","params","ajax","a","async","method","url","res","console","log","dir","response","status","push","query","filter","groupBy","distinctBy","userId","at","type","tags","location","city","country","meals","group","_id","$push","distinct","HttpService","getById","id","meal","add","addedMeal","update","updatedMeal","load","dispatch","MealService","loadUserMeal","userMeals","loadCities","cities","citiesToReducer","map","loadMealsByLocation","loadMealsByCuisine","loadCuisines","cuisineTypes","cuisineTypesToReducer","cuisine","action","newMeal","setFilter","_setFilter","SearchBar","state","val","handleChange","event","key","setState","target","value","onSearchAction","props","className","placeholder","this","onChange","onKeyUp","Component","mapDispatchToProps","withRouter","connect","MealCategoryPreview","category","displayCategory","toggleIcon","toggleTxt","hostedTxt","txtPeriod","nextAvailableDate","date","name","variations","totalOccurrences","currentWeekOccurrences","totalEvents","totalPrice","priceAvg","imgUrl","variationIcon","variationTxt","length","src","alt","to","toLowerCase","addDaysToDate","days","copy","Date","Number","setDate","getDate","formatDate","Intl","DateTimeFormat","year","month","day","format","_getImageByCategoryType","categoryType","categoryInstance","mapCuisinesImages","default","asian","spanish","italian","greek","moroccan","indian","mapCitiesImages","dallas","barcelona","duino","athens","marrakech","delhi","bangkok","sortByDate","b","getTime","getCategoriesInfo","categories","property","startDateRange","endDateRange","forEach","current","split","reduce","result","undefined","today","closest","occurrences","totalAttendees","parseInt","total","capacity","instance","find","cuisineType","includes","_addCategoryInstanceVariety","parseFloat","price","Math","floor","MealCategoryList","UtilitiesService","idx","MeetOurHosts","autoPlay","muted","loop","Home","loggedInUser","user","MealPreview","onCardClick","maxIdx","max","Infinity","occurrence","now","date1","diffInDays","nextMeal","getNextDateFromNow","isPromoted","getDifferenceInDays","attendees","renderType","msg","getMainMsg","reviews","avgRate","getAvgRate","nextDate","toDateString","slice","join","onClick","getPromotionMsg","imgUrls","title","MealList","BadgePreview","isSelected","onBadgeClick","badge","BadgeList","badges","selectedBadge","Spinner","color","height","width","MealApp","resetFilterDefinitions","acc","currReview","rate","loadMeals","pathname","results","match","badgeName","setBadges","badgeType","cuisines","onLocationClick","innerText","onCuisineClick","prevProps","JSON","stringify","isResultsUrl","Notification","open","vertical","horizontal","handleClick","newState","handleClose","updateOpenState","Snackbar","anchorOrigin","onClose","message","ImageGallery","MealPageNav","startTime","endTime","minCapacity","totalRates","rateClass","mealType","href","toFixed","MealPayment","activeOccurrence","availableSlots","availableText","buttonText","registerCounter","paymentClass","ev","preventDefault","Moment","onEventRegistration","calcPrice","sort","Utilities","sortunction","userOccurrences","attendee","numOfAttendees","htmlFor","list","min","ShowHideText","text","showLink","linkText","toggleText","textLength","showRows","MealMenu","menu","firstCourse","course","mainCourse","desserts","dessert","beverages","beverage","AttendeesPreview","fullName","AttendeesList","ReviewForm","email","txt","starClass","starSelected","onSaveReviewForm","onToggleStar","onHandleChange","onCloseReviewForm","onSubmit","Array","from","_","required","ReviewPreview","review","data-rating","byUser","ReviewList","mapContainerStyle","margin","zIndex","MealMap","defaultProps","center","lat","lng","zoom","address","style","google","initialCenter","GoogleApiWrapper","apiKey","MealDetails","pageOverlayClass","displayReviewForm","occurrenceAttendees","showNotification","notificationMessage","registration","currentUser","onDisplayReviewForm","newReview","Fragment","description","onSelectedMenu","selectedMeal","UserMealPreview","onClickRow","stopPropagation","onEditClick","onDelete","mealId","occurensId","objForHosted","toLocaleDateString","hostedBy","UserMealList","UserDetails","onCreateMeal","mealsToShow","attended","host","findIndex","splice","uploadImages","files","urls","i","_uploadImg","getLatLngFromAddress","replace","get","then","geometry","formatted_address","file","UPLOAD_URL","formData","FormData","append","fetch","body","json","catch","err","error","ImageUpload","displayed","drag","msgState","fileArray","fileObj","dropRef","React","createRef","handleDrag","handleDragIn","dragCounter","dataTransfer","handleDragOut","handleDrop","setPreviewImages","handleImageUpload","clearData","checkExistingImages","URL","createObjectURL","div","addEventListener","removeEventListener","ref","multiple","accept","onImgRemoval","CheckboxLabels","FormGroup","row","FormControlLabel","control","Checkbox","checked","label","MealForm","firstCourseTmp","mainCourseTmp","dessertTmp","drinkTmp","currency","isActive","isBtnEnabled","size","cloudService","prevImgUrls","newImgUrls","concat","enableBtn","field","onHandleDateAdd","parse","prevState","onHandleAddMenuItem","tmpFieldName","setTags","newTags","dateToRender","onSaveMeal","newAddress","handleDateRemoval","occurrenceIdx","newOccurrences","handleMenuItemRemoval","nodeName","classList","newList","onAddMenuItem","parentNode","newCourse","occurences","disabled","MealFormWrapper","_handleLogin","sessionStorage","setItem","getUserLoggedIn","getItem","login","credentails","signup","logout","clear","checkConnection","UserService","_setUser","_addUser","Singup","modalIsOpen","username","password","phone","changeInput","onSignup","openModal","Login","isHide","onLogInUser","changeForm","hideSignup","hideLogIn","Signup","Header","onLogout","onLogIn","Footer","App","component","path","exact","Boolean","window","hostname","initialState","createReducer","handlers","hasOwnProperty","updateObject","oldObject","newValues","Object","assign","addItemToState","item","updateItemInState","itemId","updateItemCallback","removeItemFromState","localLoggedUser","UserReducer","reducerUtility","SET","ADD","isLoading","rootReducer","combineReducers","system","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","Store","createStore","applyMiddleware","thunk","ReactDOM","render","store","document","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.b4b13be7.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","import history from '../history';\r\nimport Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production' ? '/api/' : '//localhost:3030/api/';\r\n// const BASE_URL = process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030/';\r\n\r\nvar axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nexport default {\r\n  get(endpoint, data, params) {\r\n    return ajax(endpoint, 'GET', data, params);\r\n  },\r\n  post(endpoint, data, params) {\r\n    return ajax(endpoint, 'POST', data, params);\r\n  },\r\n  put(endpoint, data, params) {\r\n    return ajax(endpoint, 'PUT', data, params);\r\n  },\r\n  delete(endpoint, data, params) {\r\n    return ajax(endpoint, 'DELETE', data, params);\r\n  },\r\n};\r\n\r\nasync function ajax(endpoint, method = 'get', data = null, params = null, dispatch) {\r\n  try {\r\n    const res = await axios({\r\n      url: `${BASE_URL}${endpoint}`,\r\n      method,\r\n      data,\r\n      params,\r\n    });\r\n    return res.data;\r\n  } catch (err) {\r\n    console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}, with params: ${params}`);\r\n    console.dir(err);\r\n    if (err.response && err.response.status === 401) {\r\n      history.push('/');\r\n      // diaspatch ('authorization error')\r\n    }\r\n    // diaspatch ('error')\r\n    throw err;\r\n  }\r\n}\r\n","import HttpService from './HttpService';\r\n\r\nexport default {\r\n  query,\r\n  getById,\r\n  add,\r\n  update,\r\n};\r\n\r\nconst endpoint = 'meal';\r\n\r\nasync function query(filter, groupBy, distinctBy) {\r\n  let params;\r\n  if (filter) {\r\n    params = {\r\n      userId: filter.userId,\r\n      at: filter.at,\r\n      type: filter.type,\r\n      tags: filter.tags,\r\n    };\r\n    if (filter.location) {\r\n      params.city = filter.location.city;\r\n      params.country = filter.location.country;\r\n    }\r\n  } else if (groupBy) {\r\n    if (groupBy.meals) {\r\n      params = {\r\n        group: groupBy._id,\r\n        meals: groupBy.meals.$push,\r\n      };\r\n    } else {\r\n      params = {\r\n        group: groupBy._id,\r\n      };\r\n    }\r\n  } else if (distinctBy) {\r\n    params = {\r\n      distinct: distinctBy._id,\r\n    };\r\n  }\r\n  const meals = await HttpService.get(endpoint, filter, params);\r\n  return meals;\r\n}\r\n\r\nasync function getById(id) {\r\n  const meal = await HttpService.get(`${endpoint}/${id}`);\r\n  return meal;\r\n}\r\n\r\nasync function add(meal) {\r\n  const addedMeal = await HttpService.post(`${endpoint}`, meal);\r\n  return addedMeal;\r\n}\r\n\r\nasync function update(meal) {\r\n  const updatedMeal = await HttpService.put(`${endpoint}/${meal._id}`, meal);\r\n  return updatedMeal;\r\n}\r\n","import MealService from '../services/mealService';\r\n\r\nexport default {\r\n  load,\r\n  getById,\r\n  add,\r\n  remove,\r\n  loadCities,\r\n  loadCuisines,\r\n  loadUserMeal,\r\n  loadMealsByLocation,\r\n  loadMealsByCuisine,\r\n};\r\n\r\nexport function load(filter) {\r\n  return async dispatch => {\r\n    const meals = await MealService.query(filter);\r\n    dispatch({ type: 'LOAD', meals });\r\n  };\r\n}\r\n\r\nexport function loadMealsToList(meals) {\r\n  //this method gets the full list of meals as received from the backend (and stored in the global state)\r\n  //and filters the meals to contain only the meals with releveant occurrances (dates which didn't pass already, occurrances which are not fully occuppied)\r\n  return async dispatch => {\r\n    const filteredMeals = await MealService.filter(meals);\r\n    dispatch({ type: 'LOAD_FILTERED_MEALS', filteredMeals })\r\n  }\r\n}\r\n\r\nexport function loadUserMeal(filter) {\r\n  return async dispatch => {\r\n    const userMeals = await MealService.query(filter);\r\n    dispatch({ type: 'LOAD_USER_MEAL', userMeals });\r\n  };\r\n}\r\n\r\nexport function loadCities() {\r\n  const groupBy = {\r\n    _id: '$location.city',\r\n  };\r\n  return async dispatch => {\r\n    const cities = await MealService.query(null, groupBy);\r\n    const citiesToReducer = cities.map(city => city._id);\r\n    dispatch({ type: 'LOAD_CITIES', citiesToReducer });\r\n  };\r\n}\r\n\r\nexport function loadMealsByLocation() {\r\n  const groupBy = {\r\n    _id: '$location.city',\r\n    meals: {\r\n      $push: '$$ROOT',\r\n    },\r\n  };\r\n  return async dispatch => {\r\n    const meals = await MealService.query(null, groupBy);\r\n    dispatch({ type: 'LOAD', meals });\r\n  };\r\n}\r\n\r\nexport function loadMealsByCuisine() {\r\n  const groupBy = {\r\n    _id: '$cuisineType',\r\n    meals: {\r\n      $push: '$$ROOT',\r\n    },\r\n  };\r\n  return async dispatch => {\r\n    const meals = await MealService.query(null, groupBy);\r\n    dispatch({ type: 'LOAD', meals });\r\n  };\r\n}\r\n\r\nexport function loadCuisines() {\r\n  const groupBy = {\r\n    _id: '$cuisineType',\r\n  };\r\n  return async dispatch => {\r\n    const cuisineTypes = await MealService.query(null, groupBy);\r\n    const cuisineTypesToReducer = cuisineTypes.map(cuisine => cuisine._id);\r\n    dispatch({ type: 'LOAD_CUISINES', cuisineTypesToReducer });\r\n  };\r\n}\r\n\r\nexport function loadTags() {\r\n  const distinct = {\r\n    _id: 'tags',\r\n  };\r\n  return async dispatch => {\r\n    const tags = await MealService.query(null, null, distinct);\r\n    // const cuisineTypesToReducer = cuisineTypes.map(cuisine => cuisine._id)\r\n    dispatch({ type: 'LOAD_TAGS', tags });\r\n  };\r\n}\r\n\r\nexport function getById(id) {\r\n\r\n  return async dispatch => {\r\n    const meal = await MealService.getById(id);\r\n\r\n    dispatch({ type: 'GET_BY_ID', meal });\r\n  };\r\n}\r\n\r\nexport function add(meal) {\r\n  const action = meal._id ? 'UPDATE' : 'ADD';\r\n  if (action === 'UPDATE') {\r\n    return async dispatch => {\r\n      const newMeal = await MealService.update(meal);\r\n      dispatch({ type: action, meal: newMeal });\r\n    };\r\n  } else {\r\n    return async dispatch => {\r\n      const newMeal = await MealService.add(meal);\r\n      dispatch({ type: action, meal: newMeal });\r\n    };\r\n  }\r\n}\r\n\r\nexport function remove(id) {\r\n  return async dispatch => {\r\n    await MealService.remove(id);\r\n    dispatch({ type: 'REMOVE', id });\r\n  };\r\n}\r\n","\r\nexport default {\r\n    setFilter\r\n};\r\n\r\nexport function setFilter(filter) {\r\n    return async dispatch => await dispatch(_setFilter(filter))\r\n}\r\n\r\nfunction _setFilter(filter) {\r\n    return {\r\n        type: 'SET_FILTER',\r\n        filter\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport { setFilter } from '../actions/FilterActions';\r\n\r\nexport class SearchBar extends Component {\r\n  state = {\r\n    val: '',\r\n  };\r\n\r\n  handleChange = async event => {\r\n    if (event.key !== 'Enter') {\r\n      this.setState({ val: event.target.value });\r\n    }\r\n  };\r\n\r\n  onSearchAction = async event => {\r\n    if (event.key === 'Enter' || event.type === 'click') {\r\n      const res = this.state.val;\r\n      await this.setState({ val: '' });\r\n      this.props.history.push(`/meal/results/${res}`);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='main-search-container'>\r\n        <input className='search-input' type='text' placeholder={this.props.placeholder} value={this.state.val} onChange={this.handleChange} onKeyUp={this.onSearchAction}></input>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  filter: state.filter.filter,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  setFilter,\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SearchBar));\r\n\r\n/*\r\n\r\n<div className=\"search-bar container\">\r\n<input className=\"search-bar\" type=\"text\" onChange={this.handleChange} onKeyUp={this.onSearchAction} placeholder=\"Search Events...\" value={this.state.val}></input>\r\n<button className=\"btn\" onClick={this.onSearchAction}>Search</button>\r\n</div>\r\n\r\n\r\n*/\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass MealCategoryPreview extends Component {\r\n  state = { category: null, displayCategory: '', toggleIcon: '', toggleTxt: '', hostedTxt: '', txtPeriod: '' };\r\n  componentDidMount() {\r\n    const { category } = this.props;\r\n    this.setState({\r\n      category: {\r\n        nextAvailableDate: {\r\n          date: category.nextAvailableDate.date,\r\n          city: category.nextAvailableDate.city,\r\n          country: category.nextAvailableDate.country,\r\n          cuisine: category.nextAvailableDate.cuisine,\r\n        },\r\n        name: category.name,\r\n        variations: category.variations,\r\n        totalOccurrences: category.totalOccurrences,\r\n        currentWeekOccurrences: category.currentWeekOccurrences,\r\n        totalEvents: category.totalEvents,\r\n        totalPrice: category.totalPrice,\r\n        priceAvg: category.priceAvg,\r\n        imgUrl: category.imgUrl,\r\n      },\r\n      variationIcon: this.props.displayCategory === 'Cuisine' ? 'https://res.cloudinary.com/contentexs/image/upload/v1580171634/location.svg' : 'https://res.cloudinary.com/contentexs/image/upload/v1580170530/dish-round.svg',\r\n      variationTxt: this.props.displayCategory === 'Cuisine' ? `On ${category.variations.length} Different Locations` : `${category.variations.length} Different Cuisine Types`,\r\n      hostedTxt: category.currentWeekOccurrences > 0 ? `${category.currentWeekOccurrences} Hosted Events` : `${category.totalOccurrences} Hosted Events`,\r\n      txtPeriod: category.currentWeekOccurrences > 0 ? 'This Week' : '',\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.category) return <div></div>;\r\n    return (\r\n      <div className='category-card'>\r\n        <img src={this.state.category.imgUrl} alt='category' className='card-img'></img>\r\n        <h5 className='card-name'>{this.state.category.name}</h5>\r\n        <div className='card-total-one'>\r\n          <img src={this.state.variationIcon}></img>\r\n          <div>\r\n            <span>{this.state.variationTxt}</span>\r\n          </div>\r\n        </div>\r\n        <div className='card-hosted'>\r\n          <img src='https://res.cloudinary.com/contentexs/image/upload/v1580170530/dinner-round.svg'></img>\r\n          <div>\r\n            <span> {this.state.hostedTxt} </span>\r\n          </div>\r\n        </div>\r\n        <div className='card-next-date'>\r\n          <img src='https://res.cloudinary.com/contentexs/image/upload/v1580170530/calender-round.svg'></img>\r\n          <div>\r\n            <span className='title'>Next Event Is On, </span> <span>{this.state.category.nextAvailableDate.date}</span>\r\n          </div>\r\n        </div>\r\n        <div className='card-avg-price'>\r\n          <img src='https://res.cloudinary.com/contentexs/image/upload/v1580328925/money.svg'></img>\r\n          <div>\r\n            <span className='title'>Avg Price Is, </span>\r\n            <span>\r\n              ${this.state.category.priceAvg}\r\n              <small> (per guest)</small>\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className='card-btn'>\r\n          <Link to={`/meal/${this.props.displayCategory.toLowerCase()}`} className='btn'>\r\n            <span className=''>View Events</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealCategoryPreview;\r\n","function sortByDate(a, b) {\r\n  var dateA = new Date(a.date).getTime();\r\n  var dateB = new Date(b.date).getTime();\r\n  return dateA > dateB ? 1 : -1;\r\n}\r\n\r\nfunction addDaysToDate(date, days) {\r\n  const copy = new Date(Number(date));\r\n  copy.setDate(date.getDate() + days);\r\n  return copy;\r\n}\r\n\r\nfunction formatDate(date) {\r\n  let options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n  return new Intl.DateTimeFormat('en-US', options).format(new Date(date));\r\n}\r\n\r\nfunction _addCategoryInstanceVariety(instance, categoryType, cuisine, city) {\r\n  let variations = [];\r\n\r\n  if (categoryType.type === 'Cuisine') {\r\n    variations = instance.variations.includes(city) ? [...instance.variations, city] : instance.variations;\r\n  }\r\n\r\n  if (categoryType.type === 'Location') {\r\n    variations = instance.variations.includes(cuisine) ? [...instance.variations, cuisine] : instance.variations;\r\n  }\r\n\r\n  return variations;\r\n}\r\n\r\nfunction _getImageByCategoryType(categoryType, categoryInstance) {\r\n  let imgUrl = '';\r\n\r\n  const mapCuisinesImages = {\r\n    default: 'https://res.cloudinary.com/contentexs/image/upload/v1580324681/default-c.jpg',\r\n    'tex-mex': 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/tex-mex.jpg',\r\n    asian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/asian.jpg',\r\n    spanish: 'https://res.cloudinary.com/contentexs/image/upload/v1580324681/barcelona.jpg',\r\n    italian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/italian.jpg',\r\n    greek: 'https://res.cloudinary.com/contentexs/image/upload/v1580326079/greek.jpg',\r\n    moroccan: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/moroccan.jpg',\r\n    indian: 'https://res.cloudinary.com/contentexs/image/upload/v1580322135/indian.jpg',\r\n  };\r\n\r\n  const mapCitiesImages = {\r\n    default: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/default.jpg',\r\n    dallas: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/dallas.jpg',\r\n    barcelona: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/barcelona.jpg',\r\n    duino: 'https://res.cloudinary.com/contentexs/image/upload/v1580322154/duino.jpg',\r\n    athens: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/athens.jpg',\r\n    marrakech: 'https://res.cloudinary.com/contentexs/image/upload/v1580322154/marrakech.jpg',\r\n    delhi: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/delhi.jpg',\r\n    bangkok: 'https://res.cloudinary.com/contentexs/image/upload/v1580322153/bangkok.jpg',\r\n  };\r\n\r\n  if (categoryType.type === 'Cuisine') {\r\n    imgUrl = mapCuisinesImages[categoryInstance.toLowerCase()] ? mapCuisinesImages[categoryInstance.toLowerCase()] : mapCuisinesImages['default'];\r\n  }\r\n\r\n  if (categoryType.type === 'Location') {\r\n    imgUrl = mapCitiesImages[categoryInstance.toLowerCase()] ? mapCitiesImages[categoryInstance.toLowerCase()] : mapCitiesImages['default'];\r\n  }\r\n  return imgUrl;\r\n}\r\n\r\nfunction getCategoriesInfo(meals, category) {\r\n  let categories = [];\r\n  const categoryType = category === 'Cuisine' ? { type: category, property: 'cuisineType' } : { type: category, property: 'location.city' };\r\n  const startDateRange = addDaysToDate(new Date(), -1);\r\n  const endDateRange = addDaysToDate(startDateRange, 9);\r\n\r\n  meals.forEach(current => {\r\n    //categoryInstance -> Berlin / Italian\r\n    const categoryInstance = categoryType.property.split('.').reduce((result, value) => {\r\n      return result ? result[value] : undefined;\r\n    }, current);\r\n\r\n    if (!categoryInstance) return;\r\n\r\n    const today = new Date();\r\n    let closest = current.occurrences.reduce((result, value) => (result.date - today < value.date - today ? result.date : value.date), today);\r\n    let totalAttendees = current.occurrences.reduce((result, value) => (result += parseInt(value.total)), 0);\r\n\r\n    //if there are no available slots or dates -> continue\r\n    if (parseInt(totalAttendees) < parseInt(current.capacity) && closest < new Date()) return;\r\n\r\n    let currentWeekOccurrences = current.occurrences.reduce((result, value) => {\r\n      return value.date > startDateRange && value.date <= endDateRange ? (result += 1) : result;\r\n    }, 0);\r\n\r\n    let totalOccurrences = current.occurrences.reduce((result, value) => {\r\n      return value.date > today ? (result += 1) : result;\r\n    }, 0);\r\n\r\n    let instance = categories.find(current => current.name === categoryInstance);\r\n\r\n    if (instance) {\r\n      instance.nextAvailableDate = {\r\n        date: instance.nextAvailableDate.date > closest ? formatDate(closest) : formatDate(instance.nextAvailableDate.date),\r\n        city: current.location.city,\r\n        country: current.location.country,\r\n        cuisine: current.cuisineType,\r\n      };\r\n\r\n      instance.variations = _addCategoryInstanceVariety(instance, categoryType, current.cuisineType, current.location.city);\r\n\r\n      instance.totalOccurrences += parseInt(totalOccurrences);\r\n      instance.currentWeekOccurrences += parseInt(currentWeekOccurrences);\r\n      instance.totalEvents += 1;\r\n      instance.totalPrice += parseFloat(current.price);\r\n      instance.priceAvg = Math.floor(parseFloat(instance.totalPrice) / parseInt(instance.totalEvents));\r\n    } else {\r\n      instance = {\r\n        name: categoryInstance,\r\n        nextAvailableDate: { date: formatDate(closest), city: current.location.city, country: current.location.country, cuisine: current.cuisineType },\r\n        variations: categoryType === 'Cuisine' ? [current.location.city] : [current.cuisineType],\r\n        totalOccurrences: parseInt(totalOccurrences),\r\n        currentWeekOccurrences: parseInt(currentWeekOccurrences),\r\n        totalEvents: 1,\r\n        totalPrice: parseFloat(current.price),\r\n        priceAvg: Math.floor(parseFloat(current.price)),\r\n        imgUrl: _getImageByCategoryType(categoryType, categoryInstance),\r\n      };\r\n\r\n      categories = [...categories, instance];\r\n    }\r\n  });\r\n  return categories;\r\n}\r\n\r\nexport default {\r\n  sortByDate,\r\n  getCategoriesInfo,\r\n  addDaysToDate,\r\n  formatDate,\r\n};\r\n","import React, { Component } from 'react';\r\nimport MealCategoryPreview from './MealCategoryPreview';\r\nimport UtilitiesService from '../services/UtilitiesService';\r\n\r\nclass MealCategoryList extends Component {\r\n  state = { categories: [], displayCategory: '' };\r\n  componentDidMount() {\r\n    const categories = UtilitiesService.getCategoriesInfo(this.props.meals, this.props.displayCategory);\r\n    this.setState({ categories: categories ? categories : [], displayCategory: this.props.displayCategory });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='main-categories-container category-cards'>\r\n        {this.state.categories &&\r\n          this.state.categories.map((category, idx) => {\r\n            return <MealCategoryPreview key={idx} category={category} displayCategory={this.props.displayCategory}></MealCategoryPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealCategoryList;\r\n","import React, { Component } from 'react';\r\n\r\nexport default class MeetOurHosts extends Component {\r\n  render() {\r\n    return (\r\n      <div className='main-meet-hosts-container'>\r\n        <div className='bg-video'>\r\n          <video className='bg-video-content' autoPlay muted loop>\r\n            <source src='https://res.cloudinary.com/contentexs/video/upload/v1580346727/hosts-bg.mp4' type='video/mp4' /> Your browser is not supported!\r\n          </video>\r\n        </div>\r\n\r\n        <div className='hosts'>\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580359192/002.jpg' alt='Our event hosts' />\r\n            <h2>Mary Smith</h2>\r\n            <h3 className='host-txt'> I'm just someone who likes cooking and for whom sharing food is a form of expression.</h3>\r\n            <blockquote className='host-reviews'>\r\n              Amazing! I had such a fantastic time at Mary's home. She is a great host -- it felt like dinner with family. Wonderful, flavorful food and lots of it. Thank You!\r\n              <cite>Alberto Duncan</cite>\r\n            </blockquote>\r\n          </div>\r\n\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580360371/001.jpg' alt='Our event hosts' />\r\n            <h2>Kathy Wilson</h2>\r\n            <h3 className='host-txt'> I love cooking with my friends, sharing recipes and meeting new people.</h3>\r\n            <blockquote className='host-reviews'>\r\n              Kathy and Luc were incredibly hospitable and full of stories from their incredibly full lives. The boat was beautiful and so was the area we saw while we were on it. One of the best meals I had in my life\r\n              <cite>Lisa Freeman</cite>\r\n            </blockquote>\r\n          </div>\r\n\r\n          <div className='host-container'>\r\n            <img src='https://res.cloudinary.com/contentexs/image/upload/v1580359192/003.jpg' alt='Our event hosts' />\r\n            <h2>Luc Seath</h2>\r\n            <h3 className='host-txt'> Astrophysicist by formation, IT Database Designer by profession and cook by passion.</h3>\r\n            <blockquote className='host-reviews'>\r\n              It was a very cozy and nice atmosphere. The food was prepared with great attention to detail and there was a huge variety of delicacies. Really very very tasty. It was great a pleasure!\r\n              <cite>Rob Smith</cite>\r\n            </blockquote>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { load } from '../actions/MealActions';\r\n\r\nimport SearchBar from '../components/SearchBar';\r\nimport MealCategoryList from '../components/MealCategoryList';\r\nimport MeetOurHosts from '../components/MeetOurHosts';\r\n\r\nclass Home extends Component {\r\n  componentDidMount() {\r\n    this.props.load();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div className='hero-container'>\r\n          <div className='hero-box flex column align-center'>\r\n            <div className='text flex column align-center'>\r\n              <span>let's eat.</span>\r\n              <span>Discover Home Cooking Around The World</span>\r\n            </div>\r\n            <div className='how-to'>\r\n              <ul className='clean-list flex align-center justify-center margin-bottom-20'>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580171632/globe.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>1.</span>Choose Location\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580171632/event.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>2.</span>Select Event\r\n                  </span>\r\n                </li>\r\n                <li>\r\n                  <img src='https://res.cloudinary.com/contentexs/image/upload/v1580172376/calender.svg' alt='Food'></img>\r\n                  <span>\r\n                    <span>3.</span>Register\r\n                  </span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className='search-container'>\r\n              <SearchBar placeholder='Where to ?  What are you craving ? '></SearchBar>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='section-container'>\r\n          {this.props.meals.length > 0 && (\r\n            <>\r\n              <div className='section-title-container'>\r\n                <h2>Browse Our Top Locations</h2>\r\n              </div>\r\n              <MealCategoryList meals={this.props.meals} displayCategory='Location'></MealCategoryList>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className='section-container'>\r\n          {this.props.meals.length > 0 && (\r\n            <>\r\n              <div className='section-title-container'>\r\n                <h2>View Our Exciting Cuisines</h2>\r\n              </div>\r\n              <MealCategoryList meals={this.props.meals} displayCategory='Cuisine'></MealCategoryList>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className='section-container'>\r\n          <div className='section-title-container'>\r\n            <h2>Meet Our Hosts</h2>\r\n          </div>\r\n          <MeetOurHosts></MeetOurHosts>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  filter: state.filter.filter,\r\n  meals: state.meal.meals,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  load,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\r\n","import React, { Component } from 'react';\r\n\r\nclass MealPreview extends Component {\r\n\r\n    getNextDateFromNow() {\r\n        let max = -Infinity\r\n        let maxIdx;\r\n        this.props.meal.occurrences.forEach((occurrence, idx) => {\r\n            if (occurrence.date > max && occurrence.date > Date.now()) {\r\n                max = occurrence\r\n                maxIdx = idx\r\n            }\r\n        })\r\n        return { max, maxIdx }\r\n    }\r\n\r\n    getDifferenceInDays(date) {\r\n        const date1 = new Date(date)\r\n        const now = new Date(Date.now())\r\n        const diffInDays = (date1.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)\r\n        return Math.floor(diffInDays);\r\n    }\r\n\r\n    getPromotionMsg() {\r\n        const nextMeal = this.getNextDateFromNow()\r\n        if (this.props.meal.isPromoted) return 'super host';\r\n        else if (this.getDifferenceInDays(nextMeal.max.date) <= 2) return 'hurry up!';\r\n        return `${this.props.meal.capacity - this.props.meal.occurrences[nextMeal.maxIdx].attendees.length} places left!`\r\n    }\r\n\r\n    getMainMsg() {\r\n        let res;\r\n        if (this.props.renderType === 'location') {\r\n            res = {\r\n                val: this.props.meal.location.city + ', ' + this.props.meal.location.country,\r\n                type: 'location'\r\n            }\r\n            return res\r\n        } else {\r\n            res = {\r\n                val: this.props.meal.cuisineType,\r\n                type: 'cuisine'\r\n            }\r\n            return res\r\n        }\r\n    }\r\n\r\n    onCardClick = (id) => {\r\n        this.props.onCardClick(id)\r\n    }\r\n\r\n    render() {\r\n        const msg = this.getMainMsg();\r\n        const reviews =[...this.props.meal.reviews]\r\n        const avgRate = (this.props.meal && reviews) ? this.props.getAvgRate(reviews) : ''\r\n        let nextDate = new Date(this.getNextDateFromNow().max.date)\r\n        nextDate = nextDate.toDateString().split(' ').slice(1, 3).join(' ')\r\n        return this.props.meal && <div className=\"item  meal-card flex\" onClick={() => this.onCardClick(this.props.meal._id)}>\r\n            <div className=\"category \">{this.getPromotionMsg()}</div>\r\n            <img className=\"img-meal \" src={this.props.meal.imgUrls[0]} alt=\"\"></img>\r\n            <div className=\"flex.column text-card\">\r\n                <div className=\"flex space-between \">\r\n                    <div className=\"card-main-msg\">{msg.val}</div>\r\n                    <div className=\"star\">{avgRate ? Math.floor(avgRate) + ' ' : ''}</div>\r\n                </div>\r\n                <div>{msg.type === 'location' ? this.props.meal.cuisineType : this.props.meal.location.city + ', ' + this.props.meal.location.country}</div>\r\n\r\n\r\n                <div className=\"flex space-between \">\r\n                    <div>{this.props.meal.title}</div>\r\n                    <div>{nextDate}</div>\r\n                </div>\r\n                <div className=\"description-tag\">\r\n                    <hr className=\"hr\"></hr>\r\n                </div>\r\n                <div className=\"price-tag flex align-end justify-end\">{this.props.meal.price} $</div>\r\n\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\nexport default MealPreview;\r\n\r\n\r\n","import React, { Component } from 'react';\r\n\r\n\r\nimport { withRouter } from \"react-router\";\r\nimport MealPreview from './MealPreview'\r\n\r\nclass MealList extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"meal-list\">\r\n        {this.props.meals.map(meal => (\r\n          <div className=\"meal-card \" key={meal._id}>\r\n            <MealPreview onCardClick={this.props.onCardClick} meal={meal} getAvgRate={this.props.getAvgRate} renderType={this.props.renderType} />\r\n          </div>\r\n        ))}\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(MealList);\r\n\r\n\r\n\r\n\r\n","import React from \"react\";\r\n\r\nexport default function BadgePreview(props) {\r\n    return (\r\n        <div className={props.isSelected}  onClick={props.onBadgeClick}>\r\n            <h3 className=\"\">{props.badge}</h3>\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react';\r\n\r\nimport BadgePreview from './BadgePreview'\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass BadgeList extends Component {\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <span className=\"badge-list-container\">\r\n                {this.props.badges && this.props.badges.map((badge, idx) => {\r\n                    return <div className=\"badge-card-container \" key={idx}>\r\n                        <BadgePreview  isSelected={badge === this.props.selectedBadge ? 'selected' : ''} onBadgeClick={this.props.onBadgeClick} badge={badge} />\r\n                    </div>\r\n                })}\r\n            </span>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(BadgeList);\r\n","import React from 'react';\r\nimport ReactLoading from 'react-loading';\r\n\r\nexport default function Spinner({ type, color }) {\r\n  return <ReactLoading type={type} color={color} height={100} width={100} />;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { load, loadCuisines, loadCities, loadMealsByLocation, loadMealsByCuisine } from '../actions/MealActions';\r\nimport { setFilter } from '../actions/FilterActions';\r\n\r\nimport MealList from '../components/MealList';\r\nimport BadgeList from '../components/BadgeList';\r\nimport Spinner from '../components/Spinner';\r\n// import Notification from '../components/Notification'\r\nimport SearchBar from '../components/SearchBar';\r\n\r\nexport class MealApp extends Component {\r\n  state = {\r\n    selectedBadge: '',\r\n    renderType: '',\r\n  };\r\n\r\n  async componentDidMount() {\r\n    await this.resetFilterDefinitions();\r\n    if (this.props.location.pathname.includes('results')) {\r\n      this.setState({ renderType: 'results' });\r\n      const { results } = this.props.match.params;\r\n      await this.props.setFilter({ ...this.filter, tags: results });\r\n      await this.loadMeals();\r\n    } else {\r\n      await this.loadMeals();\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (JSON.stringify(prevProps.location.pathname) !== JSON.stringify(this.props.location.pathname)) {\r\n      await this.loadMeals();\r\n    }\r\n  }\r\n\r\n  async componentWillUnmount() {\r\n    await this.resetFilterDefinitions();\r\n  }\r\n\r\n  resetFilterDefinitions = async () => {\r\n    await this.props.setFilter({\r\n      userId: '',\r\n      at: '',\r\n      type: '',\r\n      location: {\r\n        city: '',\r\n        country: '',\r\n      },\r\n      tags: '',\r\n    });\r\n  };\r\n\r\n  getAvgRate = reviews => {\r\n    return reviews.reduce((acc, currReview) => acc + parseInt(currReview.rate), 0) / reviews.length;\r\n  };\r\n\r\n  loadMeals = async () => {\r\n    if (this.props.location.pathname.includes('results')) {\r\n      const { results } = this.props.match.params;\r\n      await this.props.setFilter({ ...this.filter, tags: results });\r\n      this.props.load(this.props.filter);\r\n    } else {\r\n      let badgeName = '';\r\n      if (this.props.location.pathname.includes('location')) {\r\n        badgeName = 'location';\r\n      } else if (this.props.location.pathname.includes('cuisine')) {\r\n        badgeName = 'cuisine';\r\n      }\r\n      this.setBadges(badgeName);\r\n      this.setState({ renderType: badgeName });\r\n      if (badgeName === 'location') {\r\n        const { location } = this.props.match.params;\r\n        if (!location) {\r\n          //load meals grouped by location\r\n          await this.props.loadMealsByLocation();\r\n        } else {\r\n          //load meals from specific location\r\n          // await this.props.setFilter({ ...this.props.filter, location: { ...this.props.location, city: location } })\r\n          await this.props.load(this.props.filter);\r\n        }\r\n      } else {\r\n        const { cuisine } = this.props.match.params;\r\n        if (!cuisine) {\r\n          //load meals grouped by cuisine\r\n          this.props.loadMealsByCuisine();\r\n        } else {\r\n          //load meals from specific cuisine\r\n          // await this.props.setFilter({ ...this.props.filter, type: cuisine })\r\n          await this.props.load(this.props.filter);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  setBadges = async badgeType => {\r\n    if (badgeType === 'location' && !(this.props.cities.length > 0)) {\r\n      await this.props.loadCities();\r\n    } else if (badgeType === 'cuisine' && !(this.props.cuisines.length > 0)) {\r\n      await this.props.loadCuisines();\r\n    }\r\n  };\r\n\r\n  onLocationClick = async event => {\r\n    const city = event.target.innerText;\r\n    await this.resetFilterDefinitions();\r\n    await this.props.setFilter({ ...this.props.filter, location: { ...this.props.filter.location, city } });\r\n    this.props.history.push(`/meal/location/${city}`);\r\n    await this.loadMeals();\r\n  };\r\n\r\n  onCuisineClick = async event => {\r\n    const cuisine = event.target.innerText;\r\n    await this.resetFilterDefinitions();\r\n    await this.props.setFilter({ ...this.props.filter, type: cuisine });\r\n    this.props.history.push(`/meal/cuisine/${cuisine}`);\r\n    await this.loadMeals();\r\n  };\r\n\r\n  onCardClick = id => {\r\n    this.props.history.push(`/meal/${id}`);\r\n  };\r\n\r\n  render() {\r\n    const isResultsUrl = this.props.location.pathname.includes('results');\r\n    return (\r\n      <div className='container'>\r\n        <SearchBar></SearchBar>\r\n        {!this.props.meals.length && (\r\n          <div className='spinner-container'>\r\n            <Spinner type='spin'></Spinner>\r\n          </div>\r\n        )}\r\n        {this.props.cuisines && this.state.renderType === 'cuisine' && !isResultsUrl && <BadgeList selectedBadge={this.state.selectedBadge} onBadgeClick={this.onCuisineClick} badges={this.props.cuisines}></BadgeList>}\r\n        {this.props.cities && this.state.renderType === 'location' && !isResultsUrl && <BadgeList selectedBadge={this.state.selectedBadge} onBadgeClick={this.onLocationClick} badges={this.props.cities}></BadgeList>}\r\n        {/* <Notification open={true} msg={'test'}></Notification> */}\r\n        {this.props.meals.length > 0 && this.state.renderType && <MealList onCardClick={this.onCardClick} onCuisineClick={this.onCuisineClick} onLocationClick={this.onLocationClick} renderType={this.state.renderType} meals={this.props.meals} getAvgRate={this.getAvgRate}></MealList>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  meals: state.meal.meals,\r\n  filter: state.filter.filter,\r\n  cities: state.meal.cities,\r\n  cuisines: state.meal.cuisines,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  load,\r\n  setFilter,\r\n  loadCuisines,\r\n  loadCities,\r\n  loadMealsByLocation,\r\n  loadMealsByCuisine,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealApp);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\n\r\nexport class Notification extends Component {\r\n  //this CMP will get the notification msg from props\r\n  //will be rendered inside each component which can cause any notification\r\n\r\n  state = {\r\n    open: true,\r\n    vertical: 'top',\r\n    horizontal: 'center',\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.updateOpenState();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    //if the prevprops open property is defferent from the current state's open property, update it\r\n  }\r\n\r\n  updateOpenState() {\r\n    this.setState({ ...this.state, open: this.props.open });\r\n  }\r\n\r\n  handleClick = newState => {\r\n    this.setState({ open: true, ...newState });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ ...this.state, open: false });\r\n  };\r\n\r\n  render() {\r\n    const { vertical, horizontal, open } = this.state;\r\n\r\n    debugger\r\n    return (\r\n      <div>\r\n        <Snackbar anchorOrigin={{ vertical, horizontal }} key={`${vertical},${horizontal}`} open={open} onClose={this.handleClose} message={this.props.msg} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Notification);\r\n","import React, { Component } from 'react';\r\n\r\nclass ImageGallery extends Component {\r\n  render() {\r\n    return (\r\n      <div className='gallery-container '>\r\n        <div className='gallery'>\r\n          <figure className='gallery-item gallery-item-1'>\r\n            <img alt='' name='main' className='gallery-img' src={this.props.meal.imgUrls[0]}></img>\r\n          </figure>\r\n          <figure className='gallery-item gallery-item-2'>\r\n            <img alt='' name='one' className='gallery-img' src={this.props.meal.imgUrls[1]}></img>\r\n          </figure>\r\n          <figure className='gallery-item gallery-item-3'>\r\n            <img alt='' name='two' className='gallery-img' src={this.props.meal.imgUrls[2]}></img>\r\n          </figure>\r\n          <figure className='gallery-item gallery-item-4'>\r\n            <img alt='' name='three' className='gallery-img' src={this.props.meal.imgUrls[3]}></img>\r\n          </figure>\r\n          <figure className='gallery-item gallery-item-5'>\r\n            <img alt='' name='four' className='gallery-img' src={this.props.meal.imgUrls[4]}></img>\r\n          </figure>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass MealPageNav extends Component {\r\n  state = { startTime: '', endTime: '', minCapacity: '', totalRates: 0, avgRate: 0, rateClass: 'hide' };\r\n\r\n  componentDidMount() {\r\n    const { meal } = this.props;\r\n    let startTime = meal.mealType === 'Dinner' ? '6:00PM' : meal.mealType === 'Lunch' ? '12:00PM' : '9:00AM';\r\n    let endTime = meal.mealType === 'Dinner' ? '9:00PM' : meal.mealType === 'Lunch' ? '4:00PM' : '11:00AM';\r\n    let minCapacity = Math.floor(parseInt(meal.capacity) / 2);\r\n    let totalRates = meal.reviews.length;\r\n    let avgRate = 0;\r\n    let rateClass = 'hide';\r\n\r\n    if (totalRates > 0) {\r\n      avgRate = meal.reviews.reduce((result, current) => result + parseInt(current.rate), 0) / meal.reviews.length;\r\n\r\n      if (avgRate) rateClass = 'rate';\r\n    }\r\n\r\n    this.setState({\r\n      startTime: startTime,\r\n      endTime: endTime,\r\n      minCapacity: minCapacity,\r\n      totalRates: totalRates,\r\n      avgRate: avgRate,\r\n      rateClass: rateClass,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let { meal } = this.props;\r\n    return (\r\n      <div className='nav-container'>\r\n        <div className='top-box flex '>\r\n          <a className='btn' href='#menu'>\r\n            Menu\r\n          </a>\r\n          <a className='btn' href='#reviews'>\r\n            Reviews\r\n          </a>\r\n          <a className='btn' href='#location'>\r\n            Location\r\n          </a>\r\n        </div>\r\n\r\n        <div className='bottom-box flex'>\r\n          <div className={this.state.rateClass}>\r\n            <i className='icon-small fas fa-star'></i>\r\n            <span>{this.state.avgRate.toFixed(1)}</span>\r\n            <span>({this.state.totalRates})</span>\r\n          </div>\r\n          <div className='meal-period'>\r\n            <span>{this.state.startTime}</span> - <span>{this.state.endTime}</span>\r\n          </div>\r\n          <div>{meal.mealType}</div>\r\n          <div>{meal.cuisineType}</div>\r\n          <div className='meal-guests'>\r\n            <span>{meal.capacity}</span>\r\n            <span> Guests </span>\r\n          </div>\r\n          {/* <div className='available-places'>\r\n            <span> Available Places-{meal.capacity - meal.currCapacity}</span>\r\n          </div> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealPageNav);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Moment from 'moment';\r\n\r\nimport Utilities from '../services/UtilitiesService';\r\n\r\nclass MealPayment extends Component {\r\n  state = { meal: [], activeOccurrence: 0, attendees: 0, date: '', totalPrice: 0, availableSlots: 0, availableText: '', buttonText: 'REGISTER EVENT', registerCounter: 0, paymentClass: 'hide' };\r\n\r\n  componentDidMount() {\r\n    /*\r\n    todo:\r\n\r\n    check if there are available places in the dates\r\n    if there are no places - display a - 'sold-out' on the date - or do not display as one of the dates \r\n    \r\n    if all dates are sold-out - the meal should not be displayed at all on the list - only accessable\r\n    fromthe user profile\r\n\r\n    handle - the rebooking process \r\n\r\n    change reviews to comments/feedback - currently not used as a review \r\n\r\n\r\n\r\n\r\n    \r\n    */\r\n\r\n    const meal = { ...this.props.meal };\r\n    meal.occurrences.sort(Utilities.sortunction);\r\n    let date = Moment(meal.occurrences[0].date).format('MM-DD-YY');\r\n    let activeOccurrence = meal.occurrences[0];\r\n    let availableSlots = parseInt(meal.capacity) - parseInt(activeOccurrence.total);\r\n    let availableText = `${availableSlots} available slots`;\r\n\r\n    if (!this.props.loggedInUser) {\r\n      this.setState({\r\n        meal: meal,\r\n        activeOccurrence: activeOccurrence,\r\n        date: date,\r\n        availableSlots: availableSlots,\r\n        availableText: availableText,\r\n      });\r\n    } else {\r\n      let userOccurrences = meal.occurrences.reduce((result, current) => {\r\n        let user = current.attendees.filter(attendee => attendee._id === this.props.loggedInUser._id);\r\n        if (user && user.length > 0) result.push({ user: user[0], activeOccurrence: current });\r\n        return result;\r\n      }, []);\r\n\r\n      let attendees = 0,\r\n        totalPrice = 0;\r\n\r\n      if (userOccurrences && userOccurrences.length > 0) {\r\n        activeOccurrence = userOccurrences[0].activeOccurrence;\r\n        date = Moment(activeOccurrence.date).format('MM-DD-YY');\r\n        attendees = userOccurrences[0].user.numOfAttendees;\r\n        totalPrice = parseInt(attendees) * parseInt(meal.price);\r\n        availableSlots = parseInt(meal.capacity) - parseInt(activeOccurrence.total);\r\n        availableText = `${availableSlots} available slots`;\r\n      } else userOccurrences = [];\r\n\r\n      this.setState({\r\n        meal: meal,\r\n        activeOccurrence: activeOccurrence,\r\n        attendees: attendees,\r\n        totalPrice: totalPrice,\r\n        date: date,\r\n        availableSlots: availableSlots,\r\n        availableText: availableText,\r\n        registerCounter: attendees === 0 ? 0 : 1,\r\n        buttonText: attendees === 0 ? 'REGISTER EVENT' : 'UPDATE EVENT',\r\n        paymentClass: attendees === 0 ? 'hide' : 'payment',\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChange = ev => {\r\n    ev.preventDefault();\r\n    let name = ev.target.name;\r\n    let value = ev.target.value;\r\n\r\n    if (name === 'attendees' && this.state.attendees !== value) {\r\n      let totalPrice = value * this.props.meal.price;\r\n      this.setState({ attendees: value, totalPrice: totalPrice });\r\n    } else {\r\n      let activeOccurrence = this.state.meal.occurrences.find(current => {\r\n        return Moment(current.date).format('MM-DD-YY') === Moment(value).format('MM-DD-YY');\r\n      });\r\n\r\n      this.setState({ date: value, activeOccurrence: activeOccurrence });\r\n    }\r\n  };\r\n\r\n  onEventRegistration = ev => {\r\n    ev.preventDefault();\r\n    if (this.state.registerCounter === 0) {\r\n      let calcPrice = this.state.attendees * this.props.meal.price;\r\n      this.setState({ totalPrice: calcPrice, registerCounter: 1, buttonText: 'BOOK EVENT', paymentClass: 'payment' });\r\n    } else if (this.state.registerCounter >= 1 && this.state.attendees !== 0) {\r\n      this.setState({ registerCounter: 0 });\r\n      this.props.onEventRegistration({ id: this.state.activeOccurrence.id, date: new Date(this.state.date).getTime(), attendees: this.state.attendees });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { meal } = this.props;\r\n    return (\r\n      <div className='card-simple payment-container'>\r\n        <div className='price'>\r\n          <span>${meal.price}</span>\r\n          <small>per guest</small>\r\n        </div>\r\n        <div>\r\n          <hr />\r\n        </div>\r\n        <div className='details-container'>\r\n          <div className='date'>\r\n            <label htmlFor='date'>Date</label>\r\n            <input name='date' list='occurrences' placeholder='Select Event Date' value={this.state.date} onChange={this.handleChange} title='Select one of the event dates' className='input-date'></input>\r\n            <datalist id='occurrences'>\r\n              {meal.occurrences.map((occurrence, idx) => {\r\n                return (\r\n                  <option key={idx} value={Moment(occurrence.date).format('MM-DD-YY')}>\r\n                    {Moment(occurrence.date).format('MM-DD-YY')}\r\n                  </option>\r\n                );\r\n              })}\r\n            </datalist>\r\n          </div>\r\n          <div className='guests'>\r\n            <label htmlFor='attendees'>Number of Guests</label>\r\n            <input type='number' placeholder='Number of Guests' min='1' name='attendees' onChange={this.handleChange} value={this.state.attendees === 0 ? '' : this.state.attendees}></input>\r\n            <small className='small-text'>{this.state.availableText}</small>\r\n          </div>\r\n          <div className={this.state.paymentClass}>\r\n            <ul className='clean-list'>\r\n              <li>\r\n                <span>\r\n                  ${meal.price} x {this.state.attendees}\r\n                </span>\r\n                <span>guests</span>\r\n              </li>\r\n              <li>\r\n                <span>Total</span>\r\n                <span>${this.state.totalPrice}</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <button onClick={this.onEventRegistration} className='button btn-main'>\r\n              {this.state.buttonText}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(MealPayment);\r\n","import React, { Component } from 'react';\r\n\r\nclass ShowHideText extends Component {\r\n  state = { text: '', showLink: 'hide', linkText: '' };\r\n  componentDidMount() {\r\n    let textLength = this.props.text.length;\r\n    if (Math.floor(textLength / 60) > this.props.showRows) {\r\n      let text = this.props.text.slice(0, 180);\r\n      this.setState({ text: `${text} ...`, showLink: '', linkText: 'show more' });\r\n    } else {\r\n      this.setState({ text: this.props.text });\r\n    }\r\n  }\r\n\r\n  toggleText = ev => {\r\n    ev.preventDefault();\r\n    if (this.state.linkText === 'show more') {\r\n      this.setState({ text: this.props.text, showLink: '', linkText: 'show less' });\r\n    } else {\r\n      let text = this.props.text.slice(0, 180);\r\n      this.setState({ text: `${text} ...`, showLink: '', linkText: 'show more' });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n       <div className='show-hide-text-container'>\r\n        <p>\r\n          {this.state.text}\r\n          <a className={this.state.showLink} href='#' onClick={this.toggleText}>\r\n            {this.state.linkText}\r\n          </a>\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShowHideText;\r\n","import React, { Component } from 'react';\r\n\r\nclass MealMenu extends Component {\r\n  render() {\r\n    const menu = this.props.menu;\r\n    return (\r\n      <div className=' menu-main-container'>\r\n        <div className='card-simple menu-container'>\r\n          <div className='card-title menu-section'>\r\n            <h3>First Course</h3>\r\n            {menu.firstCourse.map((course, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {course}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='card-title menu-section'>\r\n            <h3>Main Course</h3>\r\n            {menu.mainCourse.map((course, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {course}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='card-title menu-section'>\r\n            <h3>Dessert</h3>\r\n            {menu.desserts.map((dessert, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {dessert}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='card-title menu-section'>\r\n            <h3>Beverages</h3>\r\n            {menu.beverages.map((beverage, idx) => {\r\n              return (\r\n                <div key={idx} className='menu-item'>\r\n                  {beverage}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealMenu;\r\n","import React, { Component } from 'react';\r\n\r\nclass AttendeesPreview extends Component {\r\n  render() {\r\n    const { attendee } = this.props;\r\n    return (\r\n      <div className='frame'>\r\n        <div className='card-simple center'>\r\n          <div className='profile'>\r\n            <div className='image'>\r\n              <div className='circle-1'></div>\r\n              <div className='circle-2'></div>\r\n              <img src={attendee.imgUrl} width='70' height='70' alt={attendee.fullName} />\r\n            </div>\r\n            <div className='name'>{attendee.fullName}</div>\r\n            <div className='address'>US, New-York</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AttendeesPreview;\r\n","import React, { Component } from 'react';\r\nimport AttendeesPreview from './AttendeesPreview';\r\n\r\nclass AttendeesList extends Component {\r\n  render() {\r\n    const { attendees } = this.props;\r\n    return (\r\n      <div className='main-attendees-container'>\r\n        {attendees &&\r\n          attendees.map((attendee, idx) => {\r\n            return <AttendeesPreview key={idx} attendee={attendee}></AttendeesPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default AttendeesList;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass ReviewForm extends Component {\r\n  state = {\r\n    email: '',\r\n    txt: '',\r\n    rate: 0,\r\n    starClass: 'icon-medium color-gray far fa-star',\r\n    starSelected: 'icon-medium color-yellow far fa-star',\r\n  };\r\n\r\n  onSaveReviewForm = ev => {\r\n    ev.preventDefault();\r\n    this.props.onSaveReviewForm({ email: this.state.email, txt: this.state.txt, rate: this.state.rate });\r\n  };\r\n\r\n  onToggleStar = ev => {\r\n    ev.preventDefault();\r\n    let id = ev.target.id;\r\n    this.setState({ rate: id });\r\n  };\r\n\r\n  onHandleChange = ev => {\r\n    ev.preventDefault();\r\n    let name = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='card-container-lg card-container-horizontal flex align-center justify-center'>\r\n        <div className='card-background-lg main-review-form-container flex column align-end'>\r\n          <i className='icon-medium color-gray fas fa-times' title='Close' onClick={this.props.onCloseReviewForm}></i>\r\n          <form className='review-form flex column align-center' onSubmit={this.onSaveReviewForm}>\r\n            <h3>How satisfied are you?</h3>\r\n            <div className='rating flex margin-bottom-20'>\r\n              {Array.from(Array(5), (_, idx) => {\r\n                return <i key={idx} id={idx + 1} className={idx < this.state.rate ? this.state.starSelected : this.state.starClass} name={idx + 1} onClick={this.onToggleStar}></i>;\r\n              })}\r\n            </div>\r\n\r\n            <h3>We would love to hear what you think</h3>\r\n            <div className='email'>\r\n              <input type='email' placeholder='Email' name='email' onChange={this.onHandleChange} required></input>\r\n            </div>\r\n            <div className='review'>\r\n              <textarea className='' id='review' name='txt' onChange={this.onHandleChange} min='5' placeholder='Tell us what you think'></textarea>\r\n            </div>\r\n            <div className='save'>\r\n              <button className='button btn-main'>SAVE</button>\r\n            </div>\r\n          </form>\r\n          <h4 className='review-h5'>Thanks for your feedback</h4>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewForm);\r\n","import React, { Component } from 'react';\r\nimport Moment from 'moment';\r\n\r\nclass ReviewPreview extends Component {\r\n  render() {\r\n    const review = this.props.review;\r\n\r\n    return (\r\n      <div className='review-container '>\r\n        {review && (\r\n          <blockquote>\r\n            <header>\r\n              <span data-rating={review.rate}>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n                <i className='icon-small fas fa-star'></i>\r\n              </span>\r\n              <strong>Event Name </strong>\r\n              <span>{Moment(review.at).format('MM-DD-YY')}</span>\r\n              <span>\r\n                By <em>{review.byUser.fullName}</em>\r\n              </span>\r\n              <span>Verified Review</span>\r\n            </header>\r\n            <p>{review.txt}</p>\r\n          </blockquote>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ReviewPreview;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ReviewPreview from './ReviewPreview';\r\n\r\nexport class ReviewList extends Component {\r\n  render() {\r\n    const reviews = this.props.reviews;\r\n    return (\r\n      <div className='main-reviews-container'>\r\n        {reviews &&\r\n          reviews.map((review, idx) => {\r\n            return <ReviewPreview key={idx} review={review}></ReviewPreview>;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewList);\r\n","import React, { Component } from 'react';\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\n\r\nconst GOOGLE_API_KEY = 'AIzaSyDt708aK1FKYJTOT61i_xrzY9R3UD3_6Lw&&';\r\n\r\nconst mapContainerStyle = {\r\n  width: '48vw',\r\n  height: '60vh',\r\n  margin: '20px 0px 20px 0px',\r\n  zIndex: 0,\r\n};\r\n\r\nclass MealMap extends Component {\r\n  defaultProps = {\r\n    center: {\r\n      lat: this.props.location.lat,\r\n      lng: this.props.location.lng,\r\n    },\r\n    zoom: 20,\r\n  };\r\n\r\n  render() {\r\n    const location = { ...this.props.location };\r\n    delete location.address;\r\n    delete location.city;\r\n    delete location.country;\r\n    return (\r\n      <div className='google-map-container'>\r\n        <Map className='card-container-horizontal ' style={mapContainerStyle} google={this.props.google} initialCenter={location} zoom={14}>\r\n          <Marker name={'Current location'} />\r\n        </Map>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default GoogleApiWrapper({\r\n  apiKey: GOOGLE_API_KEY,\r\n})(MealMap);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Notification from '../components/Notification';\r\n\r\nimport { getById, add } from '../actions/MealActions';\r\nimport ImageGallery from '../components/ImageGallery';\r\nimport MealPageNav from '../components/MealPageNav';\r\nimport MealPayment from '../components/MealPayment';\r\nimport ShowHideText from '../components/ShowHideText';\r\nimport MealMenu from '../components/MealMenu';\r\nimport AttendeesList from '../components/AttendeesList';\r\nimport ReviewForm from '../components/ReviewForm';\r\nimport ReviewList from '../components/ReviewList';\r\nimport MealMap from '../components/MealMap';\r\n\r\nclass MealDetails extends Component {\r\n  state = { pageOverlayClass: 'hide', displayReviewForm: 'hide', occurrenceAttendees: {}, showNotification: false, notificationMessage: '' };\r\n\r\n  async componentDidMount() {\r\n    const id = this.props.match.params.id;\r\n    await this.props.getById(id);\r\n  }\r\n\r\n  onEventRegistration = async registration => {\r\n    debugger\r\n    if (this.props.loggedInUser) {\r\n      const { loggedInUser } = this.props;\r\n      const meal = { ...this.props.meal };\r\n      const activeOccurrence = meal.occurrences.find(current => current.id === registration.id);\r\n\r\n      if (activeOccurrence && parseInt(meal.capacity) >= parseInt(activeOccurrence.total) + parseInt(registration.attendees)) {\r\n        const currentUser = activeOccurrence.attendees.find(current => current._id === loggedInUser._id);\r\n\r\n        if (currentUser) {\r\n          currentUser.attendees = parseInt(currentUser.attendees) + parseInt(registration.attendees);\r\n        } else {\r\n          activeOccurrence.attendees = [...activeOccurrence.attendees, { _id: loggedInUser._id, fullName: loggedInUser.fullName, imgUrl: loggedInUser.imgUrl, numOfAttendees: registration.attendees }];\r\n        }\r\n\r\n        activeOccurrence.total = parseInt(activeOccurrence.total) + parseInt(registration.attendees);\r\n\r\n        await this.props.add(meal);\r\n        debugger\r\n        this.setState({ showNotification: true, notificationMessage: 'You were successfully registered. ' });\r\n      }\r\n    }\r\n  };\r\n\r\n  onDisplayReviewForm = ev => {\r\n    ev.preventDefault();\r\n    if (this.props.loggedInUser) this.setState({ displayReviewForm: '', pageOverlayClass: 'page-overlay show-block' });\r\n  };\r\n\r\n  onCloseReviewForm = ev => {\r\n    ev.preventDefault();\r\n    this.setState({ displayReviewForm: 'hide', pageOverlayClass: 'hide' });\r\n  };\r\n\r\n  onSaveReviewForm = async review => {\r\n    this.setState({ displayReviewForm: 'hide', pageOverlayClass: 'hide' });\r\n    if (this.props.loggedInUser) {\r\n      const { loggedInUser } = this.props;\r\n      const meal = { ...this.props.meal };\r\n\r\n      const newReview = {\r\n        byUser: { _id: loggedInUser._id, fullName: loggedInUser.fullName, imgUrl: loggedInUser.imgUrl },\r\n        txt: review.txt,\r\n        rate: review.rate,\r\n        at: Date.now(),\r\n      };\r\n      meal.reviews = [...meal.reviews, newReview];\r\n      await this.props.add(meal);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { meal } = this.props;\r\n\r\n    if (!meal) return <div className='border-loading-indicator col-2 row-1'></div>;\r\n    else\r\n      return (\r\n        <div className='meal-details-page-container'>\r\n          <Notification open={this.state.showNotification} msg={this.state.notificationMessage}></Notification>\r\n          <div id='page-overlay' className={this.state.pageOverlayClass}></div>\r\n          {meal && (\r\n            <React.Fragment>\r\n              <div className='container page-title'>\r\n                <h2>{meal.title}</h2>\r\n              </div>\r\n              <ImageGallery meal={meal}></ImageGallery>\r\n              <div className='container meal-details-container flex'>\r\n                <div className='left-box flex-shrink-70'>\r\n                  <MealPageNav meal={meal}></MealPageNav>\r\n                  <h3>A word about the experience</h3>\r\n                  <ShowHideText text={meal.description} showRows={3}></ShowHideText>\r\n                  <h3 id='menu'>Our menu</h3>\r\n                  <MealMenu menu={meal.menu} onSelectedMenu={this.onSelectedMenu} />\r\n\r\n                  <h3>Meet the other guests</h3>\r\n                  <AttendeesList attendees={meal.occurrences[0].attendees}></AttendeesList>\r\n                  <div className='reviews-title-wrapper'>\r\n                    <h3 id='reviews'>Reviews</h3>\r\n                    <a title='Review Us' href='' onClick={this.onDisplayReviewForm}>\r\n                      <i className='icon-large far fa-plus-square'></i>\r\n                    </a>\r\n                  </div>\r\n                  <div className={this.state.displayReviewForm}>\r\n                    <ReviewForm onSaveReviewForm={this.onSaveReviewForm} onCloseReviewForm={this.onCloseReviewForm}></ReviewForm>\r\n                  </div>\r\n                  {this.props.meal.reviews && <ReviewList reviews={this.props.meal.reviews}></ReviewList>}\r\n                  <h3 id='location'>Location</h3>\r\n                  <MealMap location={meal.location}></MealMap>\r\n                </div>\r\n                <div className='right-box flex-shrink-30'>\r\n                  <MealPayment meal={meal} onEventRegistration={this.onEventRegistration}></MealPayment>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          )}\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  meal: state.meal.selectedMeal,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getById,\r\n  add,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealDetails);\r\n","import React, { Component } from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport { withRouter } from 'react-router';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n// import TableDetailsHost from './TableDetailsHost'\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\nclass UserMealPreview extends Component {\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  onClickRow = (event, data) => {\r\n    event.stopPropagation();\r\n    this.props.history.push(`/meal/${this.props.meal._id}`);\r\n  };\r\n  onEditClick = (event) => {\r\n    event.stopPropagation();\r\n\r\n    this.props.history.push(`/meal/edit/${this.props.meal._id}`)\r\n  }\r\n\r\n  onDelete = (event) => {\r\n    event.stopPropagation();\r\n\r\n    const { id } = this.props.match.params;\r\n    const userId = id\r\n    const mealId = this.props.meal._id\r\n    const occurensId = this.props.meal.occurensId\r\n\r\n    this.props.onDelete(userId,mealId,occurensId)\r\n  }\r\n\r\n  render() {\r\n    const occurrences = this.props.meal.occurrences\r\n    \r\n    if (this.props.meal.objForHosted) {\r\n      return (<React.Fragment>\r\n        {occurrences && occurrences.map((occurrence) => {\r\n          const date = new Date(occurrence.date).toLocaleDateString()\r\n          return <div key={\"Key\" + occurrences.id} className=\"tab-content \">\r\n            <div className=\" \">\r\n              <ul className=\"host-list flex space-around clean-list\">\r\n                <li><span>Date: </span><span>{date}</span></li>\r\n                <li><span>Total Guests:</span><span> {this.props.meal.capacity}</span></li>\r\n                <li><span>Registered Guests:</span> <span>{occurrence.total}</span></li>\r\n                <li><span>Revenue:</span> <span>{occurrence.total * this.props.meal.price} </span></li>\r\n                <li><span>Commission:</span> <span> {(occurrence.total * this.props.meal.price) * 0.1}</span></li>\r\n                <li><span> <EditIcon className=\" cursor\" onClick={this.onEditClick}></EditIcon> </span></li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        })}\r\n      </React.Fragment>)\r\n    } else {\r\n      const date = new Date(this.props.meal.date).toLocaleDateString()\r\n      return (!this.props.meal.objForHosted && <React.Fragment>\r\n        <div className=\"tab-content cursor \" onClick={this.onClickRow} title=\"Click me to see event\">\r\n          <ul className=\"guest-list clean-list\">\r\n            <ul className=\"clean-list flex space-between  \">\r\n              <li><span>Hosted By:</span> <span>{this.props.meal.hostedBy.fullName}</span></li>\r\n              <li><span>Date: </span><span>{date}</span></li>\r\n              <li><span onClick={this.onDelete} title=\"delete me from event\"></span></li>\r\n            </ul>\r\n            <ul className=\"clean-list flex justify-start\">\r\n              <li><span>Location: </span> <span>{this.props.meal.location.address}</span></li>\r\n            </ul>\r\n            <ul className=\"clean-list flex align-start space-between\">\r\n              <li><span>Cuisine: </span> <span>{this.props.meal.cuisineType}</span></li>\r\n              <li><span>Meal: </span> <span>{this.props.meal.mealType}</span></li>\r\n              <li><span>My Guests:</span> <span>{this.props.meal.total}</span></li>\r\n              <li><span>Total Price: </span> <span>${this.props.meal.price * this.props.meal.total} </span><small>(${this.props.meal.price} per guest)</small></li>\r\n            </ul>\r\n          </ul>\r\n        </div>\r\n      </React.Fragment>)\r\n    }\r\n  }\r\n}\r\nexport default withRouter(UserMealPreview);\r\n\r\n","import React from 'react';\r\n\r\nimport UserMealPreview from './UserMealPreview'\r\n\r\nexport default function UserMealList({ meals, userId ,onDelete}) {\r\n    \r\n    return <div className=\"row\">\r\n                <div className=\"col\">\r\n                    {meals && meals.map((meal, idx) => {\r\n                        return <div key={idx}>\r\n\r\n                            <div className=\"preview-title \"> {meal.objForHosted && <span >I'm Hosting </span>}{!meal.objForHosted && <span>I'm a Guest </span>}</div>\r\n                            <div className=\"tabs-container\">\r\n                                <div className=\"tab\">\r\n                                    <input className= \"checkbox-arrow\" type=\"checkbox\" id={`chck${idx}`} />\r\n                                    <label className=\"tab-label\" htmlFor={`chck${idx}`} >{meal.title}</label>\r\n                                    <UserMealPreview  onDelete={onDelete} meal={meal} userId={userId} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n\r\n}\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { getById,loadUserMeal,load, add } from '../actions/MealActions';\r\n\r\nimport { setFilter } from '../actions/FilterActions';\r\nimport UserMealList from '../components/UserMealList';\r\n\r\nclass UserDetails extends Component {\r\n  async componentDidMount() {\r\n    this.resetFilterDefinitions()\r\n    // await this.props.setFilter({ ...this.props.filter, userId: this.props.match.params.id });\r\n    // await this.loadMeals();\r\n  }\r\n\r\n  resetFilterDefinitions = async () => {\r\n    await this.props.setFilter({\r\n      userId: this.props.match.params.id,\r\n      at: '',\r\n      type: '',\r\n      location: {\r\n        city: '',\r\n        country: '',\r\n      },\r\n      tags: ''\r\n\r\n    });\r\n    this.loadMeals();\r\n  };\r\n\r\n  loadMeals = () => {\r\n    this.props.loadUserMeal(this.props.filter);\r\n  };\r\n\r\n  onCreateMeal = () => {\r\n    this.props.history.push('/meal/edit');\r\n\r\n  };\r\n\r\n  mealsToShow = async () => {\r\n    const { id } = this.props.match.params;\r\n    const attended = [];\r\n    const host = [];\r\n\r\n    const meals = [];\r\n    meals = [...this.props.userMeals];\r\n    await meals.forEach(async meal => {\r\n      if (meal.hostedBy._id == id) {\r\n        await host.push(meal);\r\n      } else {\r\n        await attended.push(meal);\r\n      }\r\n    });\r\n    return { host, attended };\r\n  };\r\n\r\n  onDelete =async (userId,mealId,occurensId) => {\r\n    await this.props.getById(mealId)\r\n    const meal = {...this.props.meal}\r\n    const occurrence = meal.occurrences.find(occurrence => {\r\n      return occurrence.id == occurensId\r\n    })\r\n    const idx = occurrence.attendees.findIndex(attendee => {\r\n      return attendee._id == userId\r\n    })\r\n    occurrence.attendees.splice(idx,1)\r\n    await this.props.add(meal)\r\n    this.loadMeals()\r\n  }\r\n\r\n  render() {\r\n    const user = this.props.loggedInUser;\r\n \r\n\r\n    return (\r\n      <div className='user-details-container container'>\r\n        <div className='user-container'>\r\n          <span>Hello, </span>\r\n          <span>{user.fullName}</span>\r\n        </div>\r\n        <div className='controlls-container flex space-between '>\r\n          <div className='flex-shrink-50'>\r\n            <span>Events </span>\r\n          </div>\r\n          <div className='flex-shrink-50 flex justify-end'>\r\n            <button className='btn-sm-md btn-action align-end ' onClick={this.onCreateMeal}>\r\n              Create Event\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {this.props.userMeals.length > 0 && <UserMealList onDelete={this.onDelete} meals={this.props.userMeals} userId={user._id}></UserMealList>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userMeals: state.meal.userMeals,\r\n  meals: state.meal.meals,\r\n  filter: state.filter.filter,\r\n  meal: state.meal.selectedMeal,\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  loadUserMeal,\r\n  setFilter,\r\n  add,\r\n  load,\r\n  getById\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDetails);\r\n","import axios from 'axios'\r\n\r\nexport default { uploadImages, getLatLngFromAddress }\r\n\r\nfunction _uploadImg(file) {\r\n    const CLOUD_NAME = 'due4sgv19'\r\n    const PRESET_NAME = 'ldwisjpq'\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', PRESET_NAME);\r\n    return fetch(UPLOAD_URL, {\r\n        method: 'POST',\r\n        body: formData\r\n    })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            return res\r\n        })\r\n        .catch(err => console.error(err))\r\n}\r\n\r\nasync function uploadImages(files) {\r\n    const urls = []\r\n    for (let i = 0; i < files.length; i++) {\r\n        const res = await _uploadImg(files[i]);\r\n        urls.push(res.url);\r\n    }\r\n    return urls\r\n}\r\n\r\nfunction getLatLngFromAddress(address) {\r\n    let regex = / /g;\r\n    address = address.replace(regex, '+');\r\n    //sends an HTTP request to google maps API with the given address string to get lat and lng\r\n    return axios.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${address}&key=AIzaSyAlRYsJRB1drgRGQVcSCbwcWhRpcaM7Z08`)\r\n        .then(res => {\r\n            let address = {\r\n                lat: res.data.results[0].geometry.location.lat,\r\n                lng: res.data.results[0].geometry.location.lng,\r\n                address: res.data.results[0].formatted_address\r\n            }\r\n            return address;\r\n        });\r\n}","import React, { Component } from 'react';\r\n\r\nclass ImageUpload extends Component {\r\n  state = { files: [], displayed: [], drag: false, msgState: 'Drop Here', fileArray: [] };\r\n\r\n  fileObj = [];\r\n  // fileArray = [];\r\n\r\n  dropRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    //on edit mode - images received in props shall be stored inside local state variable - files and then previewed \r\n    let div = this.dropRef.current;\r\n    div.addEventListener('dragenter', this.handleDragIn);\r\n    div.addEventListener('dragleave', this.handleDragOut);\r\n    div.addEventListener('dragover', this.handleDrag);\r\n    div.addEventListener('drop', this.handleDrop);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    let div = this.dropRef.current;\r\n    div.removeEventListener('dragenter', this.handleDragIn);\r\n    div.removeEventListener('dragleave', this.handleDragOut);\r\n    div.removeEventListener('dragover', this.handleDrag);\r\n    div.removeEventListener('drop', this.handleDrop);\r\n    //TODO - free memory return () => URL.revokeObjectURL(objectUrl)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.files !== this.props.files) {\r\n      // this.fileArray = [...this.props.files]\r\n      this.setState({ fileArray: [...this.props.files] })\r\n    }\r\n  }\r\n\r\n  handleDrag = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n  };\r\n\r\n  handleDragIn = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.dragCounter++;\r\n    if (ev.dataTransfer.files && ev.dataTransfer.files.length > 0) {\r\n      this.setState({ drag: true });\r\n    }\r\n  };\r\n\r\n  handleDragOut = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.dragCounter--;\r\n    if (this.dragCounter === 0) {\r\n      this.setState({ drag: false });\r\n    }\r\n  };\r\n\r\n  handleDrop = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.setState({ drag: false });\r\n    if (ev.dataTransfer.files && ev.dataTransfer.files.length > 0) {\r\n      this.setPreviewImages(ev.dataTransfer.files);\r\n      this.props.handleImageUpload(ev.dataTransfer.files);\r\n\r\n      ev.dataTransfer.clearData();\r\n      this.dragCounter = 0;\r\n    }\r\n  };\r\n\r\n  checkExistingImages = (ev) => {\r\n    if (this.state.fileArray.length > 0) {\r\n      this.props.handleImageUpload(ev.target.files)\r\n      return true;\r\n    }\r\n    return false\r\n  }\r\n\r\n  handleChange = ev => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    if (!this.checkExistingImages(ev)) {\r\n      this.setPreviewImages(ev.target.files);\r\n      this.props.handleImageUpload(ev.target.files);\r\n    }\r\n  };\r\n\r\n  setPreviewImages = files => {\r\n    const { fileArray } = this.state\r\n    this.fileObj.push(files);\r\n    for (let i = 0; i < this.fileObj[0].length; i++) {\r\n      fileArray.push(URL.createObjectURL(this.fileObj[0][i]));\r\n      // URL.revokeObjectURL(this.fileObj[0][i]);\r\n    }\r\n    this.setState({ files: fileArray });\r\n    this.setState({ fileArray })\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='upload-container' ref={this.dropRef}>\r\n        <div className='left-box'>\r\n          <div className='dropzone-wrapper'>\r\n            <div className='dropzone-desc'>\r\n              <i className='glyphicon glyphicon-download-alt'></i>\r\n              <p>Choose an image file or drag it here.</p>\r\n            </div>\r\n            <input type='file' id='file-upload' name='img_logo' className='dropzone' multiple accept='image/*' onChange={this.handleChange} />\r\n          </div>\r\n        </div>\r\n        <div className='right-box'>\r\n          <div className='preview-zone hidden'>\r\n            <div className='box box-solid'>\r\n              <div className='box-header with-border'>\r\n              </div>\r\n              <div className='box-body'>\r\n                {(this.state.fileArray || []).map((url, idx) => (\r\n                  <div key={idx}>\r\n                    <img src={url} className='preview-image' alt='...' />\r\n                    <span onClick={(event) => this.props.onImgRemoval(event, url, idx)}>x</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageUpload;\r\n\r\n/*\r\n\r\n htmlFor='file-upload'\r\n\r\n\r\n\r\n\r\nfunction uploadFile(file, i) {\r\n  var url = 'https://api.cloudinary.com/v1_1/joezimim007/image/upload'\r\n  var xhr = new XMLHttpRequest()\r\n  var formData = new FormData()\r\n  xhr.open('POST', url, true)\r\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\r\n\r\n  // Update progress (can be used to show progress indicator)\r\n  xhr.upload.addEventListener(\"progress\", function(e) {\r\n    updateProgress(i, (e.loaded * 100.0 / e.total) || 100)\r\n  })\r\n\r\n  xhr.addEventListener('readystatechange', function(e) {\r\n    if (xhr.readyState == 4 && xhr.status == 200) {\r\n      updateProgress(i, 100) // <- Add this\r\n    }\r\n    else if (xhr.readyState == 4 && xhr.status != 200) {\r\n      // Error. Inform the user\r\n    }\r\n  })\r\n\r\n  formData.append('upload_preset', 'ujpu6gyk')\r\n  formData.append('file', file)\r\n  xhr.send(formData)\r\n}\r\n\r\n\r\n*/\r\n","import React, { Component } from 'react';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nexport default class CheckboxLabels extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <FormGroup row>\r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            checked={this.props.isPromoted}\r\n                            onClick={this.props.handleChange}\r\n                            value=\"checked\"\r\n                            color=\"primary\"\r\n                            name=\"isPromoted\"\r\n                        />\r\n                    }\r\n                    label={this.props.label}\r\n                />\r\n            </FormGroup>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport cloudService from '../services/ExternalService';\r\nimport { connect } from 'react-redux';\r\n\r\nimport ImageUpload from './ImageUpload';\r\nimport PromotionCheckbox from './PromotionCheckbox';\r\n\r\nvar id = 1;\r\nconst MAX_FILE_SIZE = 5000000; //max size is 5MB\r\nexport class MealForm extends Component {\r\n  state = {\r\n    _id: '',\r\n    hostedBy: { _id: 0, fullName: '', imgUrl: '' },\r\n    title: '',\r\n    description: '',\r\n    firstCourse: [],\r\n    mainCourse: [],\r\n    desserts: [],\r\n    beverages: [],\r\n    cuisineType: '',\r\n    mealType: '',\r\n    price: 0,\r\n    occurrences: [],\r\n    capacity: 0,\r\n    address: '',\r\n    city: '',\r\n    country: '',\r\n    lat: '',\r\n    lng: '',\r\n    imgUrls: [],\r\n    firstCourseTmp: '',\r\n    mainCourseTmp: '',\r\n    dessertTmp: '',\r\n    drinkTmp: '',\r\n    reviews: [],\r\n    currency: 'USD',\r\n    tags: [], //shall include all tags from user\r\n    isActive: true,\r\n    isPromoted: false,\r\n    isBtnEnabled: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (!this.props.meal) {\r\n      this.setState({ hostedBy: this.props.loggedInUser });\r\n    } else {\r\n      const meal = this.props.meal;\r\n      this.setState({\r\n        hostedBy: { ...meal.hostedBy },\r\n        _id: meal._id,\r\n        isActive: meal.isActive,\r\n        isPromoted: meal.isPromoted,\r\n        tags: [...meal.tags],\r\n        title: meal.title,\r\n        description: meal.description,\r\n        firstCourse: [...meal.menu.firstCourse],\r\n        mainCourse: [...meal.menu.mainCourse],\r\n        desserts: [...meal.menu.desserts],\r\n        beverages: [...meal.menu.beverages],\r\n        cuisineType: meal.cuisineType,\r\n        mealType: meal.mealType,\r\n        price: meal.price,\r\n        capacity: meal.capacity,\r\n        occurrences: [...meal.occurrences],\r\n        address: meal.location.address,\r\n        city: meal.location.city,\r\n        country: meal.location.country,\r\n        lat: meal.location.lat,\r\n        lng: meal.location.lng,\r\n        reviews: [...meal.reviews],\r\n        imgUrls: [...meal.imgUrls],\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (JSON.stringify(prevProps.meal) !== JSON.stringify(this.props.meal) && this.props.meal) {\r\n      //edit mode:\r\n      const meal = this.props.meal;\r\n      this.setState({\r\n        hostedBy: { ...meal.hostedBy },\r\n        _id: meal._id,\r\n        isActive: meal.isActive,\r\n        isPromoted: meal.isPromoted,\r\n        tags: [...meal.tags],\r\n        title: meal.title,\r\n        description: meal.description,\r\n        firstCourse: [...meal.menu.firstCourse],\r\n        mainCourse: [...meal.menu.mainCourse],\r\n        desserts: [...meal.menu.desserts],\r\n        beverages: [...meal.menu.beverages],\r\n        cuisineType: meal.cuisineType,\r\n        mealType: meal.mealType,\r\n        price: meal.price,\r\n        capacity: meal.capacity,\r\n        occurrences: [...meal.occurrences],\r\n        address: meal.location.address,\r\n        city: meal.location.city,\r\n        country: meal.location.country,\r\n        lat: meal.location.lat,\r\n        lng: meal.location.lng,\r\n        reviews: [...meal.reviews],\r\n        imgUrls: [...meal.imgUrls],\r\n      });\r\n    }\r\n  }\r\n\r\n  handleImageUpload = async files => {\r\n    for (let i = 0; i < files.length; i++) {\r\n      if (files[i].size > MAX_FILE_SIZE) {\r\n        return;\r\n      } else if (!files[i].type.includes('jpeg') && !files[i].type.includes('jpg') && !files[i].type.includes('png')) {\r\n        return;\r\n      }\r\n    }\r\n    this.setState({ isBtnEnabled: false });\r\n    let imgUrls = await cloudService.uploadImages(files);\r\n    let prevImgUrls = this.state.imgUrls;\r\n    const newImgUrls = prevImgUrls.concat(imgUrls);\r\n    this.setState({ imgUrls: newImgUrls }, this.enableBtn);\r\n  };\r\n\r\n  enableBtn = () => {\r\n    this.setState({ isBtnEnabled: true });\r\n  };\r\n\r\n  onHandleChange = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    if (field === 'isPromoted') {\r\n      value = !this.state.isPromoted;\r\n    }\r\n    this.setState({ [field]: value });\r\n  };\r\n\r\n  onHandleDateAdd = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let date = ev.target.value;\r\n    // this.setState({ [field]: value });\r\n    if (date !== '') {\r\n      id += 1;\r\n      const occurrences = {\r\n        id: id,\r\n        date: Date.parse(date),\r\n        attendees: [],\r\n      };\r\n      this.setState(prevState => ({\r\n        occurrences: [...prevState.occurrences, occurrences],\r\n      }));\r\n    }\r\n  };\r\n\r\n  onHandleAddMenuItem = ev => {\r\n    ev.preventDefault();\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    let tmpFieldName = '';\r\n    switch (field) {\r\n      case 'firstCourse':\r\n        tmpFieldName = 'firstCourseTmp';\r\n        break;\r\n      case 'mainCourse':\r\n        tmpFieldName = 'mainCourseTmp';\r\n        break;\r\n      case 'desserts':\r\n        tmpFieldName = 'dessertTmp';\r\n        break;\r\n      default:\r\n        tmpFieldName = 'drinkTmp';\r\n        break;\r\n    }\r\n    this.setState({ [tmpFieldName]: value });\r\n  };\r\n\r\n  setTags = () => {\r\n    let newTags = [];\r\n    newTags.push(this.state.cuisineType);\r\n    newTags.push(this.state.mealType);\r\n    newTags.push(this.state.title);\r\n    newTags.push(this.state.price);\r\n    newTags.push(this.state.city);\r\n    newTags.push(this.state.country);\r\n    newTags.push(this.state.address);\r\n    newTags.push(this.state.hostedBy.fullName);\r\n    newTags.push(this.state.description);\r\n    newTags = newTags.concat(this.state.firstCourse);\r\n    newTags = newTags.concat(this.state.mainCourse);\r\n    newTags = newTags.concat(this.state.desserts);\r\n    newTags = newTags.concat(this.state.beverages);\r\n    this.state.occurrences.forEach(occurrence => {\r\n      const dateToRender = new Date(occurrence.date).toLocaleDateString();\r\n      newTags.push(dateToRender);\r\n    });\r\n    this.setState({ tags: newTags });\r\n  };\r\n\r\n  onSaveMeal = async ev => {\r\n    // ev.preventDefault();\r\n    const newAddress = await cloudService.getLatLngFromAddress(this.state.address + ', ' + this.state.city + ', ' + this.state.country);\r\n    this.setTags();\r\n    let meal = {\r\n      _id: this.state._id,\r\n      isActive: true,\r\n      isPromoted: this.state.isPromoted,\r\n      hostedBy: this.state.hostedBy,\r\n      menu: {\r\n        firstCourse: this.state.firstCourse,\r\n        mainCourse: this.state.mainCourse,\r\n        desserts: this.state.desserts,\r\n        beverages: this.state.beverages,\r\n      },\r\n      location: {\r\n        city: this.state.city,\r\n        country: this.state.country,\r\n        address: this.state.address,\r\n        lat: newAddress.lat,\r\n        lng: newAddress.lng,\r\n      },\r\n      imgUrls: this.state.imgUrls,\r\n      title: this.state.title,\r\n      description: this.state.description,\r\n      cuisineType: this.state.cuisineType,\r\n      mealType: this.state.mealType,\r\n      price: this.state.price,\r\n      occurrences: this.state.occurrences,\r\n      capacity: this.state.capacity,\r\n      reviews: this.state.reviews,\r\n      currency: this.state.currency,\r\n      tags: this.state.tags,\r\n    };\r\n    if (!this.props.meal) {\r\n      //create mode\r\n      delete meal._id;\r\n    }\r\n    this.props.onSaveMeal(meal);\r\n  };\r\n\r\n  handleDateRemoval = (occurrences, occurrenceIdx) => {\r\n    //removes a chosen event date occurrence by the host\r\n    const newOccurrences = [...occurrences];\r\n    newOccurrences.splice(occurrenceIdx, 1);\r\n    this.setState({ ...this.state, occurrences: newOccurrences });\r\n  };\r\n\r\n  handleMenuItemRemoval = (ev, list, idx) => {\r\n    let field;\r\n    switch (ev.target.nodeName) {\r\n      case 'I':\r\n        field = ev.target.classList[0];\r\n        break;\r\n      default:\r\n        field = ev.target.name;\r\n    }\r\n    const newList = [...list];\r\n    newList.splice(idx, 1);\r\n    this.setState({ [field]: newList });\r\n  };\r\n\r\n  onAddMenuItem = event => {\r\n    event.preventDefault();\r\n    let field;\r\n    switch (event.target.nodeName) {\r\n      case 'I':\r\n        field = event.target.parentNode.name;\r\n        break;\r\n      default:\r\n        field = event.target.name;\r\n    }\r\n    let value;\r\n    switch (field) {\r\n      case 'firstCourse':\r\n        value = this.state.firstCourseTmp;\r\n        this.setState({ firstCourseTmp: '' });\r\n        break;\r\n      case 'mainCourse':\r\n        value = this.state.mainCourseTmp;\r\n        this.setState({ mainCourseTmp: '' });\r\n        break;\r\n      case 'desserts':\r\n        value = this.state.dessertTmp;\r\n        this.setState({ dessertTmp: '' });\r\n        break;\r\n      default:\r\n        value = this.state.drinkTmp;\r\n        this.setState({ drinkTmp: '' });\r\n    }\r\n    let course = this.state[field];\r\n    let newCourse = [...course];\r\n    newCourse.push(value);\r\n    this.setState({ [field]: newCourse });\r\n  };\r\n\r\n  onImgRemoval = (event, url, idx) => {\r\n    let newImgUrls = [...this.state.imgUrls];\r\n    newImgUrls.splice(idx, 1);\r\n    this.setState({ imgUrls: newImgUrls });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form className='' onSubmit={this.onSaveMeal}>\r\n          <div className='image-container'>\r\n            <h4>Images</h4>\r\n            <ImageUpload onImgRemoval={this.onImgRemoval} handleImageUpload={this.handleImageUpload} files={this.state.imgUrls}></ImageUpload>\r\n          </div>\r\n          <div className='event-info-container'>\r\n            <h4>Details</h4>\r\n            <div className='card-bottom-border flex column'>\r\n              <div className='title'>\r\n                <label htmlFor='title'>Title</label>\r\n                <input type='text' placeholder='Event Name' id='title' name='title' value={this.state.title} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='description'>\r\n                <label htmlFor='description'>Description</label>\r\n                <textarea id='description' name='description' value={this.state.description} placeholder='Description' onChange={this.onHandleChange} className='textarea-form' required></textarea>\r\n              </div>\r\n              <div className='cuisineType'>\r\n                <label htmlFor='cuisineType'>Cuisine</label>\r\n                <input type='text' placeholder='Cuisine' name='cuisineType' id='cuisineType' value={this.state.cuisineType} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='mealType'>\r\n                <label htmlFor='mealType'>Meal</label>\r\n                <input type='text' placeholder='Dinner | Lunch | Breakfest' name='mealType' id='mealType' value={this.state.mealType} onChange={this.onHandleChange} className='input-form' required></input>\r\n              </div>\r\n              <div className='flex row flex space-between'>\r\n                <div className='address flex-basis-1 margin-right-10'>\r\n                  <label htmlFor='address'>Address</label>\r\n                  <input type='text' placeholder='Address' name='address' id='address' value={this.state.address} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='state flex-basis-1 margin-right-10'>\r\n                  <label htmlFor='state'>Country</label>\r\n                  <input type='text' placeholder='State' name='country' id='country' value={this.state.country} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='city flex-basis-1'>\r\n                  <label htmlFor='city'>City</label>\r\n                  <input type='text' placeholder='City' name='city' id='city' value={this.state.city} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n              </div>\r\n              <div className='flex row flex space-even'>\r\n                <div className='date flex-basis-1 margin-right-10'>\r\n                  <label htmlFor='date'>Date</label>\r\n                  {/* <input type='date' name='date' placeholder='Date' id='date' onChange={this.onHandleChange} value={this.state.date} className='input-date'></input> <i className='icon-small fas fa-plus'></i> */}\r\n                  <input type='date' name='date' placeholder='Date' id='date' onChange={this.onHandleDateAdd} value={this.state.occurences} className='input-date'></input>\r\n                  {this.state.occurrences && (\r\n                    <div>\r\n                      <ul className='clean-list '>\r\n                        {' '}\r\n                        {this.state.occurrences.map((occurrence, idx) => {\r\n                          const dateToRender = new Date(occurrence.date).toLocaleDateString();\r\n                          return (\r\n                            <li key={idx}>\r\n                              {dateToRender}\r\n                              <span>\r\n                                <i className='icon-small fas fa-minus' onClick={() => this.handleDateRemoval(this.state.occurrences, idx)}></i>\r\n                              </span>\r\n                            </li>\r\n                          );\r\n                        })}\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div className='price flex-basis-1'>\r\n                  <label htmlFor='price'>Price</label>\r\n                  <input type='text' placeholder='Price' id='price' name='price' value={this.state.price} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='capacity flex-basis-1'>\r\n                  <label htmlFor='capacity'>How many people</label>\r\n                  <input type='number' placeholder='Capacity' id='capacity' name='capacity' value={this.state.capacity} onChange={this.onHandleChange} className='input-form' required></input>\r\n                </div>\r\n                <div className='promotion flex-basis-1'>\r\n                  <PromotionCheckbox label={'Would you like to promote your event?'} handleChange={this.onHandleChange} isPromoted={this.state.isPromoted}></PromotionCheckbox>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='event-menu-container'>\r\n            <h4>Menu</h4>\r\n            <div className='card-bottom-border menu-main-container flex column align-center justify-center'>\r\n              <div className='menu-container'>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>First Course</h3>\r\n                  <div className='course-title-wrapper  flex-inline align-center justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='First course dish' name='firstCourse' value={this.state.firstCourseTmp} className='input-form' onChange={this.onHandleAddMenuItem} required></input>\r\n                      {/* {this.state.occurrences && <div ><ul className=\"clean-list \"> {this.state.occurrences.map((occurrence, idx) => <li>{occurrence.date}<i className=\"icon-small fas fa-minus\" onClick={() => this.handleOccurenceRemoval(this.state.occurrences, idx)}></i></li>)}</ul></div>} */}\r\n                      {this.state.firstCourse && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.firstCourse.map((course, idx) => (\r\n                              <li name='firstCourse' key={idx}>\r\n                                {course}\r\n                                <i className='firstCourse icon-small fas fa-minus' name='firstCourse' onClick={ev => this.handleMenuItemRemoval(ev, this.state.firstCourse, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='firstCourse' className='btn-round-sm' title='Add new menu item' href='#' onClick={this.onAddMenuItem} required>\r\n                      <i name='firstCourse' className='icon-small fas fa-plus'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Main Course</h3>\r\n                  <div className='course-title-wrapper flex-inline align-center justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Main course dish' name='mainCourse' value={this.state.mainCourseTmp} className='input-form' onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.mainCourse && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.mainCourse.map((course, idx) => (\r\n                              <li name='mainCourse' key={idx}>\r\n                                {course}\r\n                                <i className='mainCourse icon-small fas fa-minus' name='mainCourse' onClick={ev => this.handleMenuItemRemoval(ev, this.state.mainCourse, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='mainCourse' className='btn-round-sm' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='mainCourse' className='icon-small  fas fa-plus'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Dessert</h3>\r\n                  <div className='course-title-wrapper flex-inline align-center justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Dessert' name='desserts' className='input-form' value={this.state.dessertTmp} onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.desserts && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {' '}\r\n                            {this.state.desserts.map((course, idx) => (\r\n                              <li name='desserts' key={idx}>\r\n                                {course}\r\n                                <i className='desserts icon-small fas fa-minus' name='desserts' onClick={ev => this.handleMenuItemRemoval(ev, this.state.desserts, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='desserts' className='btn-round-sm' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='desserts' className='icon-small  fas fa-plus'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div className='card-title menu-section flex column'>\r\n                  <h3>Beverage</h3>\r\n                  <div className='course-title-wrapper flex-inline align-center justify-center'>\r\n                    <div className='menu-item'>\r\n                      <input type='text' placeholder='Beverage' name='beverages' className='input-form' value={this.state.drinkTmp} onChange={this.onHandleAddMenuItem} required></input>\r\n                      {this.state.beverages && (\r\n                        <div>\r\n                          <ul className='clean-list '>\r\n                            {this.state.beverages.map((course, idx) => (\r\n                              <li name='beverages' key={idx}>\r\n                                {course}\r\n                                <i className='beverages icon-small fas fa-minus' name='beverages' onClick={ev => this.handleMenuItemRemoval(ev, this.state.beverages, idx)}></i>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <a name='beverages' className='btn-round-sm' title='Add new menu item' href='' onClick={this.onAddMenuItem}>\r\n                      <i name='beverages' className='icon-small fas fa-plus'></i>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='save'>\r\n            <button className='button btn-lg btn-main' onClick={this.onSaveMeal} disabled={!this.state.isBtnEnabled}>\r\n              SAVE\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MealForm;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { MealForm } from '../components/MealForm.js';\r\nimport { getById, add } from '../actions/MealActions.js';\r\n\r\nclass MealFormWrapper extends Component {\r\n\r\n  async componentDidMount() {\r\n    const id = this.props.match.params.id;\r\n    if (id) { //edit mode:\r\n      await this.props.getById(id);\r\n    }\r\n  }\r\n\r\n  onSaveMeal = async meal => {\r\n    const loggedInUser = { ...this.props.loggedInUser };\r\n\r\n    await this.props.add(meal);\r\n    this.props.history.push(`/user/${loggedInUser._id}`)\r\n  };\r\n\r\n  render() {\r\n    const loggedInUser = { ...this.props.loggedInUser }\r\n    const id = this.props.match.params.id;\r\n    return (\r\n      <React.Fragment>\r\n        <div className='container main-form-container'>\r\n          <h2>Event</h2>\r\n          {((id && this.props.meal) || !id) && <MealForm loggedInUser={loggedInUser} onSaveMeal={this.onSaveMeal} meal={id ? this.props.meal : ''} />}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n  meal: state.meal.selectedMeal,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getById,\r\n  add,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MealFormWrapper);\r\n","import HttpService from './HttpService';\r\n\r\nconst authEndpoint = 'auth';\r\nconst endpoint = 'user';\r\n\r\nasync function login(credentails) {\r\n  \r\n  const user = await HttpService.post(`${authEndpoint}/login`, credentails);\r\n  return _handleLogin(user);\r\n}\r\nasync function signup(credentails) {\r\n  const user = await HttpService.post(`${authEndpoint}/signup`, credentails);\r\n  return _handleLogin(user);\r\n}\r\n\r\nasync function logout() {\r\n  await HttpService.post(`${authEndpoint}/logout`);\r\n  sessionStorage.clear();\r\n}\r\n\r\nfunction _handleLogin(user) {\r\n  sessionStorage.setItem(endpoint, JSON.stringify(user));\r\n  return user;\r\n}\r\n\r\nasync function getById(id) {\r\n  const user = await HttpService.get(`${endpoint}/${id}`);\r\n  return user;\r\n}\r\nfunction getUserLoggedIn() {\r\n  return sessionStorage.getItem('user');\r\n}\r\nfunction checkConnection() {\r\n  const currentUser = getUserLoggedIn();\r\n\r\n  if (currentUser) {\r\n    return true;\r\n  } else return false;\r\n}\r\n\r\nexport default {\r\n  login,\r\n  signup,\r\n  logout,\r\n  getById,\r\n  checkConnection,\r\n  getUserLoggedIn,\r\n};\r\n","import UserService from '../services/UserService';\r\nimport { loading, doneLoading } from './SystemActions';\r\n// import history from './../history';\r\n\r\nexport function login(credentails) {\r\n  return async dispatch => {\r\n    const user = await UserService.login(credentails);\r\n    dispatch(_setUser(user));\r\n  };\r\n}\r\nexport function signup(credentails) {\r\n  return async dispatch => {\r\n    const user = await UserService.signup(credentails);\r\n    dispatch(_addUser(user));\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await UserService.logout();\r\n    dispatch(_setUser(null));\r\n  };\r\n}\r\n\r\nexport function getById() {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch(loading());\r\n      const user = await UserService.getById();\r\n      dispatch(_setUser(user));\r\n    } catch (err) {\r\n      console.log('UserActions: ERROR in getById', err);\r\n      // example for rerouting - after changing the store\r\n      // history.push('/some/path');\r\n    } finally {\r\n      dispatch(doneLoading());\r\n    }\r\n  };\r\n}\r\n\r\nfunction _setUser(user) {\r\n  return {\r\n    type: 'SET',\r\n    user,\r\n  };\r\n}\r\n\r\nfunction _addUser(user) {\r\n  return {\r\n    type: 'ADD',\r\n    user,\r\n  };\r\n}\r\n\r\nexport default {\r\n  login,\r\n  logout,\r\n  signup,\r\n  getById,\r\n};\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signup } from '../actions/UserActions';\r\n\r\n\r\nexport class Singup extends Component {\r\n  state = {\r\n    modalIsOpen: false,\r\n    fullName: '',\r\n    username: '',\r\n    password: '',\r\n    email: '',\r\n    phone: '',\r\n    imgUrl: '',\r\n  };\r\n\r\n\r\n  changeInput = ev => {\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [field]: value });\r\n\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n\r\n  onSignup = () => {\r\n    const user = this.state;\r\n    delete user.modalIsOpen;\r\n    this.props.signup(user);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <a onClick={this.openModal}>signup</a>\r\n        <div className='log-in'>\r\n          <input type='text' placeholder='Full Name' onChange={this.changeInput} name='fullName'></input>\r\n          <br />\r\n          <input type='text' placeholder='User Name' onChange={this.changeInput} name='username'></input>\r\n          <br />\r\n          <input type='password' placeholder='Password' onChange={this.changeInput} name='password'></input>\r\n          <br />\r\n          <input type='phone' placeholder='Phone' onChange={this.changeInput} name='phone'></input>\r\n          <br />\r\n\r\n          <input type='imgUrl' placeholder='imgUrl' onChange={this.changeInput} name='imgUrl'></input>\r\n          <br />\r\n          <input type='email' placeholder='email' onChange={this.changeInput} name='email'></input>\r\n          <br />\r\n\r\n          <button className=\"btn-lg btn-action\" onClick={this.onSignup}>sign-up</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  signup,\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Singup);\r\n","import React, { Component } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { Link } from 'react-router-dom';\r\nimport { login } from '../actions/UserActions';\r\n\r\nimport { connect } from 'react-redux';\r\nimport Signup from '../components/Signup';\r\nimport { Button } from '@material-ui/core';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    email: '',\r\n    password: '',\r\n    isHide: true,\r\n  };\r\n\r\n  // openModal = this.openModal.bind(this);\r\n  // afterOpenModal = this.afterOpenModal.bind(this);\r\n  // closeModal = this.closeModal.bind(this);\r\n\r\n  changeInput = ev => {\r\n    let field = ev.target.name;\r\n    let value = ev.target.value;\r\n    this.setState({ [field]: value });\r\n  };\r\n\r\n  // openModal() {\r\n  //   this.setState({ modalIsOpen: true });\r\n  // }\r\n\r\n  // afterOpenModal() {\r\n  //   // references are now synced and can be accessed.\r\n  //   this.subtitle.style.color = '#f00';\r\n  // }\r\n\r\n  // closeModal() {\r\n  //   this.setState({ modalIsOpen: false });\r\n  // }\r\n\r\n  onLogInUser = async () => {\r\n    const email = this.state.email;\r\n    const password = this.state.password;\r\n    const user = { email, password };\r\n\r\n    // this.props.onLogIn(user);\\\r\n    await this.props.login(user);\r\n    this.props.history.push(`/`);\r\n  };\r\n\r\n  changeForm = () => {\r\n    this.setState(prevState => ({ isHide: !prevState.isHide }));\r\n  };\r\n\r\n  render() {\r\n    const hideSignup = this.state.isHide ? 'hide' : 'show-block';\r\n    const hideLogIn = !this.state.isHide ? 'hide' : 'show-block';\r\n    return (\r\n      <div className='flex column align-center justify-center'>\r\n        {/* <Navbar styleNavBar={styleNavBar} ></Navbar> */}\r\n        <div>Log-in</div>\r\n        <div className={hideLogIn}>\r\n          <div>\r\n            {' '}\r\n            <input name='email' onChange={this.changeInput} value={this.state.email} type='text' className='login-input' placeholder=' email'></input>\r\n          </div>\r\n          <div>\r\n            {' '}\r\n            <input name='password' onChange={this.changeInput} value={this.state.password} type='password' className='login-input' placeholder=' Password'></input>\r\n          </div>\r\n          <div className='login-btns-warpper'>\r\n            <div className='btn-container'>\r\n              <button className='btn-lg btn-action' onClick={this.onLogInUser}>\r\n                Login\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={hideSignup}>\r\n          <Signup></Signup>\r\n        </div>\r\n        <span className='cursor-pointer' onClick={this.changeForm}>\r\n          If you are not registered click here to register\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  login,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport Login from './Login';\r\nimport Signup from './Signup';\r\nimport { logout, login } from '../actions/UserActions';\r\n\r\nexport class Header extends Component {\r\n\r\n  onLogout = (ev) => {\r\n    ev.preventDefault()\r\n    this.props.logout();\r\n    this.props.history.push(`/`);\r\n  };\r\n\r\n  onLogIn = async user => {\r\n\r\n    await this.props.login(user);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='main-header-container flex align-center space-between'>\r\n        <div className='container logo flex-basis-60 '>\r\n          <Link to='/'>\r\n            <span>umami</span>\r\n          </Link>\r\n        </div>\r\n        <div className='nav-container container flex-basis-30 flex justify-end'>\r\n          <div className='controls flex-basis-1 flex row align-center justify-center'>\r\n            <div className='margin-right-10'>\r\n              <Link to='/meal/edit'>\r\n                <span className='ellipse-link'>Become a Host</span>\r\n              </Link>\r\n            </div>\r\n            {this.props.loggedInUser && (\r\n              <>\r\n                <div className='logged-user-container'>\r\n                  <Link className='' to={`/user/${this.props.loggedInUser._id}`}>\r\n                    <img style={{ width: '60px', height: '60px' }} src='https://res.cloudinary.com/contentexs/image/upload/v1580171634/user-round.svg' alt='' />\r\n                  </Link>\r\n                </div>\r\n                <span>|</span>\r\n                <div>\r\n                  <a href='' onClick={this.onLogout}>\r\n                    logout\r\n                  </a>\r\n                </div>\r\n              </>\r\n            )}\r\n            {!this.props.loggedInUser && (\r\n              <>\r\n                <Link className=' ' to={'/user/log-in'} onLogIn={this.onLogIn}>log-in</Link>\r\n                {/* <Login onLogIn={this.onLogIn}></Login> <span>|</span> */}\r\n                {/* <Signup></Signup> */}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  loggedInUser: state.user.loggedInUser,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  logout,\r\n  login,\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\r\n","import React from 'react';\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <div className='footer-container margin-top-20 flex'>\r\n      <div className='footer-logo container flex column align-center justify-center'>\r\n        <h3>umami</h3>\r\n        <small> 2019 umami - All Rights Reserved</small>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Component } from 'react';\r\nimport { Router, Switch, Route } from 'react-router-dom';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport Home from './pages/Home';\r\nimport MealApp from './pages/MealApp';\r\nimport MealDetails from './pages/MealDetails';\r\nimport UserDetails from './pages/UserDetails';\r\nimport MealFormWrapper from './pages/MealFormWrapper';\r\n\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport SearchBar from './components/SearchBar';\r\nimport Login from './components/Login'\r\n\r\n\r\nimport './assets/css/all.min.css';\r\nimport './assets/styles/global.scss';\r\n\r\n  const history = createBrowserHistory();\r\n\r\n  export default class App extends Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Router history={history}>\r\n          <Header></Header>\r\n          <Switch>\r\n            <Route component={Home} path='/' exact></Route>\r\n            <Route component={MealFormWrapper} path='/meal/edit/:id?'></Route>\r\n\r\n            <Route component={MealApp} path='/meal/location/:location?'></Route>\r\n            <Route component={MealApp} path='/meal/cuisine/:cuisine?'></Route>\r\n            <Route component={MealApp} path='/meal/results/:results?'></Route>\r\n            <Route component={Login} path='/user/log-in' exact></Route>\r\n            {/* <Route component={Signup} path='/user/signup' exact></Route> */}\r\n            <Route component={MealDetails} path='/meal/:id' exact></Route>\r\n            <Route component={UserDetails} path='/user/:id' exact></Route>\r\n          </Switch>\r\n          <Footer></Footer>\r\n        </Router>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","\r\nlet initialState = {\r\n    filter: {\r\n        userId: '',\r\n        at: '',\r\n        type: '',\r\n        location: {\r\n            city: '',\r\n            country: '',\r\n        },\r\n        tags: ''\r\n    }\r\n};\r\n\r\nexport default function FilterReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n        case 'SET_FILTER':\r\n\r\n            return {\r\n                ...state,\r\n                filter: { ...action.filter }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","let initialState = {\r\n  meals: [],\r\n  userMeals:[],\r\n  selectedMeal: null,\r\n  cities: [],\r\n  cuisines: [],\r\n};\r\n\r\nexport default function MealReducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOAD':\r\n      return {\r\n        ...state,\r\n        meals: action.meals,\r\n      };\r\n    case 'GET_BY_ID':\r\n      return {\r\n        ...state,\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'ADD':\r\n      return {\r\n        ...state,\r\n        meals: [...state.meals, action.meal],\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'UPDATE':\r\n      return {\r\n        ...state,\r\n        meals: state.meals.map(meal => (action.meal._id === meal._id ? action.meal : meal)),\r\n        selectedMeal: action.meal,\r\n      };\r\n    case 'REMOVE':\r\n      return { ...state, meals: state.meals.filter(meal => meal._id !== action.id) };\r\n    case 'LOAD_CITIES':\r\n      return { ...state, cities: [...action.citiesToReducer] };\r\n    case 'LOAD_CUISINES':\r\n      return { ...state, cuisines: [...action.cuisineTypesToReducer] };\r\n    case 'LOAD_TAGS':\r\n      return { ...state, tags: [...action.tags] };\r\n    case 'LOAD_USER_MEAL':\r\n      return {\r\n        ...state,\r\n        userMeals: action.userMeals,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export default {\r\n  createReducer,\r\n  updateObject,\r\n  addItemToState,\r\n  updateItemInState,\r\n  removeItemFromState,\r\n};\r\n\r\nexport function updateObject(oldObject, newValues) {\r\n  return Object.assign({}, oldObject, newValues);\r\n}\r\n\r\nexport function addItemToState(state, item) {\r\n  return [...state, item];\r\n}\r\n\r\nexport function updateItemInState(state, itemId, updateItemCallback) {\r\n  return state.map(item => (item.id !== itemId ? item : updateItemCallback(item)));\r\n}\r\n\r\nexport function removeItemFromState(state, itemId) {\r\n  return state.filter(item => item.id !== itemId);\r\n}\r\n\r\nexport function createReducer(initialState, handlers) {\r\n  return function reducer(state = initialState, action) {\r\n    if (handlers.hasOwnProperty(action.type)) {\r\n      return handlers[action.type](state, action);\r\n    } else {\r\n      return state;\r\n    }\r\n  };\r\n}\r\n","import reducerUtility from './reducerUtilities';\r\n\r\nlet localLoggedUser = null;\r\nif (sessionStorage.user) localLoggedUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n  loggedInUser: localLoggedUser,\r\n};\r\n\r\nconst UserReducer = reducerUtility.createReducer(initialState, {\r\n  SET: load,\r\n  ADD: add,\r\n});\r\n\r\nfunction load(state, action) {\r\n  return { ...state, loggedInUser: action.user };\r\n}\r\n\r\nfunction add(state, action) {\r\n  return {\r\n    ...state,\r\n    loggedInUser: action.user,\r\n  };\r\n}\r\n\r\nexport default UserReducer;\r\n","const initialState = {\r\n  isLoading: false,\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOADING_START':\r\n      return { ...state, isLoading: true };\r\n    case 'LOADING_DONE':\r\n      return { ...state, isLoading: false };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\n\r\nimport FilterReducer from './FilterReducer';\r\nimport MealReducer from './MealReducer';\r\nimport UserReducer from './UserReducer';\r\nimport SystemReducer from './SystemReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  system: SystemReducer,\r\n  filter: FilterReducer,\r\n  meal: MealReducer,\r\n  user: UserReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst Store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default Store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport Store from './store';\r\n\r\nReactDOM.render(\r\n  <Provider store={Store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}